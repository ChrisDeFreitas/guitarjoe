{"version":3,"sources":["Fret.jsx","guitar_lib.js","controls/react-abcjs.js","NoteButton.jsx","FretPnl.jsx","QueryBar.jsx","controls/ArrowButton.jsx","controls/ArrowPnl.jsx","InfoPnl.jsx","controls/HelpData.js","controls/HelpManager.jsx","resources/logo.svg","QueryPnl.jsx","Fretboard.jsx","AboutDlg.jsx","App.jsx","index.jsx"],"names":["Fret","props","keyii","key","first","fretFirst","last","fretLast","strg","fret","click","onClick","fretFiltered","btnStrFltr","className","strgFltrClick","title","fretbar","stringdiv","content","defaultProps","q","chords","list","name","abr","intervals","byName","str","chord","findByIvls","ivls","length","fnd","ii","inversions","note","chordName","octave","robj","toUpperCase","notes","byNote","Number","cobj","obj","maxinversions","result","root","max","positions","rivls","s0","semis","idx","s1","cnt","pos","inc","ridx","ioctave","num","interval","calc","isemis","iobj","bySemis","inversionLog","invrObj","includeSemis","caption","data","undefined","console","log","inversionNotes","invrPos","local_invrToNobj","invr","strgn","parent","rootfret","nobj","fretboard","fretMax","maxInversions","tmp","inversion","forEach","push","preferFlats","indexOf","iname","ivl","type","fullName","fullAbbrev","shapes","chordAbr","string","strings","E","A","D","G","B","e","shapeByName","bar","find","shapesByChord","filter","shape","shapeTabs","roots","min","fretMin","ltr","tab","byTab","shapeAbr","tabLetter","fretMinSet","nn","init","fretMaxSet","strgN","fretInRange","strgnum","substr","tabByFret","strN","degName","nm","returnFirst","findNote","alpha","ivlOrName","rprefix","rsuffix","iprefix","newlet","newsfx","local_inc","fobj","match","nobjList","nidx","slice","comparisons","iidx","splice","toAbc","noteLength","acc","Math","floor","scales","short","degreeTriads","scale","sobj","degrees","rootivl","semis0","deg","triad","degree","degreeName","scaleName","ivlAbr","shortName","abbrevName","octaveNum","Abcjs","uniqueNumber","Date","now","random","abcNotation","parserParams","engraverParams","renderParams","abcjsObj","renderAbc","this","renderAbcNotation","style","width","id","PureComponent","responsive","viewportHorizontal","NoteButton","qry","buttonClick","event","btn","target","nodeName","parentNode","stopPropagation","mode","classList","contains","stateChange","dataset","fretSelect","fretSelectFind","toggle","btnStyleChange","fretBtnStyle","btnStyle","btncaption","minPadding","paddingtop","paddingbottom","paddingleft","paddingright","staffwidth","textboxpadding","btnClass","fretFltr","strgFltr","noteFilter","join","FretPnl","fretClick","bind","fretFltrClick","cell","strn","isNaN","fretfilter","clientY","getBoundingClientRect","top","offsetHeight","strgFiltered","document","querySelector","fbid","currentTarget","fso","fretSelectMatch","scaleTriadIvls","chordShapeData","strlet","chordInvrNotes","inv","inversionNoteByTab","fretSelectMatchFind","ivlFind","chordShapeFind","chordInvrFind","scaleTriadFind","chordFind","scaleFind","rootFind","noteFind","octaveFind","trArray","ss","row","frets","col","fretFilter","cls","clickfunc","ssClassName","collapsed","buttonFind","React","Component","firstRender","QueryBar","htmlReturned","aniControl","useAnimation","changeHandlerTag","selLabelClick","lbl","selected","ivlName","selNoteChange","sel","val","options","selectedIndex","text","selOctaveChange","selScaleChange","selChordChange","trim","selIntervalChange","useEffect","setChangeHandler","newqry","tag","start","initial","motion","div","animate","variants","Close","height","opacity","Collapsed","Open","transition","ease","duration","onAnimationComplete","variantName","value","onChange","drawSelNote","omin","oct","drawSelOctave","drawSelScale","datastate","chd","drawSelChord","html","drawSelInterval","ArrowButton","uord","upOrDn","toLowerCase","dstyle","astyle","fontSize","newud","up","transform","left","dn","ArrowPnl","keyidx","openState","inherit","Show","Collapse","onAniComplete","arrowTitle","arrowWidth","items","scaleFirstRender","chordFirstRender","InfoPnl","thisAniControl","scaleAniControl","chordAniControl","scaleHandlerTag","chordHandlerTag","aniComplete","changeHandlerTest","chordShapeClick","fsChordClick","fsScaleClick","infoItemClick","invrLabelClick","triadLabelClick","scaletriad","scaleTriadDisplay","chordInvrDisplay","arrowFunc","htmlCaption","htmlItems","noblist","a","lastkey","lastname","ob","drawFretSelectMatches","fretSelectMatchDisplay","scaleTriads","scaleTriadSelected","chordShape","invrs","pobj","chordInvrSelected","helpData","default","Modes","link","QuickTips","related","Fretboard","QueryPanel","InfoPanel","HelpManager","_g","useState","isOpen","setIsOpen","topicClicked","setTopicChanged","subtopic","setSubtopic","crumbs","setCrumbs","topicClick","topicSelect","topic","el","scrollIntoView","menu","itm","map","unshift","ctrl","hash","preventDefault","open","closed","children","QueryPnl","helpManagerOpen","btnCollapseClick","btnClearClick","btnHelpClick","btnDupeClick","btnDelClick","reset","remove","duplicate","forceUpdate","helpManager","qryBtnClass","arrowUord","whileTap","damping","state","strgFilter","fretRoot","selNoteVal","makeQuery","changeHandlerActive","changeHandlers","changeExecList","testFunc","execFunc","Error","found","nextProps","nextState","err","alert","setState","findIndex","Array","isArray","sort","b","objOrTab","About","trigger","modal","nested","close","href","_excluded","_extends","Object","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","titleId","xmlns","viewBox","x","y","ref","fill","stroke","strokeWidth","d","points","ForwardRef","App","fbs","setFbs","newid","setNewId","indexOfFbid","nid","fbCount","useRef","current","useFirstRender","fretBtnText","strgFltrList","alt","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dcfbf50f.chunk.js","sourcesContent":["/*\n Fret.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - called by FretPnl.jsx to draw a fret for GuitarJoe app\n  - consolidates fret drawing functionality by handling HTML formulation, no content or event handling\n  - fretboard is built from TD elements\n\n*/\nimport React  from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Fret( props ){\n\n  let keyii = 0\n  function key(){ return 'Fret' +(++keyii) }\n\n  let first = props.fretFirst\n  let last = props.fretLast\n  let strg = props.strg\n  let fret = props.fret\n  let click = props.onClick\n\n  if(props.fretFiltered === true && strg >= 1){ //no onClick for filtered frets\n    click = null\n  } \n\n  let btnStrFltr = null    //string filter image for fret0\n  if(fret === 0 && strg >= 1 && strg <= 6){\n    // <div>&diams;</div>\n    btnStrFltr=(\n     <div key={key()} className={'btnStrgFltr btnStrgFltr'+strg} onClick={props.strgFltrClick} data-strn={strg} data-fret={fret} \n      title='Click to enable/disable this string'>\n      <div>&nbsp;</div>\n     </div>\n    )\n  }\n\n  let fretbar = null      // fret bar image\n  if( strg > 0 && strg < 8\n  && fret >= first && fret <= last )\n    fretbar = <div key={key()} className='fretbar' onClick={click} data-strn={strg} data-fret={fret} ></div>\n\n  let stringdiv = null    //string image\n  if(strg >= 1 && strg <= 6)\n    stringdiv = <div key={key()} className='stringdiv' onClick={click} data-strn={strg} data-fret={fret} ></div>\n\n  return(\n    <td key={key()} \n      data-strn={strg} \n      data-fret={fret} \n      data-fretfilter={props.fretFiltered}\n      className={props.className} \n      onClick={click} \n     >\n       {btnStrFltr}\n       {props.content}\n       {fretbar}\n       {stringdiv}\n     </td>\n  )\n\n}\n\nFret.propTypes = {\n  fretFirst: PropTypes.number,\n  fretLast: PropTypes.number,\n  fretFiltered: PropTypes.bool,\n\n  strg: PropTypes.number,\n  fret: PropTypes.number,\n  \n  className: PropTypes.string,\n  content: PropTypes.object,\n  onClick: PropTypes.func,\n  strgFltrClick: PropTypes.func,\n}\nFret.defaultProps = {\n  fretFirst: 0,\n  fretLast: 14,\n  fretFiltered: false,\n\n  strg: 0,\n  fret: 0,\n\n  className: '',\n  content: null,\n  onClick: null,\n  strgFltrClick: null,\n}\n\nexport default Fret\n\n\n","/*\n   &flat; alt+?\n\n  GuitarJoe's guitar theory logic\n  by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  \n   Note:\n    - all objects returned are newly constructed, so they may by modified by the caller\n    - note refers to what we usually call a note: C#\n    - note object, nobj: { strgnum:int, fret:int, note:'C#', semis:49, ... }\n    - note.semis is unique: number of semitones, Middle C = 48\n    - fret is an integer\n    - fret object, fobj: { strg:{}, fret:int, tab:'e12' }\n    - ivl is an interval object: intervals.list[n]\n    - ivls is a list of interval objects\n    - chord is an object: chords.list[n]\n    - assume: exception handling performed by caller\n\n  Todo:\n    - (when needed) update notes.calc() for ##/bb -- see comments in function\n*/\nvar q = {\n\n  chords: {\n    list:[   //verified against: https://www.omnicalculator.com/other/chord\n      {\n        name:'Major triad', abr:'maj',\n        intervals:[ 'P1', 'M3', 'P5' ]\n      },{\n        name:'Minor triad', abr:'min',\n        intervals:[ 'P1', 'm3', 'P5' ]\n      },{\n        name:'Augmented triad', abr:'aug',\n        intervals:[ 'P1', 'M3', 'A5' ]\n      },{\n        name:'Diminished triad', abr:'dim',\n        intervals:[ 'P1', 'm3', 'd5' ]\n      },{\n        name:'Dominant seventh', abr:'7',\n        intervals:[ 'P1', 'M3', 'P5', 'm7' ]\n      },{\n        name:'Major seventh', abr:'maj7',\n        intervals:[ 'P1', 'M3', 'P5', 'M7' ]\n      },{\n        name:'Minor seventh', abr:'min7',\n        intervals:[ 'P1', 'm3', 'P5', 'm7' ]\n      },{\n        name:'Major sixth', abr:'maj6',\n        intervals:[ 'P1', 'M3', 'P5', 'M6' ]\n      },{\n        name:'Minor sixth', abr:'min6',\n        intervals:[ 'P1', 'm3', 'P5', 'M6' ]\n      },{\n        name:'Suspended second', abr:'sus2',\n        intervals:[ 'P1', 'M2', 'P5' ]\n      },{\n        name:'Suspended fourth', abr:'sus4',\n        intervals:[ 'P1', 'P4', 'P5' ]\n      }\n    ],\n    byName( str ){\n      for(let chord of q.chords.list){\n        if(chord.abr === str || chord.name === str)\n          return { ...chord }\n      }\n      return null\n    },\n    findByIvls( ivls ){    //find a chord by matching interval.abr\n      // return null or one of q.chords.list[]\n      for( let chord of q.chords.list ){\n        if(chord.intervals.length !== ivls.length) \n          continue\n\n        let fnd = true\n        for( let ii = 0; ii < chord.intervals.length; ii++ ){\n           if(ivls[ii].abr !== chord.intervals[ii]){\n             fnd = false\n             break\n           }\n        }\n        if( fnd === true )    // all ivls match\n          return { ...chord }\n      }\n      return null\n    },\n    inversions( note, chordName, octave = 0 ){   // return an inversion object for given note and scale\n      let robj = null\n      if( typeof note === 'object' ){\n        robj = note\n        note = robj.note\n      }else{\n        note = note.toUpperCase()\n        robj = q.notes.byNote( note )\n      }\n      if(octave === null) octave = 0\n      robj.octave = Number(octave)\n      let cobj = null\n      if( typeof chordName === 'object' ){\n        cobj = chordName\n        chordName = cobj.abr\n      }else\n        cobj = q.chords.obj(note, chordName)\n\n      let maxinversions = cobj.ivls.length\n      let result = { root:robj.note, chord:chordName, octave:octave, max:maxinversions, positions:[] }\n      let rivls = cobj.ivls\n      let positions = ['Root','First','Second','Third','Fourth','Fifth']\n\n      rivls[0].octave = robj.octave   // set correct octaves\n      let s0 = q.intervals.byNote( rivls[0].note ).semis     \n      for( let idx = 1; idx < maxinversions; idx++ ){\n        let s1 = q.intervals.byNote( rivls[idx].note ).semis\n        rivls[idx].octave = (s0 < s1 ?robj.octave :robj.octave +1)\n      }\n     \n      for( let cnt = 1; cnt <= maxinversions; cnt++){\n        let pos = positions[ cnt -1 ]\n        let obj = result.positions[ pos ] = []\n\n        for( let idx = 1; idx <= maxinversions; idx++ ){\n          let inc = 0\n          let ridx = idx +(cnt -2) \n          if(ridx >= maxinversions) {\n            ridx -= maxinversions\n            inc = 1\n          }\n          let ioctave = ( rivls[ ridx ].octave +inc )\n                    \n          obj[idx] ={ \n            num: (ridx +1),\n            note: rivls[ ridx ].note,\n            octave: ioctave,\n            interval: null,\n            abr:null,\n            semis: q.semis.calc( rivls[ ridx ].note, ioctave ),\n            // chordNote: rivls[ ridx ],\n          }\n          let isemis = (idx === 1 ?0 : obj[idx].semis -obj[1].semis)\n          let iobj = q.intervals.bySemis(isemis, true)\n          obj[idx].interval = (isemis === 0 ?'Root' :iobj.name )\n          obj[idx].abr = iobj.abr\n          // console.log( obj[idx] )\n        }\n      }\n\n      return result\n    },\n    inversionLog( invrObj, includeSemis = false ){    // write to console\n      let caption = invrObj.root +invrObj.octave +' ' +invrObj.chord +' inversions:\\n'\n      let data = ''\n      for( let pos in invrObj.positions){\n        data += ' ' +pos +': '\n        for( let obj of invrObj.positions[pos] ){\n          if(obj === undefined) continue    //positions[pos][0] === null\n          data += obj.interval +' - ' +obj.note +obj.octave\n                + ( includeSemis === false ?' ' :'(' +obj.semis +') ' )\n        }\n        data += '\\n'       \n      }\n      console.log( caption, data)\n    },\n    inversionNotes( invrObj, invrPos ){ //return note objects for inversion\n      //assume: inversion root is always the bass note \n      //assume: notes returned must be on continguous strings\n      //assume: notes must exist within a range of frets from the bass note\n      //note: only return notes when all notes of inversion found\n      //note: some inversions will not have results because of these rules\n\n      if( invrObj.positions[invrPos] === undefined )\n        return null\n\n      function local_invrToNobj( invr, strgn, parent = null, rootfret = null ){\n        let nobj = null\n        let strg = q.fretboard.strg( strgn )\n        let note = invr.note\n        let fret = ( q.intervals.byNote( note ).semis  -q.intervals.byNote( strg.note ).semis )\n        if(fret < 0) fret += 12\n        \n        if(rootfret != null) fret = rootfret +12  //for root position: find multiple notes on string\n        \n        while( fret <= q.fretboard.fretMax ){\n          //  console.log('fret'+fret+':', {strg:strg.note, invr:note, fret:fret} )\n          if(fret <= q.fretboard.fretMax){\n            nobj = q.notes.obj( strg.num, fret, note )\n            // console.log('  search:', {iOctave:invr.octave, nOctave:nobj.octave, nobjFret:nobj.fret, parentFret:parentFret })\n            if( parent === null || (nobj.fret >= parent.fret-3 && nobj.fret <= parent.fret+3 ))  //verify proximity of frets\n            //don't verify octaves, leave it for the user to inspect\n              break;\n            else{   //keep searching string\n              fret += 12\n              nobj = null\n            }\n          }\n        }\n        return nobj\n      }\n\n      let chord = invrObj.root +invrObj.chord\n      let maxInversions = invrObj.max\n      let inversions = invrObj.positions[invrPos]\n\n      let tmp = []  //temporary store for notes found\n      let list = []     //returned with all notes found\n      for(let strgn = 6; strgn >= maxInversions; strgn--){   //because of inversion logic, root note can never be on upper strings\n\n        let rootfret = null\n        while( rootfret === null || rootfret < q.fretboard.fretMax){  //allow searching for root note multiple times\n          //calc fret position of root note\n          let invr = inversions[1]\n          let nobj = local_invrToNobj( invr, strgn, null, rootfret )\n          if(nobj === null) break\n          tmp[0] = nobj\n          tmp[0].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:1}\n          rootfret = nobj.fret    //\n\n          //calc note n\n          let fnd = true\n          for(let num = 2; num <= maxInversions; num++){\n            let parent = nobj\n            invr = inversions[ num ]\n            nobj = local_invrToNobj( invr, strgn -(num -1), parent, null )\n            if(nobj === null) {\n              fnd = false\n              break\n            }\n            tmp[ num -1 ] = nobj\n            tmp[ num -1 ].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:num}\n          }\n          if(fnd === false) continue\n\n          tmp.forEach( nobj => list.push( nobj ) )\n        }\n      }\n      if(list.length === 0) return null\n      return list\n    },\n    obj( root, chordName ){  //return chord object with notes based on root arg\n      let ivls = [],\n        chord = q.chords.byName( chordName )\n      if(chord === null) return null\n\n      if(typeof root === 'string')\n        root = q.intervals.byName( root )   //object returned to caller\n      if(root === null) return null\n\n      let preferFlats = ( \n          chord.name.indexOf('Minor') >= 0  \n        ||chord.name.indexOf('Diminished') >= 0 \n        || root.note.indexOf('') >= 0)\n      for(let iname of chord.intervals){\n        let ivl = q.intervals.byName( iname )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivls.push({ ...ivl, note:note })\n      }\n\n      let obj = { \n        ...chord, \n        type:'chord',\n        fullName: root.note +' '+chord.name,\n        fullAbbrev: root.note +chord.abr,\n        root: root,\n        ivls:ivls\n      }\n\n      return obj\n    },\n\n    shapes: [   //define patterns for finding barre chords\n      // https://www.guitarplayer.com/lessons/46-chord-shapes-you-must-know-the-ultimate-guide-to-chord-substitutions\n      // https://www.libertyparkmusic.com/guitar-chord-shapes-beginner-to-advanced/\n      // https://www.guitarhabits.com/what-is-the-caged-system-the-keys-to-the-fretboard/\n      // https://appliedguitartheory.com/lessons/minor-caged-system/\n      // https://www.cagedguitarsystem.net/caged-seventh-chords/\n      //\n      // a shape object defines the numerical relationship between the root note\n      //   and notes on other strings\n      //\n      //rules:      \n      //  strg: root note found on this string, this is a tab string letter\n      //  cnt: number of frets consumed\n      //  list[ string ] === null: string not played\n      //  list[ string ] === integer: add to root fret number to obtain new fret on string\n      //\n      { name:'C Major', abr:'Cmaj', chordAbr:'maj', string:'A', cnt:4,\n        strings:{ E:null, A:0, D:-1, G:-3, B:-2, e:-3 }\n      },\n      { name:'A Major', abr:'Amaj', chordAbr:'maj', string:'A', cnt:3,\n        strings:{ E:null, A:0, D:2, G:2, B:2, e:0 }\n      },\n      { name:'G Major', abr:'Gmaj', chordAbr:'maj', string:'E', cnt:4,\n        strings:{ E:0, A:-1, D:-3, G:-3, B:-3, e:0 }\n      },\n      { name:'E Major', abr:'Emaj', chordAbr:'maj', string:'E', cnt:3,\n        strings:{ E:0, A:2, D:2, G:1, B:0, e:0 }\n      },\n      { name:'D Major', abr:'Dmaj', chordAbr:'maj', string:'D',  cnt:4,\n        strings:{ E:null, A:null, D:0, G:2, B:3, e:2 }\n      },\n      //\n      { name:'C Minor', abr:'Cmin', chordAbr:'min', string:'A', cnt:4,\n        strings:{ E:null, A:0, D:-2, G:-3, B:-2, e:null }\n      },\n      { name:'A Minor', abr:'Amin', chordAbr:'min', string:'A', cnt:3,\n        strings:{ E:null, A:0, D:2, G:2, B:1, e:0 }\n      },\n      { name:'G Minor', abr:'Gmin', chordAbr:'min', string:'E', cnt:4,\n        strings:{ E:0, A:-2, D:-3, G:-3, B:0, e:0 }\n      },\n      { name:'E Minor', abr:'Emin', chordAbr:'min', string:'E', cnt:3,\n        strings:{ E:0, A:2, D:2, G:0, B:0, e:0 }\n      },\n      { name:'D Minor', abr:'Dmin', chordAbr:'min', string:'D',  cnt:4,\n        strings:{ E:null, A:null, D:0, G:2, B:3, e:1 }\n      },\n      //\n      { name:'C Dominant seventh', abr:'C7', chordAbr:'7', string:'A', cnt:3,\n        strings:{ E:null, A:0, D:-1, G:0, B:-2, e:null }\n      },\n      { name:'A Dominant seventh', abr:'A7', chordAbr:'7', string:'A', cnt:3,\n        strings:{ E:null, A:0, D:2, G:0, B:2, e:0 }\n      },\n      { name:'G Dominant seventh', abr:'G7', chordAbr:'7', string:'E', cnt:4,\n        strings:{ E:0, A:-1, D:-3, G:-3, B:-3, e:-2 }\n      },\n      { name:'E Dominant seventh', abr:'E7', chordAbr:'7', string:'E', cnt:3,\n        strings:{ E:0, A:2, D:0, G:1, B:0, e:0 }\n      },\n      { name:'D Dominant seventh', abr:'D7', chordAbr:'7', string:'D',  cnt:4,\n        strings:{ E:null, A:null, D:0, G:2, B:1, e:2 }\n      } \n      /*/\n      { name:'C Suspended fourth', abr:'Csus4', chordAbr:'sus4', string:'A', cnt:4,\n        strings:{ E:null, A:0, D:0, G:-3, B:-2, e:-2 }\n      },\n      /*/\n    ],\n    shapeByName( name ){   // return barre chord object\n      let bar = q.chords.shapes.find( obj => obj.abr === name || obj.name === name )\n      return (bar === undefined ?null :{ ...bar} )\n    },\n    shapesByChord( chordAbr ){   // return list of barre chord objects\n      let list = q.chords.shapes.filter( shape => shape.chordAbr === chordAbr )\n      if(list.length === 0) return null\n\n      for( let ii in list ){\n        list[ii] = { ...list[ii] }\n      }\n      return list\n    },\n    shapeTabs( shape, note ){    //return object with name and tabs for note's barre chord\n      if( typeof shape === 'string' )\n        shape = q.chords.shapeByName( shape )\n      if(typeof note === 'object')\n        note = note.note\n        \n      //find root string, fret\n      let roots = q.notes.find( shape.string, note )\n      if( roots === null ) \n        return null\n        \n      //calculate notes on remaining strings\n      let chord = q.chords.obj( note, shape.chordAbr )\n      let min = q.fretboard.fretMin\n      let max = q.fretboard.fretMax\n      let filter = 'right'\n      for( let strg in shape.strings){\n        let fret = shape.strings[ strg ]\n        if(fret != null && fret < 0){\n          filter = 'left'\n          break\n        }\n      }\n      if(filter === 'left') min += (shape.cnt -1)  //frets start at 0 (nut)\n      else max -= (shape.cnt -1)\n\n      let result = []\n      for( let root of roots){\n        if(root.fret < min || root.fret > max ) continue\n        \n        let strings = { E:null, A:null, D:null, G:null, B:null, e:null }\n        for( let ltr in strings){\n          if( shape.strings[ltr] === null ){\n            strings[ltr] = null\n            continue\n          }\n          let tab = ltr +( root.fret +shape.strings[ltr] ) \n          let note = q.notes.byTab( tab )\n          let ivl = chord.ivls.find( ivl => note.notes.indexOf( ivl.note ) >= 0 )\n          \n          strings[ltr] = { tab:tab, ...ivl }\n        }\n        \n        result.push({\n          chord:( root.note +' ' +chord.name ),\n          abr:( root.note +chord.abr ),\n          shape:( shape.abr +' shape' ),\n          shapeAbr: shape.abr,\n          root: root,\n          type:'shapeTabs',\n          strings:strings\n        })      \n      }\n\n      return result\n    },\n  },\n\n  fretboard: {\n    strings: [\n      {num:1, note:'E', octave:4, semis:0, tabLetter:'e' },\n      {num:2, note:'B', octave:3, semis:0, tabLetter:'B' },\n      {num:3, note:'G', octave:3, semis:0, tabLetter:'G' },\n      {num:4, note:'D', octave:3, semis:0, tabLetter:'D' },\n      {num:5, note:'A', octave:2, semis:0, tabLetter:'A' },\n      {num:6, note:'E', octave:2, semis:0, tabLetter:'E' }\n    ],\n\n    fretMin:0,  //0 = nut\n    fretMax:14,\n    fretMinSet( nn ){   //not used as yet\n      q.fretboard.fretMin = nn\n      q.fretboard.init()\n    },\n    fretMaxSet( nn ){   //not used as yet\n      q.fretboard.fretMax = nn\n      q.fretboard.init()\n    },\n\n    init(){\n      for(let ii = 0; ii <= q.fretboard.strings.length -1; ii++){\n        let strg = q.fretboard.strings[ii]\n        q.fretboard.strings[ii].semis = q.semis.calc(strg.note, strg.octave)\n      }\n    },\n    strg( strgN ){  \n      if( typeof strgN === 'number')\n        return { ...q.fretboard.strings[ strgN -1 ] }\n        \n      //assume tab letter\n      let result = q.fretboard.strings.find(\n        strg => strg.tabLetter === strgN\n      )\n      return ( result === undefined ?null :{ ...result } )\n    },\n    fretInRange(nobj, root, num = 3){\n      //assume: root is a notes.obj()\n      let max = (num <= 5 ?5 :num)\n      if((root.fret <= 1 && nobj.fret <= max)\n      || (root.fret > 1 && nobj.fret >= (root.fret -num)\n         && nobj.fret <= (root.fret +num)) )\n        return true\n      return null\n    },\n    obj( strg, fret ){\n      if( typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      let semis = strg.semis +Number(fret)\n      return {\n        fret:fret, \n        // strg:Object.assign( {}, strg ), \n        strgnum:strg.num, \n        tab:(strg.tabLetter +fret),\n        semis: semis,\n        notes: q.notes.bySemis(semis)\n      }\n    },\n    bySemis( semis ){\n      let fret = null,\n        fretMax = q.fretboard.fretMax\n      for(let strg of q.fretboard.strings){\n        if(semis >= strg.semis && semis <= (strg.semis +fretMax)){\n          fret = ( semis -strg.semis )\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    byTab( tab ){\n      let ltr = tab.substr(0,1),\n        fret = Number(tab.substr(1))\n      for( let strg of q.fretboard.strings ){\n        if(strg.tabLetter === ltr){\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    tabByFret( strN, fret ){  // return example: 'e12'\n      strN = Number( strN )\n      for( let strg of q.fretboard.strings ){\n        if(strg.num === strN){\n          return ( strg.tabLetter +fret )\n        }\n      }\n      return null\n    },\n  },\n\n  intervals:{\n    list:[\n      //rules:\n      // 1. order by semitones\n      // 2. prefer perfect, major, minor first\n      // 3. prefer minor over diminished\n      // 4. prefer augmented last\n      // 5. removed (, TT) because added complexity not relevant to most uses\n      // \n      {name:'Perfect unison', abr:'P1',  semis:0, degName:'Tonic', note:'C' },\n      //{name:'Diminished second', abr:'d2', semis:0, note:'D' },\n      \n      {name:'Minor second', abr:'m2', semis:1, degName:'', note:'D' },\n      {name:'Augmented unison', abr:'A1', semis:1, degName:'', note:'C#' },\n      \n      {name:'Major second', abr:'M2', semis:2, degName:'Supertonic', note:'D' },\n      // {name:'Diminished third', abr:'d3', semis:2, note:'E' },\n      \n      {name:'Minor third', abr:'m3', semis:3, degName:'Mediant', note:'E' },\n      {name:'Augmented second', abr:'A2', semis:3, degName:'Mediant', note:'D#' },\n      \n      {name:'Major third', abr:'M3', semis:4, degName:'Mediant', note:'E' },\n      {name:'Diminished fourth', abr:'d4', semis:4, degName:'Mediant', note:'F' },\n\n      {name:'Perfect fourth', abr:'P4', semis:5, degName:'Subdominant', note:'F'},\n      {name:'Augmented third', abr:'A3', semis:5, degName:'Subdominant', note:'E#'},\n      \n      {name:'Diminished fifth', abr:'d5', semis:6, degName:'', note:'G' },\n      {name:'Augmented fourth', abr:'A4', semis:6, degName:'', note:'F#' },\n      // {name:'Tritone', abr:'TT', semis:6, note:'TT' },\n      \n      {name:'Perfect fifth', abr:'P5', semis:7, degName:'Dominant', note:'G' },\n      // {name:'Diminished sixth', abr:'d6', semis:7, note:'A' },\n      \n      {name:'Minor sixth', abr:'m6', semis:8, degName:'Submediant', note:'A' },\n      {name:'Augmented fifth', abr:'A5', semis:8, degName:'Submediant', note:'G#' },\n      \n      {name:'Major sixth', abr:'M6', semis:9, degName:'Submediant', note:'A' },\n      // {name:'Diminished seventh', abr:'d7', semis:9, note:'B' },\n      \n      {name:'Minor seventh', abr:'m7', semis:10, degName:'Subtonic', note:'B' },\n      {name:'Augmented sixth', abr:'A6', semis:10, degName:'Subtonic', note:'A#' },\n      \n      {name:'Major seventh', abr:'M7', semis:11, degName:'Leading tone', note:'B' },\n      {name:'Diminished octave', abr:'d8', semis:11, degName:'Leading tone', note:'C' },\n      \n      {name:'Perfect octave', abr:'P8', semis:12, degName:'Octave', note:'C' },\n      {name:'Augmented seventh', abr:'A7', semis:12, degName:'Octave', note:'B#' },\n    ],\n  \n    byNote( note ){\n      note = note.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.note === note)\n          return { ...ivl }\n      }\n      return null\n    },\n    byName( nm ){\n      let note = nm.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.abr === nm || ivl.note === note || ivl.name === nm)\n          return { ...ivl }\n      }\n      return null\n    },\n    bySemis( semis, returnFirst = false ){   //return intervals where semis match\n      semis = semis % 12\n      let list = []\n      for(let ivl of q.intervals.list){\n        if(ivl.semis > semis) break    //shortcircuit, intervals ordered by semis\n        if(ivl.semis === semis){\n          let obj = { ...ivl }\n          if(returnFirst === true) return obj\n          list.push( obj )\n        }\n      }\n      return list\n    },\n    findNote( ivls, nobj ){   //return null or ivl containing note\n      if(typeof nobj === 'string')\n        nobj = q.notes.byNote( nobj )\n      \n      let result = ivls.find( ivl => nobj.notes.indexOf( ivl.note ) >= 0 )\n\n      if( typeof result !== 'object') return null\n      return result\n    }\n  },\n\n  notes:{\n    list:['C','C#','D','D','D#','E','E','F','F#','G','G','G#','A','A','A#','B','B'],\n    alpha:['C','D','E','F','G','A','B'],\n\n    bySemis( semis, returnFirst = false ){\n      let list = []\n      semis = Number(semis) % 12\n      for(let ivl of q.intervals.list ){\n        if(ivl.semis === semis){\n          if(returnFirst === true) return ivl.note\n          list.push( ivl.note )\n        }\n        if(ivl.semis > semis) break //intervals ordered by semis\n      }\n      return list\n    },\n    calc( root, ivlOrName, preferFlats = false){  //iterate by semitones to get new note with correct #/b\n      // assume: preferFlats === true: return only flats\n\n      // to handle ##/bb:\n      // 1. pre-loop: resolve to standard note, get new root interval, proceed as normal: C## => D\n      // 2. post loop(???): if ivl requires ##/bb, manually resolve based on new note: D => C##\n\n      if(typeof root === 'object') root = root.note\n      let rprefix = root.substr(0,1)\n      let rsuffix = root.substr(1,2)\n      // console.log('root='+root, 'rprefix='+rprefix, 'rsuffix='+rsuffix)\n\n      let ivl = (typeof ivlOrName === 'object' ?ivlOrName : q.intervals.byName(ivlOrName))\n      let iprefix = ivl.abr.substr(0,1)    // A as in A1\n      // console.log('ivl.abr='+ivl.abr, 'iprefix='+iprefix )\n\n      // test: display matching intervals\n      // let rivl = q.intervals.byName( root )\n      // let list = q.intervals.bySemis( rivl.semis +ivl.semis )\n      // console.log( 'ivl.semis='+ivl.semis, '\\nlist=', list  )\n\n      //assume: no ## or bb used\n      let max = ivl.semis, idx = 0    //idx = q.notes.alpha.indexOf( ltr ) ::: test\n      let newlet = rprefix, newsfx = rsuffix\n      function local_inc( ltr ){\n        idx = q.notes.alpha.indexOf( ltr ) // this can probably be refactored out: notes.alpha[idx % 7] always === newlet; lookup not required\n        idx++\n        return q.notes.alpha[ idx % 7]\n      }\n      for(let ii = 0; ii < max; ii++){\n        // console.log('root='+root, 'newlet='+newlet+newsfx)\n        if(newlet === 'B' && newsfx === ''){ \n          newlet = 'C'; \n        }else\n        if(newlet === 'E' && newsfx === ''){ \n           newlet = 'F'; \n        }else\n        if(newsfx === ''){\n          newsfx = ''\n        }else\n        if(newsfx === '#'){\n          newsfx = ''\n          newlet = local_inc( newlet )\n        } \n        else  //newsfx === ''\n        if(iprefix === 'm' || iprefix === 'd'  || preferFlats === true){\n          newsfx = ''\n          newlet = local_inc( newlet )\n        }\n        else\n          newsfx = '#'\n      }\n      // console.log('root='+root, 'newlet='+newlet+newsfx)\n      return newlet+newsfx\n    },\n\n    find( strgN, note ){ // return null or list of note objects on string\n      note = note.toUpperCase()\n      let result = []\n      let strg = q.fretboard.strg( strgN )\n      let max = strg.semis +q.fretboard.fretMax\n      let semis = strg.semis\n      while(semis <= max){\n        let notes = q.notes.bySemis( semis )\n        if(notes.indexOf( note) >= 0){\n          let nobj = q.notes.obj(strg, semis -strg.semis, note)\n          result.push( nobj )\n          semis += 12\n        }\n        else\n          ++semis\n      }\n\n      if(result.length === 0) return null\n      return result\n    },\n    obj( strg, fret, note = null  ){\n      // console.log(111, fret, strg.num)\n      if(typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      if(fret < 0) return null\n      let semis = strg.semis +fret\n      if(semis > (strg.semis +q.fretboard.fretMax)) return null\n\n      let octave = q.octave(semis),\n          list = q.notes.bySemis( semis )\n      return {\n        fret: fret,\n        note: (note === null ?list[0] :note),\n        notes: list,\n        octave: octave,\n        semis: semis,\n        // strg: strg, \n        strgnum: strg.num, \n        tab: strg.tabLetter +fret\n      }\n    },\n    byNote( note /*, octave = 0 */ ){   // return note object\n      // assume note is a string\n      let ivl = q.intervals.byNote( note ),\n          semis = ivl.semis /* +(octave * 12) */,\n          list = q.notes.bySemis( semis )\n          //, fobj = q.fretboard.bySemis( semis )\n      return {\n        fret: null, // fobj.fret,    //null because input is not specific to a fret\n        note:note,\n        notes:list,\n        octave:null,  //octave,\n        semis:semis,\n        // strg: null, // fobj.strg,\n        strgnum: null, // fobj.strg.num,\n        tab: null // fobj.tab,\n      }\n    },\n    byTab( tab ){\n      let fobj = q.fretboard.byTab( tab )\n      return q.notes.obj( fobj.strgnum, fobj.fret )\n    },\n\n    match( ivls, nobjList ){    //return true/false if notes in nobjList contained within ivls\n      //used to match scales and chords to user selected notes\n      //assume: ivls is a list of intervals.list[n]\n      //assume: nobjList is a list of notes.obj()\n      //assume: no duplicate items allowed\n      //assume: ivls.length > nobjList.length \n      //assume: there may be ivls[n] between matched items: c,e matches c,d,e\n      //assume: matches may occur across head/tail boundaries: e,c matches c,d,e\n      //generally this is a pattern matching algorithm between two lists\n      if(nobjList.length > ivls.length) return false\n\n      let list = nobjList.slice()   //to support rotating list\n      let fnd, nidx\n\n      //break on first match of all items in nobjList\n      for(let comparisons = 1; comparisons <= list.length; comparisons++){ //max comparisons = original pattern +(list.length -1) rotations \n\n        fnd = false; nidx = 0    //reset search params\n        for(let iidx = 0; iidx < ivls.length; iidx++){    //iterate ivls\n          if(list[nidx].notes.indexOf( ivls[iidx].note ) >= 0){ //increment when list item found; allows for gaps in range\n            if(++nidx === list.length){   //point to next list item\n              // console.log( 'found:', comparisons, list, ivls )\n              fnd = true; break   \n            } \n          }\n        }\n\n        if(fnd === true) break\n        list.push( list.splice(0,1)[0] ) //rotate list by moving head to tail\n      }\n\n      return fnd\n    },\n\n    toAbc( nobj, noteLength = 8 ){\n      let result = ''\n      \n      let acc = nobj.note.substr(1)\n      if(acc === '#') result = '^'\n      else\n      if(acc === '') result = '_'\n      else\n      if(acc === '##') result = '^^'\n      else\n      if(acc === '') result = '__'\n\n      result += nobj.note.substr(0,1)\n       \n      if(nobj.octave === 1) result += ',,'\n      else\n      if(nobj.octave === 2) result += ','\n      else\n      //if(nobj.octave === 3) result = result\n      //else\n      if(nobj.octave === 4) result += \"'\"\n      else\n      if(nobj.octave === 5) result += \"''\"\n      else\n      if(nobj.octave === 6) result += \"''\"\n      else\n      if(nobj.octave === 7) result += \"'''\"\n\n      return result +noteLength\n    }\n  },\n\n  octave( semis ){\n    return Math.floor( semis / 12 )\n  },\n\n  scales:{\n    list:[\n      // tested with: https://www.omnicalculator.com/other/music-scale\n      //            https://www.scales-chords.com/scalenav.php\n      // rules:\n      //   keep accidentals of the same type -- all flat or sharp\n      { name:'Major', abr:'M', short:'Major',\n        // list:[ 'C', 'D', 'E', 'F', 'G', 'A', 'B'],\n        intervals:['P1','M2','M3','P4','P5','M6','M7']\n      },\n      { name:'Natural minor', abr:'m', short:'Minor', \n        // list:[ 'C', 'D', 'D#', 'F', 'G', 'A', 'A#'],\n        intervals:['P1','M2','m3','P4','P5','m6','m7']\n      },\n      { name:'Pentatonic major', abr:'P', short:'Pen.Maj', \n        // list:[ 'C', 'D', 'E', 'G', 'A'],\n        intervals:['P1','M2','M3','P5','M6']\n      },\n      { name:'Pentatonic minor', abr:'p', short:'Pen.min',\n        // list:[ 'C', 'D#', 'F', 'G', 'A#'],\n        intervals:['P1','m3','P4','P5','m7']\n      },\n      { name:'Blues heptatonic', abr:'B7', short:'Blues7',\n        intervals:['P1','M2','m3','P4','d5','M6','m7']\n      },\n      { name:'Blues hexatonic', abr:'B6', short:'Blues6',\n        // 1, 3, 4, 5, 5, 7\n        intervals:['P1','m3','P4','d5','P5','m7']\n      },\n      { name:'Akebono I', abr:'Ak1', short:'Akebono1',\n        intervals:['P1','M2','m3','P5','M6']   // https://ianring.com/musictheory/scales/653 {0,2,3,7,9}\n      },\n      { name:'Akebono II', abr:'Ak2', short:'Akebono2',\n        intervals:['P1','m2','M3','P5','m6']\n        // https://pianoencyclopedia.com/scales/akebono-ii/C-akebono-ii.html:  C, bD, E, G, bA \n        // also: https://ianring.com/musictheory/scales/419\n        // also: https://www.flutopedia.com/csc_5tone_12tet.htm\n      },\n      // { name:'Chromatic', abr:'Ch', short:'Chromatic',\n      //   intervals:['P1','m2','M2','m3','M3','P4','d5','P5','m6','M6','m7','M7']\n      // },\n      { name:'Double harmonic', abr:'DH', short:'Dbl.Hrm',\n        // minor second, major third, perfect fourth and fifth, minor sixth, major seventh -- https://en.wikipedia.org/wiki/Double_harmonic_scale\n        intervals:['P1','m2','M3','P4','P5','m6','M7']\n      },\n      { name:'Gypsy minor', abr:'Gm', short:'Gypsy',\n        // step pattern is W, H, +, H, H, +, H -- https://en.wikipedia.org/wiki/Hungarian_minor_scale\n        intervals:['P1','M2','m3','d5','P5','m6','M7']\n      },\n      { name:'Hungarian major', abr:'HM', short:'Hungarian',\n        // semitones: 3, 1, 2, 1, 2, 1, 2 -- https://en.wikipedia.org/wiki/Hungarian_major_scale\n        intervals:['P1','m3','M3','d5','P5','M6','m7']\n      },\n      { name:'Phrygian dominant', abr:'Pd', short:'Phrygian',\n        //1  2  3  4  5  6  7  1  https://en.wikipedia.org/wiki/Phrygian_dominant_scale\n        intervals:['P1','m2','M3','P4','P5','m6','m7']\n      },\n      { name:'Pygmy', abr:'Py', short:'Pygmy',\n        intervals:['P1','M2','m3','P5','m7']\n        // https://ianring.com/musictheory/scales/397  {0,2,3,7,8}\n        // also: https://alchetron.com/Pygmy-music#Pygmy-scale\n      }\n    ],\n    degreeTriads( root, scale ){    //build triads on all scale degrees\n      // return: {type:'Scale Degree Triads', root:root, scale:scale, abr:sobj.abr, list:[]}\n      let sobj = null\n      if(typeof root === 'object') root = root.note\n      if(typeof scale === 'object') sobj = scale\n      else sobj = q.scales.obj(root, scale)\n      if(sobj === null) return null\n\n      let result = {type:'Scale Degree Triads', root:root, scale:scale, abr:sobj.abr, list:[]}\n      const degrees = ['i','ii','iii','iv','v','vi','vii']\n\n      for(let ii = 0; ii < sobj.ivls.length; ii++){    //iterate each scale degree\n        let ivls = []\n        let rootivl = null    //to calc correct semitones for interval\n\n        for(let num = 0; num <= 2; num++ ){   //build triad\n          let iidx = ii +((+2 * num) )\n          if( iidx >= sobj.ivls.length ) iidx -= sobj.ivls.length\n          \n          let ivl = sobj.ivls[ iidx ]\n          ivl = {\n            num:    (num +1),\n            abr:    null,\n            note:   ivl.note, \n            semis0: ivl.semis, \n            semis:  ivl.semis\n          } \n          if(rootivl === null){\n            rootivl = ivl\n            rootivl.semis = 0\n          }\n          else{\n            ivl.semis -= rootivl.semis0\n            if( ivl.semis < 0 ) ivl.semis += 12\n          }\n          ivl.abr = q.intervals.bySemis( ivl.semis, true ).abr\n          ivls.push( ivl )\n        }\n      \n        let deg = degrees[ii]\n        let match = q.chords.findByIvls( ivls )\n        if(match !== null){\n          if( match.name.indexOf('Major') >= 0) deg = deg.toUpperCase()\n          if( match.name.indexOf('Diminished') >= 0) deg += ''\n          if( match.name.indexOf('Augmented') >= 0) deg += '+'\n        }\n\n        let triad = {\n          root:   sobj.ivls[ii].note,\n          num:    (ii +1),\n          degree: deg,\n          degreeName: sobj.ivls[ii].degName,\n          name:   (match !== null ?match.name :null),\n          abr:    (match !== null ?match.abr :null),\n          ivls:   ivls\n        }\n        result.list.push( triad )\n        // console.log( triad )\n      }\n      return result\n    },\n    byName( scaleName ){\n      for(let scale of q.scales.list){\n        if(scale.name === scaleName || scale.short === scaleName || scale.abr === scaleName)\n          return { ...scale }\n      }\n      return null\n    },\n    obj( root, scaleName ){  //return scale, root and scale intervals\n      let ivls = []\n\n      if(typeof root === 'string')        //else interval object\n        root = q.intervals.byName( root )\n      if(root === null) return null\n\n      let scale = q.scales.byName( scaleName )\n      if(scale === null) return null\n\n      let preferFlats = ( scaleName.indexOf('minor') >= 0 || root.note.indexOf('') >= 0 )\n\n      for(let ivlAbr of scale.intervals){   //generate intervals for scale built on root\n        let ivl = q.intervals.byName( ivlAbr )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivl = {\n          ...ivl,\n          abr: ivlAbr,    //abbreviation may differ from one assigned to scale\n          note:note,\n        }\n        ivls.push( ivl )\n      }\n\n      let obj = { \n        ...scale, \n        type:'scale',\n        fullName: root.note +' '+scale.name,\n        shortName: root.note +' '+scale.short,\n        abbrevName: root.note +scale.abr,\n        root: root,\n        ivls: ivls \n      }\n      return obj\n    }\n  },\n\n  semis:{\n    calc(note, octaveNum){   //return number of semitones\n        //assume: ocatveNum range: 0 to infinity\n        //assume: Middle C (C4) == (C,4) == (48 +0) == 48\n        //assume:            C0 == (C,0) == ( 0 +0) ==  0\n        //assume: A440     (A4) == (A,4) == (48 +9) == 57\n        let semis = (octaveNum *12)\n        semis += q.intervals.byName( note ).semis\n        return semis\n    },\n  },\n}\n\n\nq.fretboard.init()\nexport default q","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport abcjsObj from 'abcjs'\n\nclass Abcjs extends PureComponent {\n  uniqueNumber = Date.now() + Math.random()\n\n  renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams) {\n    // const res = abcjsObj.renderAbc(\n    abcjsObj.renderAbc(\n      'abcjs-result-' + this.uniqueNumber,\n      abcNotation,\n      parserParams,\n      engraverParams,\n      renderParams\n    )\n    \n//    return res\n  }\n\n  componentDidMount() {\n    const { abcNotation, parserParams, engraverParams, renderParams } = this.props\n    this.renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams)\n  }\n\n  componentDidUpdate() {\n    const { abcNotation, parserParams, engraverParams, renderParams } = this.props\n    this.renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams)\n  }\n\n  render() {\n    return (\n      <div style={{ width: '100%' }}>\n        <div id={'abcjs-result-' + this.uniqueNumber} style={{ width: '100%' }} />\n      </div>\n    )\n  }\n}\n\nAbcjs.propTypes = {\n  abcNotation: PropTypes.string,\n  parserParams: PropTypes.object,\n  engraverParams: PropTypes.object,\n  renderParams: PropTypes.object,\n}\n\nAbcjs.defaultProps = {\n  abcNotation: '',\n  parserParams: {},\n  engraverParams: { responsive: 'resize' },\n  renderParams: { viewportHorizontal: true },\n}\n\nexport default Abcjs\n","/*\n  NoteButton.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by FretPnl.jsx of GuitrJoe app\n\n*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './NoteButton.scss';\nimport q from \"./guitar_lib.js\";\nimport Abcjs from \"./controls/react-abcjs\"\n\n// sample:\n// <button className='noteButton'>\n//   <span className=note >C\n//     <span className='octave' >octave</span>\n//   </span>\n//   <span className='interval' >interval</span>\n// </button>\n\n\nfunction NoteButton( props ){\n  // console.log('NoteButton', props)\n\n  let {root, nobj, qry} = props\n\n  if(qry.octave !== 0 && qry.octave !== nobj.octave)\n    return null  \n\n  let keyii = 0\n  function key(){ return 'FBtn' +(++keyii) }\n\n  function buttonClick(event){\n    let btn = event.target\n    if(btn.nodeName !== 'BUTTON'){ \n      btn = btn.parentNode      //span\n      if(btn.nodeName !== 'BUTTON') \n        btn = btn.parentNode    //span span\n    }\n    if(btn.nodeName !== 'BUTTON') return\n    event.stopPropagation()\n\n    if(['fretRoot','noteSelect'].indexOf( qry.mode ) >= 0  \n    && btn.classList.contains('root')\n    && qry.scale === null && qry.chord === null && qry.ivl === null){    //nothing to do, turn off fretRoot state\n\t    props.stateChange( 'fretRoot', null )\n    } else\n    if(qry.mode === 'fretSelect' \n    && btn.classList.contains('root')\n    && btn.dataset.tab === qry.fretSelect[0].tab){ //root note, stop fretSelect mode\n      props.stateChange( 'fretSelect', null )\n    } else\n    if(qry.mode === 'fretSelect' \n    && props.fretSelectFind( btn.dataset.tab ) >= 0){ //this is a selected note\n      props.stateChange( 'fretSelect', btn.dataset.tab)   //toggle btn\n    }\n    else{   //toggle button selected state\n      btn.classList.toggle('selected')\n    }\n  }\n  function btnStyleChange(event){   //toggle formatting of fret button captions\n    // console.log('fretBtnStyleChange', event)\n    event.stopPropagation()\n    \n   if(qry.note === 'All'){\n      if(qry.fretBtnStyle === 'NoteTab')\n   \t  \tprops.stateChange( 'fretBtnStyle', 'NoteAbc' )\n      else\n        props.stateChange( 'fretBtnStyle', 'NoteTab' )\n    }\n    else\n    if(props.qry.fretBtnStyle === 'NoteFirst')\n   \t\tprops.stateChange( 'fretBtnStyle', 'IvlFirst' )\n    else\n    if(props.qry.fretBtnStyle === 'IvlFirst')\n   \t\tprops.stateChange( 'fretBtnStyle', 'IvlAbc' )\n    else\n    if(props.qry.fretBtnStyle === 'IvlAbc')\n   \t\tprops.stateChange( 'fretBtnStyle', 'IvlTab' )\n    else\n   \t\tprops.stateChange( 'fretBtnStyle', 'NoteFirst' )\n  }\n\n  let btnStyle = qry.fretBtnStyle,\n    ivl = nobj.ivl, \n    selected = 0\n \n    //format button caption\n  let btncaption = []\n  let renderParams = {    //for AbcJs\n    minPadding:5,   //doesn't work\n    paddingtop:0,\n    paddingbottom:0,\n    paddingleft:0,\n    paddingright:0,\n    //responsive: \"resize\",\n    scale:(nobj.octave <= 2 || nobj.octave >= 5 ?0.3 :0.4),\n    staffwidth:18,\n    textboxpadding:0,\n  }\n\n  let note = nobj.note\n  // iOS only so ignore (not iPadOS):\n  // if(note.indexOf('') >= 0){\n  //   note = <span className='flatNote'>{note}</span>\n  // }\n  \n  if(ivl === undefined || ivl === null){\n    switch(btnStyle){\n      case 'IvlFirst': btnStyle = 'NoteFirst'; break;\n      case 'IvlAbc': btnStyle = 'NoteAbc'; break;\n      case 'IvlTab': btnStyle = 'NoteTab'; break;\n      default: break; //for React automated testing\n    } \n  }\n\n  //apply button caption style\n  if(btnStyle === 'IvlFirst'){\n    btncaption.push(\n      <span key={key()} className='ivl' onClick={buttonClick} >\n        <span key={key()} onClick={buttonClick} >{ivl.abr.substr(0,1)}</span>\n        {ivl.abr.substr(1)}\n      </span>\n    )\n    btncaption.push(\n      <span key={key()} className='subNote' onClick={btnStyleChange}>{nobj.note}\n          <span key={key()} className='octave' >{nobj.octave}</span>\n      </span>\n    )\n  }else\n  if(btnStyle === 'IvlAbc'){\n    btncaption.push(\n      <span key={key()} className='ivl' onClick={buttonClick} >\n        <span key={key()} onClick={buttonClick} >{ivl.abr.substr(0,1)}</span>\n        {ivl.abr.substr(1)}\n      </span>\n    )\n    btncaption.push(\n      <span key={key()} className='ivlabc abc' onClick={btnStyleChange}\n         ><Abcjs key={key()} \n        abcNotation={'K:clef=none\\n y' +q.notes.toAbc( nobj )}\n        renderParams={renderParams} parserParams={{}} engraverParams={{}}\n      /></span>\n    )\n  } else\n  if(btnStyle === 'IvlTab'){\n    btncaption.push(\n      <span key={key()} className='ivl' onClick={buttonClick} >\n        <span key={key()} onClick={buttonClick} >{ivl.abr.substr(0,1)}</span>\n        {ivl.abr.substr(1)}\n      </span>\n    )\n    btncaption.push(\n      <span key={key()} className='ivltab tab' onClick={btnStyleChange}\n        >{nobj.tab}</span>\n    )\n  }else\n  if(btnStyle === 'NoteTab'){      \n    btncaption.push(\n      <span key={key()} className='note'  onClick={buttonClick} >{note}\n          <span key={key()} className='octave' onClick={buttonClick} >{nobj.octave}</span>\n      </span>\n    )\n    btncaption.push(\n      <span key={key()} className='notetab tab' onClick={btnStyleChange}\n        >{nobj.tab}</span>\n    )\n  }else\n  if(btnStyle === 'NoteAbc'){\n    btncaption.push(\n      <span key={key()} className='note'  onClick={buttonClick} >{note}\n          <span key={key()} className='octave' onClick={buttonClick} >{nobj.octave}</span>\n      </span>\n    )\n    btncaption.push(\n      <span key={key()} className='abc' onClick={btnStyleChange}\n         ><Abcjs key={key()} \n        abcNotation={'K:clef=none\\n y' +q.notes.toAbc( nobj )}\n        renderParams={renderParams} parserParams={{}} engraverParams={{}}\n      /></span>\n    )\n  } \n  else {  // (btnStyle === 'NoteFirst')\n    btncaption.push(\n      <span key={key()} className='note'  onClick={buttonClick} >{note}\n          <span key={key()} className='octave' onClick={buttonClick} >{nobj.octave}</span>\n      </span>\n    )\n    if(nobj.ivl){\n      btncaption.push(\n        <span key={key()} className='interval' onClick={btnStyleChange} >{ivl.abr}</span>\n      )\n    }\n  }\n \n  //apply classes in a specific order\n  let btnClass =  [ qry.mode ]\n  if(nobj.notes.indexOf( root.note ) >= 0){\n    btnClass.push('root')\n    if(qry.mode === 'fretRoot'){\n      if(qry.root.tab === nobj.tab)\n        btnClass.push('moderoot')\n    }\n  }\n  if((nobj.fretFltr && nobj.fretFltr === true) \n  || (nobj.strgFltr && nobj.strgFltr === true) ){\n    btnClass.push('filtered')\n  }\n  if(qry.noteFilter.indexOf( nobj.note ) >= 0){\n    btnClass.push('noteFilter')\n  }else\n  if(nobj.mode !== undefined){\n    btnClass.push(nobj.mode)\n  }\n\n  return (\n    <button key={key()} className={'noteButton '+btnClass.join(' ')}  onClick={buttonClick}\n      data-strn={nobj.strgnum} data-fret={nobj.fret}  data-tab={nobj.tab} \n      data-selected={selected}\n    >\n      {btncaption}\n    </button>\n  )  \n}\n\nNoteButton.propTypes = {\n  root: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object\n  ]),\n  nobj: PropTypes.object,\n  qry:  PropTypes.object,\n  fretSelectFind: PropTypes.func,\n  stateChange: PropTypes.func,\n}\n\nexport default NoteButton","/*\n  FretPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage activation of fretboard controls for GuitarJoe app\n\n*/\n\nimport React from 'react'\n// import { motion } from \"framer-motion\"\n\nimport './FretPnl.css';\nimport Fret from './Fret.jsx';\nimport NoteButton from './NoteButton.jsx';\nimport q from \"./guitar_lib.js\";\n\nclass FretPnl extends React.Component{\n\n  constructor (props) {\n    super(props)\n    this.fretClick = this.fretClick.bind(this)\n    this.fretFltrClick = this.fretFltrClick.bind(this)\n    this.strgFltrClick = this.strgFltrClick.bind(this)\n  }\n  keyii = 0\n  key(){ return 'FPnl' +(++this.keyii) }\n\n  fretClick( event ){\n    let qry = this.props.qry,\n      cell = event.target,\n      strN = Number(cell.dataset.strn), \n      fret = Number(cell.dataset.fret)\n\n    event.stopPropagation()\n    if( isNaN(strN) ){\n      console.log('FretPnl.fretClick() error, bad caller:', cell)\n      return \n    }\n    if(strN > 7 || fret > q.fretboard.fretMax || cell.dataset.fretfilter === \"true\")\n      return\n\n    //calc string number in use\n    if(strN === 7){\n      strN = 6 \n    }else\n    if( strN !== 1 && cell.className.indexOf('stringdiv') < 0 ){ \n      let cy = event.clientY,\n        rect = cell.getBoundingClientRect(),\n        mid = rect.top +(cell.offsetHeight  /2)\n      if(cy < mid) {\n        strN--\n      }\n    }\n\n    if(this.props.strgFiltered( strN ) === true)\n      return\n\n    let note = q.notes.obj( strN, fret )\n    let btn = document.querySelector( '#Fretboard' +qry.fbid +' .noteButton[data-tab=' +note.tab +']')\n    if(btn !== null){\n      // Note: ignore because user must click button\n      // however, this works:\n      //   event.target = btn\n      //   btn.click( event )\n      return\n    } else\n    if(['','noteSelect'].indexOf(qry.mode) >= 0){\n\t\t  this.props.stateChange( 'fretRoot', note )\n    }else\n    if(qry.mode === 'fretRoot'){\n\t\t  this.props.stateChange( 'fretSelect', [qry.root, note] )\n    }else\n    if(qry.mode === 'fretSelect'){\n\t    this.props.stateChange( 'fretSelect', note )\n    }\n  }\n  fretFltrClick( event ){ //toggle state for frets\n    let //qry = this.props.qry,\n      btn = event.currentTarget,\n      fret = Number( btn.dataset.fret )\n\n    event.stopPropagation()\n    this.props.stateChange( 'fretFilter', fret )\n  }\n  strgFltrClick( event ){\n    let btn = event.currentTarget,\n      strN = btn.dataset.strn\n    this.props.stateChange( 'strgFilter', strN )\n    event.stopPropagation()\n  }  \n  \n  rootFind( nobj ){    //select fret = selected fret\n    let qry = this.props.qry\n    if(qry.mode !== 'fretRoot') return null\n\n    if(nobj.tab === qry.root.tab){\n      return <NoteButton key={this.key()}\n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    }\n    return null\n  }\n  noteFind( nobj ){    //select all frets with note = selNoteVal\n    let qry = this.props.qry\n    if(qry.mode !== 'noteSelect') return null\n\n    let idx = nobj.notes.indexOf(qry.note)\n    if(qry.note === '' ||  idx >= 0){\n      if(qry.octave === 0 || qry.octave === nobj.octave){\n        if(qry.note !== '')\n          nobj.note = qry.note\n        // nobj.mode = 'noteSelect'\n        return <NoteButton key={this.key()} \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    } }\n    return null\n  }\n  fretSelectFind( nobj ){\n    let qry = this.props.qry\n\n    if(qry.mode !== 'fretSelect') return null\n    if(qry.fretSelect.length === 0) return null\n\n    for(let fso of qry.fretSelect){\n      if(nobj.tab === fso.tab){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = fso.ivl\n          nobj.note = fso.note\n          nobj.mode = 'fretSelect'\n          return <NoteButton key={this.key()} \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  fretSelectMatchFind( nobj ){\n    let qry = this.props.qry\n\n    if(qry.mode !== 'fretSelect') return null\n    if(qry.fretSelectMatch === null) return null\n\n    for(let ivl of qry.fretSelectMatch.obj.ivls){\n      if(nobj.notes.indexOf( ivl.note ) >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = ivl\n          nobj.note = ivl.note\n          if(this.props.fretSelectFind( nobj.tab ) < 0)\n            nobj.mode = 'fretSelectMatch'\n          else\n            nobj.mode = 'fretSelect'\n          return <NoteButton key={this.key()} \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  scaleTriadFind( nobj ){\n    let qry = this.props.qry\n    if(qry.scale === null) return null\n    if(qry.scaleTriadIvls === null) return null\n\n    let ivl = q.intervals.findNote( qry.scaleTriadIvls, nobj )\n    if( ivl === null ) return null\n\n    nobj.note = ivl.note\n    nobj.ivl = ivl\n    nobj.mode = (ivl.num === 1 ?'triadRoot' :'triad')\n    return <NoteButton key={this.key()} \n              root={qry.root} nobj={nobj}  qry={qry} \n              fretSelectFind={this.props.fretSelectFind} \n              stateChange={this.props.stateChange} \n           />\n  }\n  octaveFind( nobj ){  //find notes for selected octave\n    let qry = this.props.qry\n    if(qry.note !== '') return\n\n    if(qry.octave === nobj.octave){\n      nobj.ivl = qry.ivl\n      return <NoteButton key={this.key()} \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    }\n    return null\n  }\n  scaleFind( nobj ){\n    let qry = this.props.qry\n    if(qry.scale === null) return null\n\n    if(qry.mode === 'fretRoot'){    //exclude frets\n      if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n        return null\n    }\n    for(let ivl of qry.scale.ivls){\n      if( nobj.notes.indexOf(ivl.note) >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = ivl\n          nobj.note = ivl.note\n          nobj.mode = 'scale'\n          return <NoteButton key={this.key()} \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  chordFind( nobj ){\n    let qry = this.props.qry\n    if(qry.chord === null) return null\n\n    if(qry.mode === 'fretRoot'){    //exclude frets out of range\n      if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n        return null\n    }\n    for(let ivl of qry.chord.ivls){\n      if( nobj.notes.indexOf(ivl.note) >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = ivl\n          nobj.note = ivl.note\n          nobj.mode = 'chord'\n          return <NoteButton key={this.key()} \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  chordShapeFind( nobj ){\n    let qry = this.props.qry\n    if(qry.chord === null) return null\n    if(qry.chordShapeData === null) return null\n\n    for( let shape of qry.chordShapeData ){\n      for( let strlet in shape.strings ){\n        if(shape.strings[strlet] === null) continue\n        let tab = shape.strings[strlet].tab\n        if( nobj.tab === tab ){\n          nobj.note = shape.strings[strlet].note\n          nobj.ivl = shape.strings[strlet]\n          nobj.mode = 'chordShape' \n          return <NoteButton key={this.key()} \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  chordInvrFind( nobj ){\n    let qry = this.props.qry\n    if(qry.chord === null) return null\n    if(qry.chordInvrNotes === null) return null\n\n    let inv = this.props.inversionNoteByTab( nobj.tab )\n    if(inv === null) return null\n\n    if(qry.octave === 0 || qry.octave === nobj.octave){\n      nobj.note = inv.note\n      nobj.ivl = inv.invr\n      nobj.mode = (inv.invr.num === 1 ?'invrRoot' :'invr')\n      return <NoteButton key={this.key()} \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    }\n    else \n      return null\n  }\n  ivlFind( nobj ){     //select frets matching interval\n    let qry = this.props.qry\n    if(qry.ivl === null) return null\n    \n    let btn = null\n    if( (qry.mode === 'fretRoot' && nobj.tab === qry.root.tab)\n    ||  (qry.mode === 'noteSelect' && nobj.notes.indexOf(qry.note) >= 0) ){ //this is the root note object\n      // btn = 'root'\n      btn = null\n    } else\n    if(qry.mode === 'fretRoot' && q.fretboard.fretInRange(nobj, qry.root, 4) === true){\n      if( nobj.notes.indexOf(qry.ivl.note) >= 0 )\n        btn = true\n    }else\n    if(qry.mode === 'noteSelect' && nobj.notes.indexOf(qry.ivl.note) >= 0){\n      btn = true\n    }\n\n    if(btn === 'root'){\n      nobj.ivl = q.intervals.byName('P1')\n      nobj.note = qry.note\n    }else\n    if(btn === true){\n      if(qry.octave === 0 || qry.octave === nobj.octave){\n        nobj.ivl = qry.ivl\n        nobj.note = qry.ivl.note\n      }\n      else\n        btn = null\n    }\n    if(btn != null){\n      nobj.mode = 'interval'\n      return <NoteButton key={this.key()} \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    }\n    return null\n  }\n\n  buttonFind( nobj ){\n    let qry = this.props.qry\n    let btn = null\n\n    // ordering is critical because it determines which buttons are on top\n\n    if(qry.mode === 'AllNotes'){\n      btn = <NoteButton key={this.key()} \n              root={'ALL'} nobj={nobj}  qry={qry} \n              fretSelectFind={this.props.fretSelectFind} \n              stateChange={this.props.stateChange} \n            />\n    }\n\n    //fretSelect mode\n    if(btn === null) btn = this.fretSelectFind( nobj )\n    if(btn === null) btn = this.fretSelectMatchFind( nobj )\n\n    //noteSelect and fretRoot mode\n    if(btn === null) btn = this.ivlFind( nobj )\n    if(btn === null) btn = this.chordShapeFind( nobj )\n    if(btn === null) btn = this.chordInvrFind( nobj )\n    if(btn === null) btn = this.scaleTriadFind( nobj )\n    if(btn === null) btn = this.chordFind( nobj )\n    if(btn === null) btn = this.scaleFind( nobj )\n    if(btn === null){\n      if(qry.mode === 'fretRoot')\n        btn = this.rootFind( nobj )  //only select the fret clicked\n      else\n      if(qry.mode === 'noteSelect')\n        btn = this.noteFind( nobj )  //select all frets with note = selNoteVal\n    }\n    if(btn === null) btn = this.octaveFind( nobj )\n    return btn\n  }\n\n  render(){\n    // console.log('fretPnl.render()', this.props)\n    this.keyii = 0    //should return stable keys for same props and state\n    let qry = this.props.qry\n\n    //make table's tr and td\n    let trArray = [],\n      fretMax = q.fretboard.fretMax,    \n      first = this.props.fretFirst,\n      // last = this.props.fretLast,\n      ss = ''\n    for (let row = 1; row <= 9; row++) {\n      let frets = []\n      let strN = row -1\n      let strgFltr = this.props.strgFiltered( strN )\n\n      for (let col = 0; col <= fretMax +1; col++) {\n        let \n          fretFltr = (qry.fretFilter.indexOf( col ) >= 0),\n          cls = '', \n          clickfunc = this.fretClick,\n          content = null\n\n        if(row === 1){  //top border, with fret numbers, fret filtering\n          let ss = (col === first || col === (fretMax +1) ?' ' :col)\n          let ssClassName = 'fretFilterDiv'\n          if( qry.collapsed === true){\n            ss = ''\n            if( [5,7,9,12].indexOf(col) >= 0 )\n              ssClassName = 'fretFilterCollapsed'\n          }\n          cls = (col === (fretMax +1) ?'borderRight tdBorder'+col :'tdBorder'+col)\n          clickfunc = this.fretFltrClick   \n          content = <div key={this.key()} data-fret={col} className={ssClassName} >{ss}</div>\n        }else\n        if(row === 9){  //bottom frame\n            cls = (col === (fretMax +1)\n              ? 'borderRight tdBottom col'+col    //right bottom corner frame\n              : 'tdBottom col'+col\n            )\n        }\n        else{   // generate frets with right and left borders\n          cls = (col === fretMax +1\n            ?'borderRight col'+col      // right border\n            :'fret fret'+col)\n\n          //process note button\n          let nobj = null\n          if( strN <= 6\n           && col >= this.props.fretFirst \n           && col <= this.props.fretLast){         //filter by fretboard range\n            nobj = q.notes.obj( strN, col )\n            nobj.fretFltr = fretFltr\n            nobj.strgFltr = strgFltr\n            content = this.buttonFind( nobj )\n          }\n        }\n        \n        frets.push(\n          <Fret key={this.key()}\n            fretFirst={this.props.fretFirst}\n            fretLast={this.props.fretLast}\n            fretFiltered={fretFltr} \n\n            strg={strN} \n            fret={col} \n\n            className={cls} \n            content={content}\n            onClick={clickfunc} \n            strgFltrClick={this.strgFltrClick} \n          />\n        )\n      }\n\n      if(row === 1) \n        ss = 'frame frameTop'\n      else\n      if(row === 8) \n        ss = 'borderBottom'\n      else\n      if(row === 9) \n        ss = 'frame frameBottom'\n      else{\n        ss = 'strg strg' +(row -1)\n      }\n      trArray.push( <tr key={row} className={ss} data-fltr={strgFltr}>{frets}</tr> )\n    }\n    return (\n      <div className='fretPnlContainer'>\n        <table className='fretPnl'><tbody>\n          {trArray}\n        </tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default FretPnl","/*\n  QueryBar.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by QueryPnl.jsx of GuitrJoe app\n\n*/\nimport React, {useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport { motion, useAnimation } from \"framer-motion\"\n\nimport './Fretboard.css'\nimport q from \"./guitar_lib.js\"\n\nvar last = {}    //store last query params to allow reset via label.click\nvar firstRender = true\n\nfunction QueryBar( props ){\n  // console.log('QueryBar.render()', props)\n\n  let {qry} = props\n  let htmlReturned = false    //prevent useEffect from running when no components returned\n\n  const aniControl = useAnimation()\n  const changeHandlerTag = 'QueryCtrlHandler'\n\n  function aniComplete( variantName ){\n    if(variantName === 'Close'){\n      props.stateChange( 'changeHandled', changeHandlerTag )\n    }\n  }\n  useEffect(() => {\n    if( htmlReturned === false ) return\n\n    if(props.setChangeHandler !== undefined){\n\n      props.setChangeHandler(\n        changeHandlerTag,\n        function( newqry, tag ){    // test function\n        \n          firstRender = ( qry.mode === 'fretSelect' && newqry.mode !== 'fretSelect' )\n        \n          if( newqry.mode === 'fretSelect' ){\n            return true\n          }\n          return false\n        },\n        function( newqry, tag ){   // exec function\n          // ??? does not write: console.log( 444 )\n          aniControl.start('Close')\n          // for testing, to cancel this activity:\n          //   props.stateChange( 'changeHandled', changeHandlerTag )\n          return true\n        } \n      )\n    }\n\n    let val = (props.qry.collapsed === true ?'Collapsed' :'Open')\n    aniControl.start( val )\n  \n  })\n\n  function selLabelClick( event ){     //toggle select values\n    let lbl = event.target,\n      val = lbl.dataset.selected\n    if(val === 'true'){   //toggle selection off\n      if(lbl.dataset.type === 'note'){\n        if(qry.mode === '') return\n        \n        last['mode'] = qry.mode\n\n        if(last.mode === 'AllNotes'){\n          last['root'] = 'All'\n          props.stateChange( 'selNoteVal', '' )\n        }else\n        if(last.mode === 'noteSelect'){\n          last['root'] = qry.root\n          props.stateChange( 'selNoteVal', '' )\n        }else\n        if(last.mode === 'fretRoot'){\n          last['root'] = qry.root\n          props.stateChange( 'fretRoot', null )\n        }\n      }else\n      if(lbl.dataset.type === 'octave'){\n        last['octave'] = qry.octave\n        props.stateChange( 'octave', 0 )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(qry.scale === null) return\n        last['scaleName'] = qry.scale.name\n        props.stateChange( 'scaleName', '' )\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(qry.chord === null) return\n        last['chordName'] = qry.chord.name\n        props.stateChange( 'chordName', '' )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        if(qry.ivl != null)\n          last['ivlName'] = qry.ivl.abr\n        props.stateChange( 'ivlName', '' )\n      }\n    }\n    else{   //toggle selection on\n      if(lbl.dataset.type === 'note'){\n        if( !last.mode ) return\n        if(last.mode === 'AllNotes')\n          props.stateChange( 'selNoteVal', 'All' )\n        else\n        if(last.mode === 'noteSelect'){\n          if(last['root'] !== null)\n            props.stateChange( 'selNoteVal', last['root'].note )\n        } else\n        if(last.mode === 'fretRoot'){\n          if(last['root'] !== null)\n            props.stateChange( 'fretRoot', last['root'] )\n        }\n      }else\n      if(lbl.dataset.type === 'octave'){\n        if(last.octave)\n          props.stateChange( 'octave', last.octave )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(last.scaleName){\n          props.stateChange( 'scaleName', last.scaleName )\n        }\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if( last.chordName ){\n          props.stateChange( 'chordName', last.chordName )\n        }\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        if(last.ivlName)\n          props.stateChange( 'ivlName', last.ivlName )\n      }\n    }\n  }\n  function selNoteChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    props.stateChange( 'selNoteVal', val )\n    //   this.props.dispatch({ type:\"FretboardActions/semisUpdate\", val })\n  }\n  function selOctaveChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    if(val === '')\n      props.stateChange( 'octave', 0 )\n    else\n      props.stateChange( 'octave', Number(val) )\n  }\n  function selScaleChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    props.stateChange( 'scaleName', val )\n  }\n  function selChordChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text.trim()\n    props.stateChange( 'chordName', val )\n  }\n  function selIntervalChange( event ){\n    let sel = event.target,\n      opt = sel.options[sel.selectedIndex],\n      abr = opt.dataset.abr\n    props.stateChange( 'ivlName', abr )\n  }\n  \n  // draw controls\n  function drawSelNote(){\n    let list = [<option key='' ></option>,<option key='999' >All</option>]\n    for(let ii=0; ii < q.notes.list.length; ii++){\n      let note = q.notes.list[ii]\n      list.push(<option key={ii} >{note}</option>)\n    }\n\n    let note = (qry.note === null ?'' :qry.note)\n    return (\n      <div className='dataPnl pnlNote' >\n        <label data-loaded={ qry.mode !== '' || last.root !== undefined } \n          data-selected={note !== ''} data-type='note' onClick={selLabelClick} >Note</label>\n        <select value={note} className='selNote' onChange={selNoteChange} >{list}</select>\n      </div>\n    )\n  }\n  function drawSelOctave(){\n    let oct = qry.octave,\n      omin = 0, omax = 0,\n      list = [<option key={999} ></option>]\n\n    omin = q.notes.obj(6, 0).octave\n    omax = q.notes.obj(1, q.fretboard.fretMax).octave\n\n    for(let ii = omax; ii >= omin; ii--){\n      list.push(<option key={ii} >{ii}</option>)\n    }\n    return (\n      <div className='dataPnl pnlOctave' >\n        <label data-loaded={ oct !== 0 || last.octave !== undefined } \n          data-selected={oct !== 0} data-type='octave' onClick={selLabelClick} >Octave</label>\n        <select value={oct} className='selOctave' onChange={selOctaveChange}>\n           {list}\n        </select>      \n      </div>\n    )\n  }\n  function drawSelScale(){\n    let selected = (qry.scale === null ?'' :qry.scale.name),\n      ii=0, list = [<option key='aaa'></option>]\n    for(let scale of q.scales.list){\n      list.push(<option key={++ii} >{scale.name}</option>)\n    }\n    return (\n      <div className='dataPnl pnlScale' >\n        <label data-loaded={ selected !== '' || last.scaleName !== undefined } \n          data-selected={selected !== ''} data-type='scale' onClick={selLabelClick} >Scale</label>\n        <select value={selected} className='selScale' onChange={selScaleChange} >\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  function drawSelChord(){\n    let ii = 0,\n      selected = (qry.chord === null ?'' :qry.chord.name), \n      datastate = '',\n      list = [<option key='aaa'></option>]\n    for(let chd of q.chords.list){\n      list.push(<option key={++ii} >{chd.name}</option>)\n    }\n    if(selected !== '') datastate = 'chord'\n    return (\n      <div className='dataPnl pnlChord' >\n        <label data-loaded={ selected !== '' || last.chordName !== undefined } \n          data-selected={selected !== ''} data-type='chord' onClick={selLabelClick} >Chord</label>\n        <select value={selected} className='selChord' onChange={selChordChange} \n         data-state={datastate}>\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  function drawSelInterval(){\n    let list = [<option key='aaa' data-abr='' ></option>],\n      ii = 0, selected = '' , datastate = ''\n    for(let ivl of q.intervals.list){\n      if(ivl.semis === 0) continue\n      if(ivl.semis === 12) continue\n      // if(ivl.abr === last) continue  should be unique\n      let html = `${ivl.name} (${ivl.abr}, ${ivl.semis})`\n      list.push(<option key={++ii} data-abr={ivl.abr} >{html}</option>)\n      if(qry.ivl !== null && selected === '' && qry.ivl.abr === ivl.abr)\n        selected = html\n      // last = ivl.abr\n    }\n    if(selected !== '') datastate = 'interval'\n    return (\n      <div className='dataPnl pnlInterval' >\n        <label data-loaded={ selected !== '' || last.ivlName !== undefined } \n          data-selected={selected !== ''} data-type='ivlName' onClick={selLabelClick} >Interval</label>\n        <select value={selected} className='selInterval' title='Intervals sorted by semis-tones'\n          data-state={datastate} onChange={selIntervalChange} \n        >\n          {list}\n        </select>      \n      </div>\n    )\n  }  \n\n\n  if(qry.mode === 'fretSelect') return null\n  htmlReturned = true\n\n  let initial = (firstRender === true ?'Close' :'Open')\n  if( qry.collapsed === true ) initial = 'Collapsed'\n\n  return (\n    <motion.div className='queryBar' data-mode={qry.mode} \n      initial={initial}\n      animate={aniControl}\n      variants={{\n        Close: { height: '0px', opacity:0 },\n        Collapsed: { height:'0px', opacity:0 },\n        Open: { height:'auto', opacity:1 },\n      }}\n      transition={{ease:\"easeOut\", duration:0.3 }}\n      // transitionEnd:{}\n      onAnimationComplete={aniComplete}\n    >\n      {drawSelNote()}\n      {drawSelOctave()}\n      {drawSelScale()}\n      {drawSelChord()}\n      {drawSelInterval()}\n    </motion.div>\n  )\n\n}\n\nQueryBar.propTypes = {\n  qry: PropTypes.object,\n  stateChange: PropTypes.func,\n  setChangeHandler: PropTypes.func,\n}\n\nexport default QueryBar","/*\n  ArrowButton.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - an arrow in a button frame pointing up or down used to expand/collapse controls\n  - used by to expand and collpase controls in GuitrJoe app and ArrowPnl.jsx\n*/\nimport React  from 'react';\nimport PropTypes from 'prop-types';\nimport { motion } from \"framer-motion\"\nimport './ArrowButton.css';\n\nfunction ArrowButton( props ){\n\n  //handle initial state\n  let uord =  (props.upOrDn === '' ?'dn' :props.upOrDn.toLowerCase())\n  // console.log('ArrowButton function call', uord, props)\n\n  function onClick(){\n    let newud = (uord === 'up' ?'dn' :'up')\n    // console.log('ArrowButton.onClick', newud )\n    if(props.onChange !== null)\n      props.onChange( newud )\n  }\n\n  let className = 'ArrowBtn ' +(uord === 'up' ?'ArrowBtnUp' :'ArrowBtnDn')\n  \n  let width = (props.width === '' ? '1em' :props.width)\n  let dstyle = { height:width, width:width}\n  let astyle = { fontSize:'calc( '+width+' * 0.8 )' }\n\n  return (\n    <div className={className} style={dstyle} onClick={onClick} title={props.title} \n    > \n      <motion.div style={astyle} \n        animate={uord}\n        variants={{\n          up: { transform:'rotateZ(-90deg)', left:'-1px' },\n          dn: { transform:'rotateZ(90deg)',  left:'1px' },\n        }}\n        transition={{ ease:\"easeOut\", duration:0.4 }}\n      >\n      &#10148;\n      </motion.div>\n    </div>\n  )  \n\n}\n\nArrowButton.propTypes = {\n  ArrowUpOrDn: PropTypes.string,\n  title: PropTypes.string,\n  width: PropTypes.string,\n  onChange: PropTypes.func,\n}\nArrowButton.defaultProps = {\n  upOrDn: 'up',     //up or dn\n  title: 'Click to collapse',\n  onChange: null,\n  width:'1em',\n}\n\nexport default ArrowButton\n\n","/*\n  ArrowPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by InfoPnl.jsx of GuitrJoe app\n\n*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { motion } from \"framer-motion\"\n\nimport ArrowButton from './ArrowButton'\nimport   './ArrowPnl.css'\n\nfunction ArrowPnl( props ){\n\n  let keyidx = 0\n  function key(){ return 'ArrowPanel' +( ++keyidx ) }\n  function onAniComplete( variantName ){\n    if( props.onAniComplete )\n      props.onAniComplete( props.arrowTitle, variantName )\n  }\n  function onChange( newud ){\n    let val = (newud === 'up' ?'Show' :'Collapse')\n    if( props.onChange )\n      props.onChange( val )\n  }\n  \n  return (\n    <motion.div key={key()} className='ArrowPnl' \n      initial={props.openState}\n      animate={(props.aniControl !== null ?props.aniControl :props.openState)}\n      inherit={false}   // add to ArrowBtn\n      variants={{\n        Show: { height: 'auto', opacity:1 },\n        Collapse: { height: '1.1em', opacity:1 },\n        Close: { height: '0px', opacity:0  },\n      }}\n      transition={{ ease:\"easeOut\", duration:0.3 }}\n      onAnimationComplete={onAniComplete}\n    >\n      <div key={key()} className='ArrowPnlCaption' >\n        <ArrowButton key={key()} \n          upOrDn={props.openState === 'Show' ?'up' :'dn'} \n          width={props.arrowWidth}\n          title={props.arrowTitle} \n          onChange={onChange}\n        />\n        {props.caption}\n      </div>\n      <div \n        key={key()} \n        className='ArrowPnlItems' \n      >\n        {props.items}\n      </div>\n    </motion.div>\n  )\n}\n\nArrowPnl.propTypes = {\n  caption: PropTypes.array,   //array of jsx\n  items: PropTypes.array,     //array of jsx\n\n  arrowTitle: PropTypes.string,\n  arrowWidth: PropTypes.string,\n\n  openState: PropTypes.string,    //Show, Collapse, Close\n  onChange: PropTypes.func,       // notify parent on open/collapse change\n\n  aniControl: PropTypes.object,   // motion.useAnimation from parent\n  onAniComplete: PropTypes.func,  // call parent: onAniComplete( props.arrowTitle )\n}\nArrowPnl.defaultProps = {\n  caption: [<span>'ArrowPnl Caption'</span>],\n  items: null,\n\n  arrowTitle:'',\n  arrowWidth:'1em',\n\n  aniControl:   null,\n  onAniComplete:null,\n  onChange:     null,\n  openState:    'Show',\n}\n\nexport default ArrowPnl\n","/*\n  InfoPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by QueryPnl.jsx of GuitrJoe app\n\n*/\nimport React, {useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport { motion, useAnimation } from \"framer-motion\"\n\nimport './InfoPnl.scss'\nimport ArrowPnl from './controls/ArrowPnl'\nimport q from \"./guitar_lib.js\"\n\nlet scaleFirstRender = false\nlet chordFirstRender = false\n\nfunction InfoPnl( props ){\n  // console.log('InfoPnl.render()', props)\n\n  let {qry} = props\n  let htmlReturned = false    //prevent useEffect when no components returned\n  \n  const thisAniControl = useAnimation()\n  const scaleAniControl = useAnimation()\n  const chordAniControl = useAnimation()\n\n  const changeHandlerTag = 'InfoPnlHandler'\n  const scaleHandlerTag = 'scaleHandler'\n  const chordHandlerTag = 'chordHandler'\n\n  useEffect(() => {     //changeHandler and aniControl.start code here\n    if(htmlReturned === false) return\n\n    if(props.setChangeHandler !== undefined){\n      props.setChangeHandler(\n        changeHandlerTag,\n        changeHandlerTest,\n        function( newqry, tag ){   // exec function\n          thisAniControl.start('Close')\n          // for testing, to cancel this activity:\n          //   props.stateChange( 'changeHandled', changeHandlerTag )\n        } \n      )\n      props.setChangeHandler(\n        scaleHandlerTag,\n        changeHandlerTest,\n        function( newqry, tag ){   // exec function\n          scaleAniControl.start('Close')\n        } \n      )    \n      props.setChangeHandler(\n        chordHandlerTag,\n        changeHandlerTest,\n        function( newqry, tag ){   // exec function\n          chordAniControl.start('Close')\n        } \n      )    \n    }\n\n    thisAniControl.start('Open')\n    if(qry.scale !== null){\n      scaleAniControl.start( qry.scaleTriadDisplay )\n    }\n    if(qry.chord !== null){\n      chordAniControl.start( qry.chordInvrDisplay )\n    }\n  })\n  function aniComplete( arrowTitle, variantName ){\n\n    if(arrowTitle === 'Close'){\n\n      props.stateChange( 'changeHandled', changeHandlerTag )\n\n    } else\n    if(arrowTitle.indexOf( 'scale') >= 0){\n\n      if( variantName === 'Close' ){\n        props.stateChange( 'changeHandled', scaleHandlerTag )\n      }\n\n    }else\n    if(arrowTitle.indexOf( 'chord') >= 0){\n\n      if( variantName === 'Close' ){\n        props.stateChange( 'changeHandled', chordHandlerTag )\n      }\n  \n    }\n  }\n  function changeHandlerTest( newqry, tag ){\n    if( tag === changeHandlerTag ){\n\n      if(qry.mode === 'fretSelect' && newqry.mode !== 'fretSelect')\n        return true\n      if(newqry.mode === 'AllNotes' && (qry.scale !== null || qry.chord !== null))\n        return true\n  \n    } else\n    if( tag === scaleHandlerTag ){\n\n      scaleFirstRender = (qry.scale === null)\n      if(qry.scale !== null && newqry.scale === null)\n        return true\n\n    } else\n    if( tag === chordHandlerTag ){\n\n      chordFirstRender = (qry.chord === null)\n      if(qry.chord !== null && newqry.chord === null)\n        return true\n\n    }\n    return false\n  }\n\n\n  function chordShapeClick(event){\n    event.stopPropagation()\n    let btn = event.target   \n    props.stateChange( 'chordShape', btn.dataset.shape )\n  }\n  function fsChordClick( event ){\n    let btn = event.target\n    // console.log('fsChordClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      props.stateChange( 'fretSelectMatch', null )\n      props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)    //turn off selected match\n        props.stateChange( 'fretSelectMatch', null )\n      else\n        props.stateChange( 'fretSelectMatch', {type:'chord', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  function fsScaleClick( event ){\n    let btn = event.target\n    // console.log('fsScaleClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null \n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)\n        props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      else\n        props.stateChange( 'fretSelectMatch', {type:'scale', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  function infoItemClick(event){\n    event.stopPropagation()\n\n    let btn = event.target   \n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      props.stateChange( 'fretSelectMatch', null )\n      props.stateChange( 'chordInvrSelected', null )\n      props.stateChange( 'noteFilter', 'clear' )\n      props.stateChange( 'scaleTriadSelected', null )\n      props.stateChange( 'chordShape', null )\n    }\n    else {   //default noteFilter: highlight all NoteButtons with selected note\n      if(btn.className !== 'ivl')\n        btn = btn.parentNode\n      \n      let note = btn.dataset.note     \n      if(typeof note === 'string')\n        props.stateChange( 'noteFilter', note )\n    }\n  }\n  function invrLabelClick(event){\n    event.stopPropagation()\n    let btn = event.target   \n    props.stateChange( 'chordInvrSelected', btn.dataset.invr )\n  }\n  function triadLabelClick(event){\n    event.stopPropagation()\n    let btn = event.target   \n    props.stateChange( 'scaleTriadSelected', btn.dataset.scaletriad )\n  }\n  \n  function toggleFretSelectMatchDisplay(){\n    let ss = (qry.fretSelectMatchDisplay === 'Show' ?'Collapse' :'Show')\n    props.stateChange( 'fretSelectMatchDisplay', ss)\n  }\n  function toggleScaleTriadDisplay(){\n    let ss = (qry.scaleTriadDisplay === 'Show' ?'Collapse' :'Show')\n    props.stateChange( 'scaleTriadDisplay', ss)\n  }\n  function toggleChordInvrDisplay(){\n    let ss = (qry.chordInvrDisplay === 'Show' ?'Collapse' :'Show')\n    props.stateChange( 'chordInvrDisplay', ss)\n  }\n  \n  function drawFretSelectMatches( html, key ){    //push matching chords and scales onto html[]\n    let selected = 0\n    \n    if(qry.fretSelect.length < 2) return null  \n\n    let noblist = qry.fretSelect.slice()\n    let last = null\n    noblist = noblist.filter(function(a){   //filter duplicate notes\n      if(last != null && last.notes.indexOf( a.note ) >= 0) return null\n      last = a\n      return a\n    })\n\n    //test chords for matching notes\n    let list = []\n    let lastkey = key\n    let lastname = null\n    last = null\n    for(let chord of q.chords.list){    \n\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        let ivls = q.chords.obj( iobj.note, chord.name).ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true)\n         list.push( {note:iobj.note, chord:chord} )\n      }\n    }\n    for(let ob of list){    //write matching chords\n      let chord = ob.chord\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={fsChordClick}\n        >Matching chords:&nbsp;</span> )\n      }\n\n      selected = 0\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === chord.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== chord.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = chord.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={fsChordClick} title={ob.note +' ' +chord.name}\n        data-note={ob.note} data-abr={chord.abr} data-selected={selected} \n        >&#8200;{ob.note}&#8239;{chord.abr}&#8200;</span> \n      )\n    }\n\n    //test scales for matching notes\n    list = []\n    lastkey = key\n    lastname = null\n    last = null\n    for(let scale of q.scales.list){   //==> disabled because most scales are not necessary for this use\n    //for(let scaleName of ['Major','Minor','Pen.Maj','Pen.min','Blues7','Blues6' /*,'Dbl.Hrm'*/]){\n\n      //can optimize by caching related minor scales when major found: \n      //  Major:Nat.min; Pent Maj:Pen.min,Blues7,Blues6; Dbl.Hrm:Gypsy\n\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        let ivls = q.scales.obj( iobj.note, scale.name).ivls    \n        // let scale = q.scales.obj( iobj.note, scaleName )\n        // let ivls = scale.ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true) \n         list.push( {note:iobj.note, scale:scale} )\n      }\n    }\n\n    for(let ob of list){    //write matching scales\n      selected = 0\n      let scale = ob.scale\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={fsScaleClick}\n        >Matching scales:&nbsp;</span> )\n      }\n\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === scale.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== scale.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = scale.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={fsScaleClick} title={ob.note +' ' +scale.name}\n        data-note={ob.note} data-abr={scale.abr} data-selected={selected} \n        > &#8200;{ob.note}&#8239;{scale.short}&#8200;</span> \n      )\n    }\n\n    return key\n  }\n\n\n  let selected = 0, html = [], key=0 //, lastkey=null\n  let  //for ArrowPnl\n    arrowTitle, arrowFunc, openState, aniControl,\n    htmlCaption = [], htmlItems = []    \n\n  if(qry.mode === 'AllNotes'){\n    let octave = (qry.octave === 0 ?null :<span key={++key} className='ivl'>{': Octave '}{qry.octave} </span>)\n    html.push( <div key={++key} className='ArrowPnl' >\n      <span key={++key} className='propName'\n       data-selected='label' onClick={infoItemClick}\n      >{'All Notes'}</span> \n      {octave}\n    </div>)\n\n  } else\n  if(qry.mode === 'fretSelect'){    \n      htmlCaption = []\n      htmlItems = []\n\n      htmlCaption.push( <span key={++key} className='propName' onClick={infoItemClick} data-selected='label'>{\n          'Fret select: '\n        }</span> \n      )\n\n      let last = null\n      qry.fretSelect.forEach( nobj => {\n        if(last && last.note === nobj.note) return\n\n        if(qry.noteFilter.indexOf( nobj.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n        \n        htmlCaption.push( \n          <span key={++key} className='ivl' onClick={infoItemClick} data-note={nobj.note} data-selected={selected} >\n             &nbsp;{nobj.note} <sub>{nobj.ivl.abr}</sub> \n          </span> \n        )\n        last = nobj\n      })\n\n      if(qry.fretSelectMatch === null){    //no selected chord or scale to draw\n          htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          htmlItems.push( <span key={++key} className='propName'\n           data-selected='label' onClick={infoItemClick}\n          > &nbsp;</span> )\n      }\n      else{    //draw user select chord or scale match\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        htmlItems.push( \n          <span key={++key} className='propName' onClick={infoItemClick} data-selected='label' >\n            Selected, {qry.fretSelectMatch.obj.fullName}:&nbsp;\n          </span> \n        )\n\n        for(let ivl of qry.fretSelectMatch.obj.ivls){   \n          if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n\n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={infoItemClick} data-note={ivl.note} data-selected={selected} >\n              &nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n            </span> \n          )\n        }\n\n      }\n      key = drawFretSelectMatches( htmlItems, key )\n\n      arrowTitle = 'Show/hide matching chords and scales'\n      arrowFunc = toggleFretSelectMatchDisplay\n      openState = qry.fretSelectMatchDisplay\n\n      html.push(<ArrowPnl \n        key={++key} \n        caption={htmlCaption}\n        items={htmlItems}\n        arrowWidth='1em' \n        arrowTitle={arrowTitle} \n        onChange={arrowFunc}\n        openState={openState} \n      />)\n  }\n  else{   //draw scale, chord and interval labels and notes\n    //lastkey = key\n    if(qry.scale !== null){\n      htmlCaption = []\n      htmlItems = []\n\n      htmlCaption.push( \n        <span key={++key} className='propName' onClick={infoItemClick} data-selected='label' >\n          {qry.root.note +' ' +qry.scale.name +': '}\n        </span> \n      )\n      qry.scale.ivls.forEach( ivl => {\n        if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n        \n        htmlCaption.push(\n          <span key={++key} className='ivl' onClick={infoItemClick} \n            data-note={ivl.note} data-selected={selected}\n          >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n          </span> \n        )\n      })\n\n      if( qry.scaleTriads !== null ){   // draw scale degree triads\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        htmlItems.push( \n          <span key={++key} className='propName' onClick={infoItemClick} data-selected='label' >{ \n            qry.root.note +' ' +qry.scale.abr +' Scale Degree Triads:'\n          }</span> \n        )\n\n        qry.scaleTriads.list.forEach( triad => {\n          htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          \n          if( qry.scaleTriadSelected === triad.num ) selected = 'triad'\n          else selected = 0\n          let ss = (triad.abr !== null ?triad.abr :'')\n          \n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={triadLabelClick}\n             data-scaletriad={triad.num} data-selected={selected} >{\n              triad.degree +'. ' + triad.root +ss +': '\n            }</span> \n          )\n\n          triad.ivls.forEach( ivl => {\n            if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n            else selected = 0\n\n            htmlItems.push( \n              <span key={++key} className='ivl' onClick={infoItemClick}\n               data-note={ivl.note} data-selected={selected}\n              >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n              </span>\n            )\n          })\n        })\n      }\n\n      arrowTitle = 'Show/hide scale degree triads'\n      arrowFunc = toggleScaleTriadDisplay\n      aniControl = scaleAniControl\n      openState = (scaleFirstRender ?'Close' :qry.scaleTriadDisplay)\n\n      html.push(<ArrowPnl \n        key={++key} \n        caption={htmlCaption}\n        items={htmlItems}\n        arrowWidth='1em' \n        arrowTitle={arrowTitle} \n        aniControl={aniControl}\n        onAniComplete={aniComplete}\n        onChange={arrowFunc}\n        openState={openState} \n      />)\n    }\n    if(qry.chord !== null){\n      htmlCaption = []\n      htmlItems = []\n\n      htmlCaption.push(     //chord caption\n        <span key={++key} className='propName' onClick={infoItemClick} data-selected='label'>\n          {qry.root.note \n            +' ' +qry.chord.name +': '}\n        </span> \n      )\n\n      qry.chord.ivls.forEach( ivl => {    //chord intervals\n        if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n\n        htmlCaption.push( \n          <span key={++key} className='ivl' onClick={infoItemClick} \n            data-note={ivl.note} data-selected={selected}\n          >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n          </span> \n        )\n      })\n\n      \n      if(['maj','min','7'].indexOf(qry.chord.abr) >= 0 ){ //draw chord shapes\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        htmlItems.push(\n          <span key={++key} className='propName' onClick={infoItemClick} data-selected='label'>\n            Bar Chord Shapes:&nbsp;\n          </span> \n        )\n        let list = q.chords.shapesByChord( qry.chord.abr )\n        for( let shape of list ){\n          if(qry.chordShape === shape.abr) selected = 'chordShape'\n          else selected = 0\n\n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={chordShapeClick} \n              data-shape={shape.abr} data-selected={selected} title={shape.name +' shape'}>\n              &nbsp;{shape.abr}&nbsp; \n            </span> \n          )\n        }\n      }\n\n      if( qry.inversions !== null ){    //draw inversions\n        let invrs = qry.inversions\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n\n        htmlItems.push( \n          <span key={++key} className='propName' onClick={infoItemClick}\n            data-selected='label'>{\n            invrs.root \n            +(qry.mode === 'fretRoot' ?qry.root.octave +' ' :'')\n            +qry.chord.abr +' Inversions:'\n           }</span> \n         )\n\n        for(let pos in invrs.positions){\n          let pobj = invrs.positions[ pos ]\n          selected = (qry.chordInvrSelected === pos ?'invr' :'')\n          htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={invrLabelClick}\n             data-selected={selected} data-invr={pos}>{\n              pos +' Position: '\n            }</span> \n          )\n          for(let num in pobj){\n            let iobj = pobj[num]\n            let octave = ([0,1].indexOf(iobj.octave) >= 0 ?'' :iobj.octave)\n            if(qry.noteFilter.indexOf( iobj.note ) >= 0) selected = 'noteFilter'\n            else selected = 0\n\n            htmlItems.push( \n              <span key={++key} className='ivl' onClick={infoItemClick}\n               data-note={iobj.note} data-selected={selected}\n              >&nbsp;{iobj.note +octave} <sub>{iobj.abr}</sub> \n              </span>\n            )\n          }\n        }\n\n        htmlItems.push( \n          <span key={++key} className='propName'  data-selected='note'>\n            Note: some inversions can not be displayed, see \"About\" for details.\n          </span>\n         )\n        \n      }\n\n      arrowTitle = 'Show/hide chord inversions'\n      arrowFunc = toggleChordInvrDisplay\n      aniControl = chordAniControl\n      openState = (chordFirstRender ?'Close' :qry.chordInvrDisplay)\n\n      html.push(<ArrowPnl \n        key={++key} \n        caption={htmlCaption}\n        items={htmlItems}\n        arrowWidth='1em' \n        arrowTitle={arrowTitle} \n        aniControl={aniControl}\n        onAniComplete={aniComplete}\n        onChange={arrowFunc}\n        openState={openState} \n      />)\n    }\n    if(qry.ivl !== null){\n      if(qry.noteFilter.indexOf( qry.ivl.note ) >= 0) selected = 'noteFilter'\n      else selected = 0\n      \n      html.push( <div key={++key} className='ArrowPnl' >\n        <span key={++key} className='propName' onClick={infoItemClick} data-selected='label' \n        >{qry.note \n          +(qry.mode === 'fretRoot' ?qry.root.octave :'')\n          +' + ' +qry.ivl.name +' interval:'\n        }</span>\n        <span key={++key} className='ivl' onClick={infoItemClick} data-note={qry.ivl.note} data-selected={selected}>\n          &nbsp;{qry.ivl.note}&nbsp;<sub>{qry.ivl.abr}</sub>\n        </span> \n      </div> )\n    }\n  }\n  \n  if(html.length === 0){\n    return null\n  } \n  htmlReturned = true\n\n  return (\n    <motion.div className='infoPnl'\n      initial={(qry.mode === 'fretSelect' ?'Close' :'Open')}\n      animate={thisAniControl}\n      variants={{\n        Open: { height: 'auto', opacity:1 },\n        Close: { height: '0px', opacity:0 },\n      }}\n      transition={{ ease:\"easeOut\", duration:0.3 }}\n      onAnimationComplete={aniComplete}\n    >\n      {html}\n    </motion.div>\n  )      \n}\n\nInfoPnl.propTypes = {\n  qry: PropTypes.object,\n  stateChange: PropTypes.func,\n  setChangeHandler: PropTypes.func,\n}\n\nexport default InfoPnl","/*\n  HelpData.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - data for HelpManager.jsx\n\n*/\n\nvar helpData = {}\nexport default helpData\n\nhelpData.default = 'QuickTips'\nhelpData.Modes = {\n  title:'Modes',\n  link:`QuickTips`\n}\nhelpData.QuickTips = {\n  title:'Quick Tips',\n  related:['Fretboard', 'QueryPanel', 'InfoPanel', 'Scales','Chords','Intervals'],\n  content:`\nGuitarJoe works in four modes that are automatically activated:\n\\n\n**AllNotes Mode** - Display all notes on fretboard\\n\n- From the Note list, select 'All' - the Fretboard is populated with NoteButtons.\n- Click the button's left caption to give it a green background.\n- Click the button's right caption to cycle between Staff and Tab data.\n- Use the Octave list to display notes in a selected Octave.\n\\n\n**NoteSelect Mode** - Display a Root note across the fretboard\\n\n- From the Note list, select any note - All Root NoteButtons are displayed.\n- Selected scales, chords, and intervals will use this Root.\n\\n\n**FretRoot Mode** - Focus on notes in part of the fretboard\\n\n- Click a note on the fretboard - this is the Root note.\n- Selected octaves, scales, and chords will be within 3 frets of the Root.\n\\n\n**FretSelect Mode** - Find matching chords and scales\\n\n- Click multiple notes on the fretboard - related chords and scales will be \ndisplayed within the InfoPanel.\\n\n\\n \nSee \"About\" for application and GitHub code repository details.  \n\n  `,\n}\nhelpData.Fretboard = {\n  title:'Fretboard',\n  related:['QueryPanel', 'InfoPanel', 'Modes'],\n  content:`\nThe Fretboard contains 14 frets, allowing for 15 notes per string (including nut).\nIt has many clickable features:\\n\n### Notes \n- Click on any note to place a NoteButton -   \nIf it is the only button, click again to remove it.  \nIf more than one, they will have left and right captions.  \n- Click the left caption to highlight the button in green.  \nIn FretSelect mode, this will remove the button from the Fretboard.  \n- Click the right caption to cycle through combinations of note, interval, staff and tab data.  \nIn AllNotes mode, the caption cycles between staff and tab data.   \n\\n\n### Fret Numbers\n- Fret numbers are located above the FretBoard.\nIf the FretBoard is collapsed the buttons are removed, and green lines placed\nabove frets 5, 7, 9, and 12.\n- Click a Fret Number to disable a fret and hide any NoteButtons on the fret.\nThe fret is grayed and it's notes are not clickable.\n- When clicked again, existing NoteButtons will be replaced.\n- If the FretBoard is collapsed the space remains clickable.\n\\n\n### String Filter Buttons\n- The String Filter Buttons are green rectangles on it's left edge.\n- Click to disable the string and NoteButtons on the string. \n- Click again to undo.\n\\n\n  `\n}\nhelpData.QueryPanel = {\n  title:'QueryPanel',\n  related:['Fretboard', 'InfoPanel', 'Modes'],\n  content:`\nThe QueryPanel is found below the Fretboard.\nUse it to tell GuitarJoe what work you want to do. \nFeatures:\\n\n\n**Collapse Button**\\n\n- This is the arrow button on the far left.  Click to compact/expand the information displayed.\n\\n\n**List Captions**\\n\n- This is the text above the lists: Note, Octave, etc.\n- Clicking a caption will toggle the last selected value on and off.  \n- You can also turn off a selection by selecting the blank list item.\n\\n\n**Note List**\\n\n- Select a Root note to work with. \nSelected Octaves, Scales, Chords, and Intervals will use this as their root.\n- Select \"All\" to display all NoteButtons on the Fretboard.\n- When \"All\" is selected, only the Octave list will be active.\n\\n\n**Octave List**\\n\n- When selected, only NoteButtons within the selected Octave are displayed.\n- This will hide all NoteButtons not within the selected Octave.\n\\n\n**Scale List**\\n\n- Select from a variety of Scales. \n- The NoteButtons displayed are determined by the Mode (FretRoot or NoteSelect).\n- The [InfoPanel](#InfoPanel/scales) displays technical details for the Scale.\n\\n\n**Chord List**\\n\n- Select from a variety of Chords. \n- The NoteButtons displayed are determined by the Mode (FretRoot or NoteSelect).\n- The [InfoPanel](#InfoPanel/chords) displays technical details for the Chord.\n\\n\n**Interval List**\\n\n- Display NoteButtons the selected interval from the Root note.\n\\n\n**Reset Button**\\n\n- Remove all changes to the Fretboard.\n\\n\n**Help Button**\\n\n- Click to toggle this HelpPanel.\n\\n\n**Duplicate Button**\\n\n- Click to create a duplicate of the Fretboard.  Any number of Fretboards may be created.\n\\n\n**Delete Button**\\n\n- Click to delete the Fretboard. Currently, the first Fretboard may not be deleted.\n\\n\n  `\n}\nhelpData.InfoPanel = {\n  title:'InfoPanel',\n  related:['Fretboard', 'QueryPanel', 'Modes'],\n  content:`\nThe InfoPanel provides extra information about data displayed by GuitarJoe.\nIt is found below the QueryPanel.\nData within the InfoPanel may by copied and pasted to other applications using \nthe browser's clipboard functions.\nFeatures:\\n\n**Captions**\\n\n- Captions are bold, white text.  Clicking any caption will disable all active InfoPanel features.\n- You can also turn off a feature by clicking the item that turned it on.\n\\n\n**FretSelect Mode**\\n\n- Clicking multiple notes automatically starts this mode.\n- Names of Scales and Chords containing all notes clicked are shown.\n- Clicking a name will display it's NoteButtons across the Fretboard.\n- To dig deeper into a scale or chord, duplicate the Fretboard, then Reset \nand configure the new QueryPanel as needed.\n\\n\n<h3 id=\"scales\">Scale Info (for NoteSelect and FretRoot modes)</h3>\\n\n- The scale name is displayed with notes and intervals of the scale.\n- Scale degree triads with their notes and intervals are also displayed.\n- Clicking a note will highlight it's NoteButtons on the Fretboard \nand the InfoPanel.\n- Clicking a triad's name will highlight it's NoteButtons on the Fretboard.\n\\n\n<h3 id=\"chords\">Chord Info  (for NoteSelect and FretRoot modes)</h3>\\n\n- The chord name is displayed with notes and intervals of the chord.\n- For Major, Minor, and Dominant Seventh chords, bar chord shapes are displayed.\nThis is similar to, but not, the CAGED system.\n- Chord inversions are displayed for all chords.\n- Clicking a note will highlight it's NoteButtons on the Fretboard and the InfoPanel.\n- Clicking the name of a Chord Shape or Inversion will highlight it's NoteButtons.\n\\n\n**Interval Info**\\n\n- The Interval name and it's note and interval are displayed.\n- Clicking a note will highlight it's NoteButtons on the Fretboard and the InfoPanel.\n`\n}","/*\n  HelpMnager.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - control to display help in GuitarJoe\n  - see HelpData.js for data structure consumed\n\n  Data structure:\n    helpData = {\n      default: topic2,    //required, default topic displayed on startup\n      topic1: {           // a link record\n        title: string,\n        link: topic2,     //display content for this topic\n      },\n      topic2: {           //a standard help record, at least one required\n        title: string,\n        related: array,   //related topics, displayed at bottom of window\n        content: Markdown text    //help info\n      }\n    }\n\n  To link from one help topic to another:\n    1. insert a markup link: [Jump to topic2](#topic2)\n      - HelpManager will intercept the click and process the request\n\n  To link from one help topic to a heading in another topic:\n    1. in the destination topic create a heading and note the id generated\n      create markup: ## Subtopic II\n      translated html: <h3 id=\"subtopic-ii\">Subtopic</h3>\n    2. insert a markup link: [Jump to topic2 heading](#topic2/subtopic-ii)\n      - HelpManager will intercept the click and process the request\n\n  Resolve: to trigger the close animation:\n  - could not get framer-motion to work: AnimatePresence/motion.exit={\"close\"}\n  - instead use toggle switch in parent: isOpen = QueryPnl.helpManagerOpen\n\n    ToDo:\n    - change contentClick to mouseDown event to prevent anchor from firing (if possible)\n*/\n\nimport React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types';\nimport Markdown from 'markdown-to-jsx'\nimport { motion } from \"framer-motion\"\n\nimport './HelpManager.sass'\nimport helpData from './HelpData.js'\n\n\nfunction HelpManager( props ) {\n  let {fbid, stateChange} = props\n  const [isOpen, setIsOpen] = useState( true )  //false = rollup, then remove component\n  const [topicClicked, setTopicChanged] = useState( false ) //true = new topic to display, do not rollup \n  const [subtopic, setSubtopic] = useState( null )\n  const [crumbs, setCrumbs] = useState( ['Help'] )\n\n  if(props.isOpen === false && isOpen === true){\n    setIsOpen( false )    //close request from QueryPanel\n  }\n\n  useEffect(() => {    \n    if(subtopic !== null){\n      let el = document.querySelector('#'+subtopic)\n      if(el) el.scrollIntoView()\n    }\n  })\n\n  function btnCloseClick(){\n    setIsOpen( false )\n  }\n  function contentClick( event ){\n    let ctrl = event.target \n    if( ctrl.nodeName === 'A' && ctrl.hash !== ''){\n      let topic = ctrl.hash.substr(1)\n      let subtopic = null\n      let idx = topic.indexOf('/')\n      if(idx >= 0){\n        subtopic = topic.substr(idx +1)\n        topic = topic.substr(0, idx)\n      }\n      // console.log('contentClick\\n', topic, subtopic, '\\n', ctrl.hash, event.target, event)\n      topicSelect( topic, subtopic )\n      event.preventDefault()\n      return\n     }\n  }\n  function topicClick( event ){\n    let btn = event.target,\n      topic = btn.dataset.topic\n    topicSelect( topic )\n  }\n  function topicSelect( topic, subtopic = null ){\n    let list = crumbs.slice(),\n      idx = list.indexOf( topic )\n    if( idx >= 0)\n      list = crumbs.slice( 0, idx +1 )\n    else\n      list.push( topic )\n      \n    setTopicChanged( true )\n    setSubtopic( subtopic )\n    setCrumbs( list )\n  }\n  function onAniComplete(){\n    if(isOpen === false)  //remove self from screen\n      stateChange( 'helpManager', false )\n  }\n\n  let keyii = 0\n  function key(){ return 'HMgr' +(++keyii) }\n\n  \n  let menu = []\n  crumbs.forEach( topic => {\n    let title = (topic === 'Help'\n      ? 'Help'\n      : helpData[topic].title\n    )\n    menu.push( \n      <span key={key()} onClick={topicClick} data-topic={topic}>{title}</span> \n    )\n  })\n  \n  let topic = crumbs[ crumbs.length -1 ]\n  if( topic === 'Help' ){\n    if( !helpData.default)\n      return null\n    topic = helpData.default\n  }\n\n  let itm = helpData[ topic ]\n  let title = itm.title\n\n  if(itm.link !== undefined){    //handle link records\n    let tmp = helpData[ itm.link ]\n    title = tmp.title +' (' +title +')'\n    itm = tmp\n  }\n\n  let related = itm.related.map( topic => {\n    if( helpData[ topic ] === undefined)\n      return null\n    let title = helpData[ topic ].title\n    return (\n      <span key={key()} onClick={topicClick} data-topic={topic}>{title}</span>\n    )\n  })\n  if(related.length > 0){\n    related.unshift(<div key={key()} className='caption'>Related Topics</div>)\n  }\n\n  return(\n    <motion.div key={key()} id={'helpManager'+fbid} className='helpManagerFrame' \n      onClick={contentClick}\n      initial={topicClicked ?'open' :'closed'}\n      animate={isOpen ?'open' :'closed'}\n      variants={{\n        open: { height:'auto', opacity:1 },\n        closed: { height:'0px', opacity:0 },\n      }}\n      transition={{ ease:'easeOut', duration:0.3 }}\n      onAnimationComplete={onAniComplete}\n    >\n      <div className='menuFrame'>\n        {menu}\n        <div className='btnClose' onClick={btnCloseClick} title='Close Help' >\n            Close\n        </div>\n      </div>\n      <div className='titleFrame'>{title}</div>\n      <Markdown className='contentFrame' children={itm.content} />\n      <div className='relatedFrame'>{related}</div>\n    </motion.div>\n  )\n\n}\n\nHelpManager.propTypes = {\n  fbid: PropTypes.number,\n  isOpen: PropTypes.bool,\n  // firstRender: PropTypes.bool,  \n  stateChange: PropTypes.func,\n}\nexport default HelpManager","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    x: \"0px\",\n    y: \"0px\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"#ffffff\",\n    stroke: \"#0006\",\n    strokeWidth: \"1px\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,23v-4a2,2,0,1,0,0,4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,24V18.038L47.967,18H32.033L32,18.038V25a7.979,7.979,0,0,0,3.556,6.648l.124.078a8.078,8.078,0,0,0,8.762-.076A7.982,7.982,0,0,0,48,25ZM35.5,22A1.5,1.5,0,1,1,37,20.5,1.5,1.5,0,0,1,35.5,22Zm3.361,6H37V26h1.861a7.445,7.445,0,0,0,3.635-.864L43.5,26.864A9.353,9.353,0,0,1,38.861,28ZM44.5,22A1.5,1.5,0,1,1,46,20.5,1.5,1.5,0,0,1,44.5,22Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"17.279 13 18 10.838 18 4 13 4 13 10.838 13.721 13 17.279 13\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17,35.226V15H14V35.226A5.657,5.657,0,0,1,17,35.226Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M50,19v4a2,2,0,0,0,0-4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,11.41v-.021q0-.66-.034-1.324c0-.022,0-.043,0-.065H32.038c0,.022,0,.044,0,.066-.022.441-.033.883-.034,1.323V12H48Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31,16H49a3.006,3.006,0,0,0,2.829-2H28.171A3.006,3.006,0,0,0,31,16Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M47.613,6.793A3.329,3.329,0,0,0,44.32,4a3.357,3.357,0,0,0-2.781,1.489,1.853,1.853,0,0,1-3.076,0A3.359,3.359,0,0,0,35.68,4a3.33,3.33,0,0,0-3.292,2.79c-.067.4-.1.806-.154,1.21H47.766C47.716,7.6,47.679,7.19,47.613,6.793Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M40,35a9.941,9.941,0,0,1-4-.847V36.17a2,2,0,0,1-1.637,1.963l-1.188.224.383,1.576a6.629,6.629,0,0,0,12.884,0l.383-1.576-1.19-.224A2,2,0,0,1,44,36.17V34.147A9.946,9.946,0,0,1,40,35Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18,57V56H11a1,1,0,0,1-1-1V51a1,1,0,0,1,1-1h7V45.4a5.495,5.495,0,0,1-6-9.131V29.151a5.078,5.078,0,0,0-3.991,4.606,4.891,4.891,0,0,0,.041.926,12.5,12.5,0,0,1-2.032,9.29A9.98,9.98,0,0,0,4,50.3,10.262,10.262,0,0,0,14.35,60h2.3a10.328,10.328,0,0,0,1.8-.161A4.013,4.013,0,0,1,18,58Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.7,58H20a1.958,1.958,0,0,0,.814,1.608A2.01,2.01,0,0,0,22,60h4a1.006,1.006,0,0,1-.555-.168Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"28 60 28.017 59.998 26 60 28 60\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"53.303 51 60 51 60 49 56.303 49 53.303 51\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M59.941,43.492c-.005-.031-.013-.062-.018-.093a3.991,3.991,0,0,0-.142-.523c-.025-.069-.05-.137-.078-.2a3.814,3.814,0,0,0-.239-.509h0a3.982,3.982,0,0,0-.377-.54c-.014-.018-.03-.034-.045-.051a4.006,4.006,0,0,0-.914-.786c-.06-.038-.12-.075-.18-.108a3.871,3.871,0,0,0-.511-.245l-.041-.017a4.017,4.017,0,0,0-.67-.186l-7.941-1.466-.4,1.643a8.629,8.629,0,0,1-16.772,0l-.4-1.643-7.941,1.466a3.962,3.962,0,0,0-1.248.461c-.044.025-.087.051-.132.079a3.953,3.953,0,0,0-.388.277c-.063.051-.125.1-.184.156-.1.09-.191.186-.28.284-.059.065-.118.13-.173.2a4,4,0,0,0-.576,1c-.025.062-.049.125-.071.189a3.913,3.913,0,0,0-.158.583v0a4.035,4.035,0,0,0-.063.708V47h4a1.006,1.006,0,0,1,.555.168L30.3,51H49.7l5.748-3.832A1.006,1.006,0,0,1,56,47h4V44.162A4.012,4.012,0,0,0,59.941,43.492Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,53a1.006,1.006,0,0,1-.555-.168L23.7,49H20v7h3a1.006,1.006,0,0,1,.555.168L26.3,58H32l20.1,2.005L58,60a2,2,0,0,0,2-2V53H30Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.448,37.594a3.542,3.542,0,0,0-3.893,0,3.492,3.492,0,1,0,4.619,5.133l.012-.059a.716.716,0,0,1,.023-.1c.028-.1.077-.2.11-.293.042-.127.089-.251.14-.374.038-.092.06-.184.1-.277.079-.164.158-.311.238-.451l0-.01c.053-.093.109-.174.163-.257A3.571,3.571,0,0,0,19,40.5,3.469,3.469,0,0,0,17.448,37.594Z\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 12,\n    y: 52,\n    width: 6,\n    height: 2\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.134,38.906c.094-.051.18-.119.276-.164l.447-.192a3.5,3.5,0,0,1,.549-.175,3.424,3.424,0,0,1,.462-.11,15.6,15.6,0,0,1,.081-3.578,4.84,4.84,0,0,0,.042-.926A5.079,5.079,0,0,0,19,29.151v7.113a5.445,5.445,0,0,1,1.815,2.825C20.919,39.024,21.025,38.965,21.134,38.906Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.97fcb56e.svg\";\nexport { ForwardRef as ReactComponent };","/*\n  QueryPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage query controls for GuitarJoe app\n\n*/\nimport React from 'react'\nimport { motion } from \"framer-motion\"\n\nimport './Fretboard.css'\nimport QueryBar from \"./QueryBar\"\nimport InfoPnl from \"./InfoPnl\"\nimport ArrowButton from './controls/ArrowButton'\nimport HelpManager from './controls/HelpManager.jsx'\n\n\nclass QueryPnl extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this.helpManagerOpen = true  //have helpManager remove self when === false\n                                 //technique does not work with state because of re-renders\n    this.btnCollapseClick = this.btnCollapseClick.bind(this)\n    this.btnClearClick = this.btnClearClick.bind(this)\n    this.btnHelpClick = this.btnHelpClick.bind(this)\n    this.btnDupeClick = this.btnDupeClick.bind(this)\n    this.btnDelClick = this.btnDelClick.bind(this)\n  }\n\n  //event handlers\n  btnCollapseClick(){\n    let val = !this.props.qry.collapsed\n    this.props.stateChange( 'collapsed', val )\n  }\n  btnClearClick(){\n    // this.props.dispatch({ type:\"FretboardActions/fretFirstUpdate\", payload:'' })\n    this.props.reset()\n  }\n  btnDelClick(){\n    this.props.remove()\n  }\n  btnDupeClick(){\n    this.props.duplicate()\n  }\n  btnHelpClick(){\n    if( this.helpManagerOpen === true ){  \n      this.helpManagerOpen = false //will hide then call parent.stateChange\n      this.forceUpdate()\n    }\n    else{ //show help\n      this.helpManagerOpen = true\n      let val = !this.props.qry.helpManager\n      this.props.stateChange( 'helpManager', val )\n    }\n  }\n  \n\n  render(){\n    // console.log('queryPnl.render()', this.props)\n    let qry = this.props.qry\n    let qryBtnClass = (qry.collapsed ?'qryBtnSmall' :'qryBtn')\n    \n    let arrowUord = (qry.collapsed ?'dn' :'up')\n    let arrowTitle = (qry.collapsed ?'Show Query panel' :'Hide Query panel')\n    let arrowWidth = (qry.collapsed ?'1.5em' :'2em')\n\n    let helpManager = null\n    if(qry.helpManager === true){\n      helpManager = <HelpManager \n        fbid={qry.fbid} \n        stateChange={this.props.stateChange} \n        isOpen={this.helpManagerOpen} \n      />\n    }\n    else\n     this.helpManagerOpen = false //reset\n    \n    return (\n      <div className={'queryPnl queryPnlShow'} >\n        <table className='tbQuery' ><tbody><tr>\n        <td className='tdQryBtnsLeft'>\n           <ArrowButton upOrDn={arrowUord} width={arrowWidth} title={arrowTitle} onChange={this.btnCollapseClick}/>\n        </td><td className='tdQryContent'>\n          <QueryBar\n            qry={qry} \n            stateChange={this.props.stateChange}\n            setChangeHandler={this.props.setChangeHandler}\n          />\n          <InfoPnl \n            qry={qry} \n            stateChange={this.props.stateChange}\n            setChangeHandler={this.props.setChangeHandler}\n          />\n          {helpManager}\n        </td><td className='tdQryBtnsRight'>\n            <div className={qryBtnClass +' qryBtnClear'} onClick={this.btnClearClick} title='Reset query controls'>\n              <motion.div \n                    whileTap={{ transform:'rotateZ(360deg)' }}\n                    transition={{ type:'spring', damping: 30 }}\n                  >\n                  &#8635;\n              </motion.div>\n            </div>\n            <div className={qryBtnClass +' qryBtnHelp'} onClick={this.btnHelpClick} title='Display HelpPanel' >\n              <motion.div \n                whileTap={{ transform:'rotateZ(360deg)' }}\n                transition={{ type:'spring', damping: 30 }}\n              >\n                &#63;\n              </motion.div>              \n            </div>\n            <div className={qryBtnClass +' qryBtnDupe'} onClick={this.btnDupeClick} title='Duplicate fretboard' >\n              <motion.div \n                whileTap={{ transform:'rotateZ(360deg)' }}\n                transition={{ type:'spring', damping: 30 }}\n              >\n                &#10010;\n              </motion.div>              \n            </div>\n            { qry.fbid === 0 ?null\n              :<div className={qryBtnClass +' qryBtnDel'} onClick={this.btnDelClick} title='Remove this fretboard' >\n                  <motion.div \n                    whileTap={{ transform:'rotateZ(360deg)' }}\n                    transition={{ type:'spring', damping: 30 }}\n                  >\n                    &#10000;\n                  </motion.div>\n                </div>\n            }\n        </td></tr></tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default QueryPnl\n","/*\nFretboard.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - top level container for fretboard controls of GuitrJoe app\n  - store shared state for FretPnl.js and QueryPnl.js\n\n*/\n\nimport React from 'react';\n\nimport FretPnl from \"./FretPnl\";\nimport QueryPnl from \"./QueryPnl\";\nimport q from \"./guitar_lib.js\";\nimport './Fretboard.css';\n\nclass Fretboard extends React.Component{\n\n  constructor (props) {\n    console.log('Fretboard.constructor()', props)\n    super(props)\n\n    this.qry = null\n    this.newqry = null    //used by this.changeHandlers in shouldComponentUpdate()\n\n    let helpManager = (props.helpManager ?props.helpManager : false)\n    if(props.firstRender === true) helpManager = true\n\n    this.state = {\n\t\t\tfbid:(props.fbid ?props.fbid :0),\n\t\t\t\n      //eventually replace rootType with mode\n      // rootType:(props.rootType ?props.rootType :''),    //one of: ['', 'AllNotes', fretRoot, fretSelect, noteSelect]\n      mode:(props.mode ?props.mode :''),    //one of: ['', 'AllNotes', fretRoot, fretSelect, noteSelect]\n      helpManager:helpManager, \n      \n      collapsed:(props.collapsed ?props.collapsed :false),\n      fretBtnStyle:(props.fretBtnStyle ?props.fretBtnStyle :'NoteFirst'),    //one of: NoteFirst, IvlFirst, NoteTab, NoteAbc\n      fretFirst:(props.fretFirst ?props.fretFirst :0),\n      fretLast:(props.fretLast ?props.fretLast :q.fretboard.fretMax),\n      fretFilter:(props.fretFilter ?props.fretFilter :[]),      //csv of fretN, if found then disable fret\n      strgFilter:(props.strgFilter ?props.strgFilter :[]),    //csv of strN, if found then hide notes\n      noteFilter:(props.noteFilter ?props.noteFilter :[]),    //notes on fetboard where button.data-selected=2; set by clicking infoPnl note\n      \n      fretRoot:(props.fretRoot ?props.fretRoot :null),          //note object, set when fret clicked\n      selNoteVal:(props.selNoteVal ?props.selNoteVal :''),   //string, contains note selected in selNote control\n      octave:(props.octave ?props.octave :0), \n\n      fretSelect:(props.fretSelect ?props.fretSelect :[]),    //when mode=fretSelect, list of frets and related data; set in fretPnl.fretClick()\n      fretSelectMatch:(props.fretSelectMatch ?props.fretSelectMatch :null),    //user selects a chord or scale to view: {type, name}\n      fretSelectMatchDisplay:(props.fretSelectMatchDisplay ?props.fretSelectMatchDisplay :'Show'),    //Show or Collapse\n\n      scaleName:(props.scaleName ?props.scaleName :''),\n      scaleTriadDisplay:(props.scaleTriadDisplay ?props.scaleTriadDisplay :'Show'),    // Show, Collapse, or Close\n      scaleTriadSelected:(props.scaleTriadSelected ?props.scaleTriadSelected :null),   //null or degree of selected triad\n      \n      chordName:(props.chordName ?props.chordName :''),\n      chordInvrDisplay:(props.chordInvrDisplay ?props.chordInvrDisplay :'Show'),    // Show, Collapse, or Close\n      chordInvrSelected:(props.chordInvrSelected ?props.chordInvrSelected :null),    //user selected inversion position to display\n      chordShape:(props.chordShape ?props.chordShape :''),\n\n      ivlName:(props.ivlName ?props.ivlName :''), \n    }\n    this.duplicate = this.duplicate.bind(this)\n    this.remove = this.remove.bind(this)\n    this.reset = this.reset.bind(this)\n    this.stateChange = this.stateChange.bind(this)\n    this.strgFiltered = this.strgFiltered.bind(this)\n    this.makeQuery = this.makeQuery.bind(this)\n    this.fretSelectFind = this.fretSelectFind.bind(this)\n    this.inversionNoteByTab = this.inversionNoteByTab.bind(this)\n    \n    //children can prevent state from chaning until they complete their own processing\n    this.changeHandlerActive = false\n    this.changeHandlers = []\n    this.changeExecList = []    \n    this.setChangeHandler = this.setChangeHandler.bind(this)\n  }  \n  // componentDidCatch(error, errorInfo) {\n  //   console.log('Fretboard.componentDidCatch:', error, errorInfo)\n  //   alert(`\n  //     Warning: An unknown error has occurred.\n\n  //     Please reload the webpage as the application is now unstable.\n\n  //     ${error}      \n  //     ${JSON.stringify( errorInfo )}      \n  //   `)\n  // }\n  setChangeHandler(tag = null, testFunc = null, execFunc = null){ //currently used by InfoPnl\n    if(tag === null || testFunc === null || execFunc === null)\n      throw new Error('Fretboard.setChangeHandler() error, all parameters must be supplied.')\n    \n    const found = this.changeHandlers.find( obj => obj.tag === tag)\n    if(found === undefined)\n      this.changeHandlers.push({\n        tag: tag,            // name \n        testFunc: testFunc,  // return true to pause state change\n        execFunc: execFunc   // executed when testFunc returns true; on done call Fretboard.stateChange('changeHandled', tag)\n      })\n  }\n  shouldComponentUpdate(nextProps, nextState){\n    \n    if(this.changeHandlerActive === true){\n      // note: this is normal as React calls shouldComponentUpdate at its own discretion\n      // note: we are waiting for changeHandlers to complete execution by calling stateChange('changeHandled', handlerTag)\n      // console.log(`Fretboard.shouldComponentUpdate() called but changeHandlerActive == true; False returned.`)\n      return false\n    }\n    \n    try{    //allow children to do stuff before state changes\n\n      this.newqry = this.makeQuery( nextState )\n      this.changeExecList = []\n\n      for(let obj of this.changeHandlers){  // any children with work to do?\n        let result = obj.testFunc( this.newqry, obj.tag )\n        // console.log('ChangeHandler test:', obj.tag)\n        if(result === true){\n          this.changeExecList.push( obj )\n        }\n      }\n      if(this.changeExecList.length > 0){   // allow children to do work\n        this.changeHandlerActive = true\n        for(let obj of this.changeExecList){\n          obj.execFunc( this.newqry, obj.tag )\n        }\n        return false\n      }\n\n      return true\n    }\n    catch( err ){\n      alert(`\n        Warning: An error has occurred in Fretboard.shouldComponentUpdate().\n\n        Please reload the webpage as the application is now unstable.\n\n        ${err}      \n      `)\n      return false\n    }\n  }\n  reset(){\n    this.changeHandlers = []\n    this.changeExecList = []\n    this.changeHandlerActive = false\n    \n    this.setState({ collapsed:false })\n    this.setState({ fretSelect:[] })\n    this.setState({ fretSelectMatch:null })\n    this.setState({ fretSelectMatchDisplay:'Show' })\n    this.setState({ fretFilter:[] })\n    this.setState({ noteFilter:[] })\n    this.setState({ strgFilter:[] })\n    this.setState({ scaleName:'' })\n    this.setState({ scaleTriadDisplay:'Show' })\n    this.setState({ scaleTriadSelected:null })\n    this.setState({ chordName:'' })\n    this.setState({ chordInvrSelected:null })\n    this.setState({ chordInvrDisplay:'Show' })\n    this.setState({ chordShape:'' })\n    this.setState({ mode:'' })\n    this.setState({ ivlName:'' })\n    this.setState({ helpManager:false })\n    this.setState({ fretRoot:null })\n    this.setState({ selNoteVal:'' })\n    this.setState({ octave:0 })\n    this.setState({ fretBtnStyle:'NoteFirst' })\n  }\n  stateChange( key, val){\n    // if(key === 'mode')   //only manually set below; can be prop instead of state\n    //   this.setState({ mode:val })\n    // else\n    if(key === 'changeHandled'){  // when changeExecList.length === 0 then forceUpdate()\n      if(this.changeHandlerActive !== true){\n        console.log(`Fretboard.stateChange('changeHandled', ${val}) called but changeHandlerActive != true.`)\n        return\n      }\n\n      const idx = this.changeExecList.findIndex( obj => obj.tag === val)\n      if( idx >= 0 ){\n        this.changeExecList.splice( idx, 1 )\n        if(this.changeExecList.length === 0){\n          this.changeHandlerActive = false\n          this.forceUpdate()\n        }\n      }\n      // else   ==> this is ok\n        // throw new Error('Fretboard.stateChange() error, object not found for tag: '+val)\n    }\n    else\n    if(key === 'collapsed'){\n      if(val === true){\n        this.setState({ fretSelectMatchDisplay: 'Collapse' })\n        this.setState({ scaleTriadDisplay: 'Collapse' })\n        this.setState({ chordInvrDisplay: 'Collapse' })\n      }\n      else{\n        this.setState({ fretSelectMatchDisplay: 'Show' })\n        this.setState({ scaleTriadDisplay: 'Show' })\n        this.setState({ chordInvrDisplay: 'Show' })\n      }\n      this.setState({ collapsed:val })\n    }else\n    if(key === 'noteFilter'){\n\n      if(val === 'clear'){  //empty list\n        this.setState({ noteFilter:[] })\n      }\n      else {    //default operation\n        let list = this.state.noteFilter.slice()\n        let idx = list.indexOf( val )\n   \n        if(idx < 0) list.push( val )\n        else list.splice( idx, 1 )\n        \n        this.setState({ noteFilter:list })\n      }\n    }else\n    if(key === 'fretBtnStyle'){\n      this.setState({ fretBtnStyle:val })\n    }else\n    if(key === 'fretFilter'){\n      let list = this.state.fretFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ fretFilter:list })\n    }else\n    if(key === 'fretRoot'){\n      this.setState({ fretRoot:val })\n\n      if(val === null)\n         this.setState({ mode:'' })\n      else\n        this.setState({ mode:'fretRoot' })\n      this.setState({ selNoteVal:'' })\n      this.setState({ fretSelect:[] })\n      // this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'selNoteVal'){\n      this.setState({ selNoteVal:val })\n\n      \n      if(val === '')\n        this.setState({ mode:'' })\n      else\n      if(val === 'All')\n        this.setState({ mode:'AllNotes' })\n      else\n        this.setState({ mode:'noteSelect' })\n      this.setState({ fretRoot:null })\n      this.setState({ fretSelect:[] })\n      // this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'fretSelect'){\n\n      if(val === null){   //disable fretSelect mode\n        this.setState({ fretSelect:[] })\n        // this.setState({ fretSelectMatch:null })\n        this.setState({ mode:'' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n        return\n      }\n\n      if(Array.isArray(val) === false)  //process as array due to React state handling\n        val = [val]\n\n      let list = this.state.fretSelect.slice(),\n        idx = null, root=null\n\n      for(let nobj of val){\n        idx = this.fretSelectFind( nobj )\n        if(idx < 0) {\n          if(list.length === 0){\n            nobj.ivl = q.intervals.byName( 'P1' )\n            list.push( nobj )\n          }\n          else{\n            if(root === null) root = list[0]\n            let semis = (nobj.semis -root.semis) % 12\n            if(semis < 12) semis = 12 +semis\n            nobj.ivl = q.intervals.bySemis( semis, true )\n            list.push( nobj )\n          }\n        }else \n          list.splice( idx, 1 )\n      }\n      list.sort(function (a, b) {\n        return a.ivl.semis - b.ivl.semis\n      })\n      \n      if(list.length === 1){\n        this.stateChange( 'fretRoot', list[0] )\n      }\n      else{\n        if(list.length === 2 && this.qry.mode !== 'fretSelect' ){\n          if( this.state.fretSelectMatchDisplay !== 'Show')\n            this.setState({ fretSelectMatchDisplay: 'Show' })\n        }\n\n        this.setState({ fretSelect:list })\n        if(this.state.mode !== 'fretSelect'){   //set mode to fretSelect\n          this.setState({ mode:'fretSelect' })\n          this.setState({ fretRoot:null })\n          this.setState({ selNoteVal:'' })\n        }\n      }\n    }else\n    if(key === 'fretSelectMatch'){\n      this.setState({ fretSelectMatch:val })\n    }else\n    if(key === 'fretSelectMatchDisplay'){\n      this.setState({ fretSelectMatchDisplay:val })\n    }else\n    if(key === 'strgFilter'){\n      val = Number( val )\n      let list = this.state.strgFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ strgFilter:list })\n    }else\n    if(key === 'fretFirst')\n      this.setState({ fretFirst:val })\n    else\n    if(key === 'fretLast')\n      this.setState({ fretLast:val })\n    else\n    if(key === 'octave')\n      this.setState({ octave:val })\n    else\n    if(key === 'scaleName'){\n      this.setState({ scaleName:val })\n      if( this.state.scaleTriadDisplay === 'Close')\n        this.setState({ scaleTriadDisplay: 'Show' })\n    }else\n    if(key === 'scaleTriadSelected'){\n      if(val !== null) val = Number(val)\n      if(this.state.scaleTriadSelected === val)\n        this.setState({ scaleTriadSelected: null })\n      else\n        this.setState({ scaleTriadSelected: val })\n    }else\n    if(key === 'scaleTriadDisplay'){\n      this.setState({ scaleTriadDisplay:val })\n    }else\n    if(key === 'chordName'){\n      this.setState({ chordName:val })\n      if( this.state.chordInvrDisplay === 'Close')\n        this.setState({ chordInvrDisplay: 'Show' })\n    }else\n    if(key === 'chordInvrSelected'){\n     if(this.state.chordInvrSelected === val)\n       val = null\n     this.setState({ chordInvrSelected:val })\n    }else\n    if(key === 'chordInvrDisplay'){\n     this.setState({ chordInvrDisplay:val })\n    }else\n    if(key === 'chordShape'){\n      if( val === null ) val = ''\n      if(this.state.chordShape === val)\n        this.setState({ chordShape:'' })\n      else\n        this.setState({ chordShape:val })\n    }else\n    if(key === 'ivlName'){\n      this.setState({ ivlName:val })\n    }else\n    if(key === 'helpManager'){\n      this.setState({ helpManager:val })\n    }else\n    if(key === 'semis')\n      this.setState({ semis:val })\n  }\n\n  strgFiltered( strN ){\n    strN = Number(strN)\n    return ( this.state.strgFilter.indexOf( strN ) >= 0 )\n  }\n  remove(){\n    this.props.remove( this )\n  }\n  duplicate(){\n    this.props.duplicate( this )\n  }\n\n  inversionNoteByTab( tab ){\n    if(this.state.chordInvrSelected === null) return null\n    for(let nobj of this.qry.chordInvrNotes){\n      if(nobj.tab === tab) return nobj \n    } \n    return null\n  }\n  fretSelectFind( objOrTab ){\n    let list = this.state.fretSelect,\n      fnd = -1\n\n    if(list.length === 0 || objOrTab === null) return fnd  //empty list\n\n    let  tab = (typeof objOrTab === 'string' ?objOrTab :objOrTab.tab)    //find in list\n    for(let ii = 0; ii < list.length; ii++){\n      if(tab === list[ii].tab){\n        fnd = ii\n        break\n      }\n    }\n    return fnd\n  }\n  makeQuery( state ){\n    let qry = {\n\n      fbid: state.fbid,\n      firstRender: this.props.firstRender,\n      mode: state.mode,\n      // rootType: state.rootType,    //eventually replace with mode \n\n      collapsed: state.collapsed,\n      fretBtnStyle: state.fretBtnStyle,\n      fretFilter: state.fretFilter,\n      noteFilter: state.noteFilter,\n\n      root: null,\n      note: (state.mode === 'fretRoot' \n              ? state.fretRoot.notes[0] \n              : state.selNoteVal ), \n      octave: state.octave,\n      \n      scale: null,\n      scaleTriadDisplay:state.scaleTriadDisplay,\n      scaleTriadIvls:null,\n      scaleTriads:null,\n      scaleTriadSelected:state.scaleTriadSelected,\n      \n      chord:null,\n      chordInvrDisplay:state.chordInvrDisplay,\n      chordInvrSelected:state.chordInvrSelected,\n      chordInvrNotes:null,\n      chordShape:state.chordShape,\n      chordShapeData:null,\n      inversions:null,\n\n      ivl: null,\n\n      fretSelect: state.fretSelect,\n      fretSelectMatch: state.fretSelectMatch,\n      fretSelectMatchDisplay: state.fretSelectMatchDisplay,\n     \n      helpManager: state.helpManager,\n    }\n\n    if(qry.mode === 'AllNotes'){\n      if( ['NoteAbc','NoteTab'].indexOf( qry.fretBtnStyle ) < 0 )\n        qry.fretBtnStyle = 'NoteAbc'\n    } else\n    if(qry.mode === 'fretSelect'){\n      qry.root = state.fretSelect[0]    //note object, set in FretPnl.fretClick()\n  \n      if(qry.fretSelectMatch != null){\n        if(qry.fretSelectMatch.type === 'chord')\n          qry.fretSelectMatch.obj = q.chords.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n        else\n        if(qry.fretSelectMatch.type === 'scale')\n          qry.fretSelectMatch.obj = q.scales.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n      }\n    } \n    else{\n      if(qry.mode === 'fretRoot')\n        qry.root = state.fretRoot    //note object, set in FretPnl.fretClick()\n      if(qry.mode === 'noteSelect')\n        qry.root = q.notes.byNote( qry.note )    //note object\n\n\n      if(state.scaleName !== '' && qry.root){\n        qry.scale = q.scales.obj( qry.note, state.scaleName )\n        qry.scaleTriads = q.scales.degreeTriads( qry.note, state.scaleName )\n        if(qry.scaleTriadSelected != null)\n          qry.scaleTriadIvls = qry.scaleTriads.list[ qry.scaleTriadSelected -1 ].ivls\n      }\n      if(state.chordName !== '' && qry.root){\n        qry.chord = q.chords.obj( qry.note, state.chordName )\n        qry.inversions = q.chords.inversions(qry.root.note, qry.chord.abr, qry.root.octave )\n        if(qry.chordInvrSelected !== null){\n          qry.chordInvrNotes = q.chords.inversionNotes(  qry.inversions, qry.chordInvrSelected )\n        }\n        if(qry.chordShape !== ''){\n          qry.chordShapeData = q.chords.shapeTabs(qry.chordShape, qry.root.note)\n        }\n      }\n      if(state.ivlName !== '' && qry.root){\n        qry.ivl = q.intervals.byName( state.ivlName )    //this.state.ivlName == abr\n        qry.ivl.note = q.notes.calc( qry.note, qry.ivl )\n      }\n    }\n    this.qry = qry\n    return qry\n  }\n  render(){\n    let qry = (this.newqry !== null\n      ? this.newqry\n      : this.makeQuery( this.state )\n    )\n    this.changeHandlers = []    //reset on every render as children may be removed from DOM\n    this.changeExecList = []\n    \n    // console.log('Fretboard.render()', this.props, this.state, qry)\n    return(\n      <div className='fretboard' id={'Fretboard'+qry.fbid}>\n        <FretPnl\n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          selNoteVal={this.state.selNoteVal} \n\n          qry={qry}\n          stateChange={this.stateChange}\n          setChangeHandler={this.setChangeHandler}\n          strgFiltered={this.strgFiltered}\n          fretSelectFind={this.fretSelectFind}\n          inversionNoteByTab={this.inversionNoteByTab}\n        />\n        <QueryPnl \n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          duplicate={this.duplicate}\n          qry={qry}\n          remove={this.remove}\n          reset={this.reset} \n          stateChange={this.stateChange}\n          setChangeHandler={this.setChangeHandler}\n          strgFiltered={this.strgFiltered} \n         />\n      </div>\n    )\n  }\n}\n\nexport default Fretboard;\n","/*\n  About Dialog\n  - for GuitarJoe by Chris DeFreitas\n\n  requires:\n    Dialog.css\n*/\nimport React from 'react';\nimport Popup from 'reactjs-popup';\nimport './Dialog.css';\n\nconst About = () => (  \n  <Popup\n    trigger={<button className=\"btnInfo\">About</button>}\n    modal\n    nested\n  >\n    {close => (\n      <div className=\"modal\">\n        <div className=\"header\"> \n          About GuitarJoe \n          <span className='hdVer'>v0.1.8 20220106</span> \n          <hr className='hrLine' /> \n        </div>\n        <div className=\"content\">\n<h3>Important: </h3>\n&nbsp;- Everything is clickable...please explore<br />\n&nbsp;- use your browser's zoom controls to enlarge/shrink the controls\n<br /><br />\n\nGuitarJoe is a free web application, no ads, no logins, no tracking.  \nThe goal is to create a tool that would make guitar theory accessible while practicing.\nI am not anything close to a musician, so\nI was going crazy taking notes and diagramming chords, scales and intervals: I needed a tool\nto facilitate my understanding so I could focus on the guitar instead of managing scraps of information.\nThis application has successfully reduced my hair loss--I hope it has the same effect on you!\n<br />\n<br />\n\n<h3>New in v0.1.8</h3>\n1. Added  a Help component<br />\n2. Now displays \"Quick Tips\" when application starts<br />\n3. NoteButtons on Filtered Frets and Strings are made translucent<br />\n4. Fixed issues when clicking strings and areas near strings<br />\n5. Clicking the Notes and Intervals labels now toggle values properly<br />\n6. Clicking NoteButton caption's right side properly toggles data displayed <br />\n7. Note: iOS renders flat symbols with extra space; this is a bug.  It does not occur on iPadOS so I expect the fix will be migrated to iOS at some point.<br />\n<br />\n\n<h3>About Chord Inversions</h3>\nThe guitar provides many combinations for inversions.  The app tries to display the ideal inversion:  \nThe bass note is highlighted, then the remaining notes are selected in order, on higher strings.  \nUnfortunately, this \nresults in certain inversions having no selections on the fretboard, such as CMaj7 third position.  \n<br /><br />\n&nbsp;- Tested to work in Chrome(Windows), Firefox(Windows, Linux), and Safari(iPad, iPhone)<br />\n&nbsp;- Review documentation, updates and references in the <a href='https://github.com/ChrisDeFreitas/guitarjoe/' target='_new'>GitHub Repository</a> <br />\n&nbsp;- Send comments and bugs to <a href='mailto:ChrisDeFreitas777@gmail.com?subject=GuitarJoe:'>ChrisDeFreitas777@gmail.com</a><br />\n<br />\n\n<h3>Thanks to</h3>\n&nbsp;- Application hosted on <a href='https://github.com/ChrisDeFreitas/guitarjoe' target='_new'>Github</a>  <br />\n&nbsp;- Background image from <a href='https://www.flickr.com/photos/webtreatsetc/with/4514047664/' target='_new'>WebTreats ETC</a> <br />\n&nbsp;- Built with the <a href='https://reactjs.org/' target='_new'>React</a> Javascript library <br />\n&nbsp;- <a href='https://github.com/sass/dart-sass' target='_new'>Dart Sass</a>, a Dart implementation of <a href='https://sass-lang.com/'>Sass</a>  <br />\n&nbsp;- <a href='https://www.framer.com/motion/' target='_new'>Framer Motion</a> animation library for React <br />\n&nbsp;- Fuggles font by Robert Leuschke on <a href='https://fonts.google.com/?query=Robert+Leuschke/' target='_new'>Google Fonts</a> <br />\n&nbsp;- Guitar icon by monkik from the <a href='https://thenounproject.com/term/guitar/2588464/' target='_new'>Noun Project</a> <br />\n&nbsp;- <a href='https://www.npmjs.com/package/markdown-to-jsx/'>markdown-to-jsx</a>  React markdown component  <br />\n &nbsp;- Popup control from <a href='https://react-popup.elazizi.com/' target='_new'>reactjs-popup</a> <br />\n&nbsp;- <a href='https://github.com/rigobauer/react-abcjs'>react-abcjs</a>, a React component that renders notes on music staffs <br />\n<br />\n<br />\nCreated by Chris DeFreitas, BC Canada<br />\n        </div>\n        <div className=\"actions\">\n          <button\n            className=\"button\"\n            onClick={() => {\n              close()\n            }}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    )}\n  </Popup>\n)\n\nexport default About","/*\n  App.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - entrypoint for GuitrJoe app\n\n*/\nimport React, { useState, useRef } from 'react';\n\nimport './App.css';\n// import './Bgnd.css';\n// import Bgnd from \"./Bgnd.js\";\nimport Fretboard from \"./Fretboard\"\nimport About from \"./AboutDlg\"\nimport { ReactComponent as Logo } from './resources/logo.svg'\n\nfunction App(){\n\n  const [fbs, setFbs] = useState( [{id:0, state:true}] )  //one cell for each fretboard instance\n  const [newid, setNewId] = useState( null )\t\t// assigned in duplicate()\n\n  const useFirstRender = () => {    //will return false after initial call\n    const ref = useRef(true);\n    const firstRender = ref.current;\n    ref.current = false;\n    return firstRender;\n  }\n\n  function indexOfFbid( fbid ){\n    for(let ii=0; ii < fbs.length; ii++){\n      if(fbs[ii].id === fbid)\n        return ii\n    }\n    return false\n  }\n  function duplicate( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      nid = list.length,\n      obj = {id:nid, state:fretboard.state},\n      idx = indexOfFbid( fbid )\n      \n    if(idx === false)\n      throw new Error(`App.duplicate() error, fbid=[${fbid}] not found.`)\n      \n    list.splice( (idx +1), 0, obj)\t\t\n    setFbs( list )\n    setNewId( nid )\n    // console.log('App.duplicate', list)\n  }\n  function remove( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      idx = indexOfFbid( fbid )\n     \n    if(idx === false)\n      throw new Error(`App.remove() error, fbid=[${fbid}] not found.`)\n\n    list[ idx ].state = false\n    setNewId( null )\n    setFbs( list )\n    // console.log('App.remove()', fbid, list)\n  }\n\n  let list = [], \n    fbCount=fbs.length,\n    firstRender = useFirstRender()\n\n  for(let ii=0; ii < fbCount; ii++){\n    let el = null,\n      id = fbs[ii].id,       //use in .key to help react\n      state = fbs[ii].state  //one of: true, state object, false(a deleted fretboard)\n    if(id === newid){   //create new fretboard\n      el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} \n\t\t\t\tcollapsed={state.collapsed}\n\t\t\t\tfretFirst={state.fretFirst}\n\t\t\t\tfretLast={state.fretLast}\n\t\t\t\tfretBtnText={state.fretBtnText}\n\t\t\t\t\n        fretFilter={state.fretFilter}\n\t\t\t\tstrgFltrList={state.strgFltrList}\n        noteFilter={state.noteFilter}\n        \n        fretSelect={state.fretSelect}\n        fretSelectMatch={state.fretSelectMatch}\n        fretSelectMatchDisplay={state.fretSelectMatchDisplay}\n\n\t\t\t\tmode={state.mode}\n\t\t\t\tfretRoot={state.fretRoot}\n\t\t\t\tselNoteVal={state.selNoteVal} \n\t\t\t\toctave={state.octave} \n\n\t\t\t\tscaleName={state.scaleName}\n        scaleTriadDisplay={state.scaleTriadDisplay}\n        scaleTriadSelected={state.scaleTriadSelected}\n\n\t\t\t\tchordName={state.chordName}\n        chordInvrDisplay={state.chordInvrDisplay}\n        chordInvrSelected={state.chordInvrSelected}\n\t\t\n        ivlName={state.ivlName}\n        helpManager={state.helpManager}\n        firstRender={false}\n      />\n    }else{\n      if(state !== false){ //existing fretboard; magic of react does not overwrite old data\n        el = <Fretboard key={id} fbid={id} \n          duplicate={duplicate} \n          firstRender={firstRender}\n          remove={remove} \n        />\n      }\n    }\n    if(el != null)\n      list.push( el )\n  }\n\n  return (\n    <div className=\"App\">\n\t\t\t<header className=\"App-header header\">\n        <Logo className=\"Logo\" alt=\"Logo\" />\n        GuitarJoe v0.1.8 \n        <About />\n      </header>\n\t\t\t{list}\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n\t  <App />\n\t</React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}