{"version":3,"sources":["guitar_lib.js","controls/react-abcjs.js","FretButton.jsx","FretPnl.jsx","controls/ArrowButton.jsx","controls/ArrowPnl.jsx","InfoPnl.jsx","resources/logo.svg","QueryPnl.jsx","Fretboard.jsx","AboutDlg.jsx","App.jsx","index.jsx"],"names":["q","chords","list","name","abr","intervals","byName","str","chord","obj","root","chordName","ivls","preferFlats","indexOf","note","iname","ivl","notes","calc","push","type","fullName","fullAbbrev","inversions","octave","robj","toUpperCase","objByNote","Number","cobj","maxinversions","length","result","max","positions","rivls","s0","byNote","semis","idx","s1","cnt","pos","inc","ridx","ioctave","num","interval","isemis","iobj","bySemis","inversionLog","invrObj","includeSemis","caption","data","console","log","inversionNotes","invrPos","undefined","local_invrToNobj","invr","strgn","parent","rootfret","nobj","strg","fretboard","fret","fretMax","maxInversions","tmp","inversion","fnd","forEach","findByIvls","ii","strings","tabLetter","fretMin","fretMinSet","nn","init","fretMaxSet","strgN","fretInRange","strgnum","tab","objBySemis","objByTab","ltr","substr","tabByFret","strN","degName","nm","returnFirst","findNote","find","alpha","ivlOrName","rprefix","rsuffix","iprefix","newlet","newsfx","local_inc","fobj","match","nobjList","nidx","slice","comparisons","iidx","splice","toAbc","noteLength","acc","Math","floor","scales","short","degreeTriads","scale","sobj","degrees","rootivl","semis0","deg","triad","degree","degreeName","scaleName","ivlAbr","shortName","abbrevName","octaveNum","Abcjs","uniqueNumber","Date","now","random","abcNotation","parserParams","engraverParams","renderParams","abcjsObj","renderAbc","this","props","renderAbcNotation","style","width","id","PureComponent","defaultProps","responsive","viewportHorizontal","FretButton","qry","buttonClick","event","btn","target","nodeName","parentNode","stopPropagation","rootType","dataset","state","stateChange","fretSelect","fretSelectFind","selected","btnStyleChange","fretBtnStyle","btnState","btnStyle","fsmatch","fretSelectMatch","noteFilter","btncaption","key","minPadding","paddingtop","paddingbottom","paddingleft","paddingright","staffwidth","textboxpadding","className","onClick","FretPnl","fretClick","bind","fretFltrClick","strgFltrClick","cell","strn","isNaN","fretfilter","clientY","getBoundingClientRect","top","offsetHeight","strgFiltered","document","querySelector","fbid","currentTarget","fso","scaleTriadIvls","chordInvrNotes","inv","inversionNoteByTab","selNoteVal","fretSelectMatchFind","ivlFind","chordFind","scaleTriadFind","scaleFind","rootFind","noteFind","octaveFind","trArray","first","fretFirst","last","fretLast","ss","row","frets","strgFltr","col","fretFltr","fretFilter","btnStrFltr","cls","collapsed","onMouseDown","stringdiv","buttonFind","React","Component","ArrowButton","uord","upOrDn","toLowerCase","dstyle","height","astyle","fontSize","arrow","newud","onChange","title","ArrowPnl","isOpen","arrowUpOrDn","keyidx","arrowWidth","arrowTitle","val","motion","div","animate","variants","open","closed","transition","restSpeed","damping","duration","items","InfoPnl","_g","fsChordClick","fsScaleClick","infoItemClick","invrLabelClick","triadLabelClick","scaletriad","arrowUord","arrowFunc","html","lastkey","htmlCaption","htmlItems","fretSelectMatchDisplay","noblist","filter","a","lastname","ob","drawFretSelectMatches","scaleTriadDisplay","scaleTriads","scaleTriadSelected","chordInvrDisplay","invrs","pobj","chordInvrSelected","QueryPnl","btnDupeClick","btnDelClick","selLabelClick","selChordChange","btnClearClick","btnCollapseClick","selIntervalChange","selNoteChange","selOctaveChange","selScaleChange","reset","remove","duplicate","lbl","ivlName","sel","options","selectedIndex","text","value","omin","oct","datastate","chd","qryBtnClass","qryDisplayClass","selNote","selOct","selInt","selScale","selChord","drawSelNote","drawSelOctave","drawSelInterval","drawSelScale","drawSelChord","Fretboard","strgFilter","fretRoot","makeQuery","setState","objOrTab","Array","isArray","sort","b","About","trigger","modal","nested","close","display","marginLeft","href","_excluded","_extends","Object","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","titleId","xmlns","viewBox","x","y","ref","fill","stroke","strokeWidth","d","points","ForwardRef","App","useState","fbs","setFbs","newid","setNewId","indexOfFbid","nid","Error","fbCount","el","fretBtnText","strgFltrList","alt","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.120dc2e8.chunk.js","sourcesContent":["/*\n   &flat; alt+?\n  \n  GuitarJoe's guitar logic\n  by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  \n   Note:\n    - all objects returned are newly constructed, so they may by modified by the caller\n    - note refers to what we usually call a note: C#\n    - note object, nobj: { strgnum:int, fret:int, note:'C#', semis:49, ... }\n    - note.semis is unique: number of semitones, Middle C = 48\n    - fret is an integer\n    - fret object, fobj: { strg:{}, fret:int, tab:'e12' }\n    - ivl is an interval object: intervals.list[n]\n    - ivls is a list of interval objects\n    - chord is an object: chords.list[n]\n    - assume: exception handling performed by caller\n\n  Todo:\n    - disambiguate chord (object) vs chordName (string)\n    - verify code consistency\n    -- verify usage of for..in (not iterable) vs for..of (iterable)\n    --- confirm for..in is used with objects, not arrays\n    - (when needed) update notes.calc() for ##/bb -- see comments in function\n  \n */\n\nvar q = {\n\n  chords: {\n    //verified against: https://www.omnicalculator.com/other/chord\n    list:[\n      {\n        name:'Major triad', abr:'maj',\n        intervals:[ 'P1', 'M3', 'P5' ]\n      },{\n        name:'Minor triad', abr:'min',\n        intervals:[ 'P1', 'm3', 'P5' ]\n      },{\n        name:'Augmented triad', abr:'aug',\n        intervals:[ 'P1', 'M3', 'A5' ]\n      },{\n        name:'Diminished triad', abr:'dim',\n        intervals:[ 'P1', 'm3', 'd5' ]\n      },{\n        name:'Dominant seventh', abr:'7',\n        intervals:[ 'P1', 'M3', 'P5', 'm7' ]\n      },{\n        name:'Major seventh', abr:'maj7',\n        intervals:[ 'P1', 'M3', 'P5', 'M7' ]\n      },{\n        name:'Minor seventh', abr:'min7',\n        intervals:[ 'P1', 'm3', 'P5', 'm7' ]\n      },{\n        name:'Major sixth', abr:'maj6',\n        intervals:[ 'P1', 'M3', 'P5', 'M6' ]\n      },{\n        name:'Minor sixth', abr:'min6',\n        intervals:[ 'P1', 'm3', 'P5', 'M6' ]\n      },{\n        name:'Suspended second', abr:'sus2',\n        intervals:[ 'P1', 'M2', 'P5' ]\n      },{\n        name:'Suspended fourth', abr:'sus4',\n        intervals:[ 'P1', 'P4', 'P5' ]\n      }\n    ],\n    byName( str ){\n      for(let chord of q.chords.list){\n        if(chord.abr === str || chord.name === str)\n          return { ...chord }\n      }\n      return null\n    },\n    obj( root, chordName ){  //return chord with notes based on root\n      let ivls = [],\n        chord = q.chords.byName( chordName )\n      if(chord === null) return null\n\n      if(typeof root === 'string')\n        root = q.intervals.byName( root )   //object returned to caller\n      if(root === null) return null\n\n      let preferFlats = ( \n          chord.name.indexOf('Minor') >= 0  \n        ||chord.name.indexOf('Diminished') >= 0 \n        || root.note.indexOf('') >= 0)\n      for(let iname of chord.intervals){\n        let ivl = q.intervals.byName( iname )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivls.push({ ...ivl, note:note })\n      }\n\n      let obj = { \n        ...chord, \n        type:'chord',\n        fullName: root.note +' '+chord.name,\n        fullAbbrev: root.note +chord.abr,\n        root: root,\n        ivls:ivls\n      }\n\n      return obj\n    },\n    inversions( note, chordName, octave = 0 ){   // return an inversion object for given note and scale\n      let robj = null\n      if( typeof note === 'object' ){\n        robj = note\n        note = robj.note\n      }else{\n        note = note.toUpperCase()\n        robj = q.notes.objByNote( note )\n      }\n      if(octave === null) octave = 0\n      robj.octave = Number(octave)\n      let cobj = null\n      if( typeof chordName === 'object' ){\n        cobj = chordName\n        chordName = cobj.abr\n      }else\n        cobj = q.chords.obj(note, chordName)\n\n      let maxinversions = cobj.ivls.length\n      let result = { root:robj.note, chord:chordName, octave:octave, max:maxinversions, positions:[] }\n      let rivls = cobj.ivls\n      let positions = ['Root','First','Second','Third','Fourth','Fifth']\n\n      rivls[0].octave = robj.octave   // set correct octaves\n      let s0 = q.intervals.byNote( rivls[0].note ).semis     \n      for( let idx = 1; idx < maxinversions; idx++ ){\n        let s1 = q.intervals.byNote( rivls[idx].note ).semis\n        rivls[idx].octave = (s0 < s1 ?robj.octave :robj.octave +1)\n      }\n     \n      for( let cnt = 1; cnt <= maxinversions; cnt++){\n        let pos = positions[ cnt -1 ]\n        let obj = result.positions[ pos ] = []\n\n        for( let idx = 1; idx <= maxinversions; idx++ ){\n          let inc = 0\n          let ridx = idx +(cnt -2) \n          if(ridx >= maxinversions) {\n            ridx -= maxinversions\n            inc = 1\n          }\n          let ioctave = ( rivls[ ridx ].octave +inc )\n                    \n          obj[idx] ={ \n            num: (ridx +1),\n            note: rivls[ ridx ].note,\n            octave: ioctave,\n            interval: null,\n            abr:null,\n            semis: q.semis.calc( rivls[ ridx ].note, ioctave ),\n            // chordNote: rivls[ ridx ],\n          }\n          let isemis = (idx === 1 ?0 : obj[idx].semis -obj[1].semis)\n          let iobj = q.intervals.bySemis(isemis, true)\n          obj[idx].interval = (isemis === 0 ?'Root' :iobj.name )\n          obj[idx].abr = iobj.abr\n          // console.log( obj[idx] )\n        }\n      }\n\n      return result\n    },\n    inversionLog( invrObj, includeSemis = false ){    // write to console\n      let caption = invrObj.root +invrObj.octave +' ' +invrObj.chord +' inversions:\\n'\n      let data = ''\n      for( let pos in invrObj.positions){\n        data += ' ' +pos +': '\n        for( let obj of invrObj.positions[pos] ){\n          data += obj.interval +' - ' +obj.note +obj.octave\n            +( includeSemis === false ?' ' :'(' +obj.semis +') ' )\n        }\n        data += '\\n'       \n      }\n      console.log( caption, data)\n    },\n    inversionNotes( invrObj, invrPos ){ //return note objects for inversion\n      //assume: inversion root is always the bass note \n      //assume: notes returned must be on continguous strings\n      //assume: notes must exist within a range of frets from the bass note\n      //note: only return notes when all notes of inversion found\n      //note: some inversions will not have results because of these rules\n\n      if( invrObj.positions[invrPos] === undefined )\n        return null\n\n      function local_invrToNobj( invr, strgn, parent = null, rootfret = null ){\n        let nobj = null\n        let strg = q.fretboard.strg( strgn )\n        let note = invr.note\n        let fret = ( q.intervals.byNote( note ).semis  -q.intervals.byNote( strg.note ).semis )\n        if(fret < 0) fret += 12\n        \n        if(rootfret != null) fret = rootfret +12  //for root position: find multiple notes on string\n        \n        while( fret <= q.fretboard.fretMax ){\n          //  console.log('fret'+fret+':', {strg:strg.note, invr:note, fret:fret} )\n          if(fret <= q.fretboard.fretMax){\n            nobj = q.notes.obj( strg.num, fret, note )\n            // console.log('  search:', {iOctave:invr.octave, nOctave:nobj.octave, nobjFret:nobj.fret, parentFret:parentFret })\n            if( parent === null || (nobj.fret >= parent.fret-3 && nobj.fret <= parent.fret+3 ))  //verify proximity of frets\n            //don't verify octaves, leave it for the user to inspect\n            // && ( [0,1].indexOf(invr.octave) >= 0 || nobj.octave === invr.octave ))  //octave == 0||1 means note selected from QueryPnl.selNote\n              break;\n            else{   //keep searching string\n              fret += 12\n              nobj = null\n            }\n          }\n        }\n        return nobj\n      }\n\n      let chord = invrObj.root +invrObj.chord\n      let maxInversions = invrObj.max\n      let inversions = invrObj.positions[invrPos]\n\n      let tmp = []  //temporary store for notes found\n      let list = []     //returned with all notes found\n      for(let strgn = 6; strgn >= maxInversions; strgn--){   //because of inversion logic, root note can never be on upper strings\n\n        let rootfret = null\n        while( rootfret === null || rootfret < q.fretboard.fretMax){  //allow searching for root note multiple times\n          //calc fret position of root note\n          let invr = inversions[1]\n          let nobj = local_invrToNobj( invr, strgn, null, rootfret )\n          if(nobj === null) break\n          tmp[0] = nobj\n          tmp[0].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:1}\n          rootfret = nobj.fret    //\n\n          //calc note n\n          let fnd = true\n          for(let num = 2; num <= maxInversions; num++){\n            let parent = nobj\n            invr = inversions[ num ]\n            nobj = local_invrToNobj( invr, strgn -(num -1), parent, null )\n            if(nobj === null) {\n              fnd = false\n              break\n            }\n            tmp[ num -1 ] = nobj\n            tmp[ num -1 ].invr = {chord:chord, inversion:invrPos, abr:invr.abr, num:num}\n          }\n          if(fnd === false) continue\n\n          tmp.forEach( nobj => list.push( nobj ) )\n        }\n      }\n      if(list.length === 0) return null\n      return list\n    },\n    findByIvls( ivls ){    //find a chord by matching interval.abr\n      // return null or one of q.chords.list[]\n      for( let chord of q.chords.list ){\n        if(chord.intervals.length !== ivls.length) \n          continue\n\n        let fnd = true\n        for( let ii = 0; ii < chord.intervals.length; ii++ ){\n           if(ivls[ii].abr !== chord.intervals[ii]){\n             fnd = false\n             break\n           }\n        }\n        if( fnd === true )    // all ivls match\n          return { ...chord }\n      }\n      return null\n    },\n\n  },\n\n  fretboard: {\n    strings: [\n      {num:1, note:'E', octave:4, semis:0, tabLetter:'e' },\n      {num:2, note:'B', octave:3, semis:0, tabLetter:'B' },\n      {num:3, note:'G', octave:3, semis:0, tabLetter:'G' },\n      {num:4, note:'D', octave:3, semis:0, tabLetter:'D' },\n      {num:5, note:'A', octave:2, semis:0, tabLetter:'A' },\n      {num:6, note:'E', octave:2, semis:0, tabLetter:'E' }\n    ],\n\n    fretMin:1,\n    fretMax:14,\n    fretMinSet( nn ){   //not used as yet\n      q.fretboard.fretMin = nn\n      q.fretboard.init()\n    },\n    fretMaxSet( nn ){   //not used as yet\n      q.fretboard.fretMax = nn\n      q.fretboard.init()\n    },\n\n    init(){\n      for(let ii = 0; ii <= q.fretboard.strings.length -1; ii++){\n        let strg = q.fretboard.strings[ii]\n        q.fretboard.strings[ii].semis = q.semis.calc(strg.note, strg.octave)\n      }\n    },\n    strg( strgN ){  \n      return { ...q.fretboard.strings[ strgN -1 ] }\n    },\n    fretInRange(nobj, root, num = 3){\n      //assume: root is a notes.obj()\n      let max = (num <= 5 ?5 :num)\n      if((root.fret <= 1 && nobj.fret <= max)\n      || (root.fret > 1 && nobj.fret >= (root.fret -num)\n         && nobj.fret <= (root.fret +num)) )\n        return true\n      return null\n    },\n    obj( strg, fret ){\n      if( typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      let semis = strg.semis +Number(fret)\n      return {\n        fret:fret, \n        // strg:Object.assign( {}, strg ), \n        strgnum:strg.num, \n        tab:(strg.tabLetter +fret),\n        semis: semis,\n        notes: q.notes.bySemis(semis)\n      }\n    },\n    objBySemis( semis ){\n      let fret = null,\n        fretMax = q.fretboard.fretMax\n      for(let strg of q.fretboard.strings){\n        if(semis >= strg.semis && semis <= (strg.semis +fretMax)){\n          fret = ( semis -strg.semis )\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    objByTab( tab ){\n      let ltr = tab.substr(0,1),\n        fret = Number(tab.substr(1))\n      for( let strg of q.fretboard.strings ){\n        if(strg.tabLetter === ltr){\n          return q.fretboard.obj( strg, fret )\n        }\n      }\n      return null\n    },\n    tabByFret( strN, fret ){  // return example: 'e12'\n      strN = Number( strN )\n      for( let strg of q.fretboard.strings ){\n        if(strg.num === strN){\n          return ( strg.tabLetter +fret )\n        }\n      }\n      return null\n    },\n  },\n\n  intervals:{\n    list:[\n      //rules:\n      // 1. order by semitones\n      // 2. prefer perfect, major, minor first\n      // 3. prefer minor over diminished\n      // 4. prefer augmented last\n      // 5. removed (, TT) because added complexity not relevant to most uses\n      // \n      {name:'Perfect unison', abr:'P1',  semis:0, degName:'Tonic', note:'C' },\n      //{name:'Diminished second', abr:'d2', semis:0, note:'D' },\n      \n      {name:'Minor second', abr:'m2', semis:1, degName:'', note:'D' },\n      {name:'Augmented unison', abr:'A1', semis:1, degName:'', note:'C#' },\n      \n      {name:'Major second', abr:'M2', semis:2, degName:'Supertonic', note:'D' },\n      // {name:'Diminished third', abr:'d3', semis:2, note:'E' },\n      \n      {name:'Minor third', abr:'m3', semis:3, degName:'Mediant', note:'E' },\n      {name:'Augmented second', abr:'A2', semis:3, degName:'Mediant', note:'D#' },\n      \n      {name:'Major third', abr:'M3', semis:4, degName:'Mediant', note:'E' },\n      {name:'Diminished fourth', abr:'d4', semis:4, degName:'Mediant', note:'F' },\n\n      {name:'Perfect fourth', abr:'P4', semis:5, degName:'Subdominant', note:'F'},\n      {name:'Augmented third', abr:'A3', semis:5, degName:'Subdominant', note:'E#'},\n      \n      {name:'Diminished fifth', abr:'d5', semis:6, degName:'', note:'G' },\n      {name:'Augmented fourth', abr:'A4', semis:6, degName:'', note:'F#' },\n      // {name:'Tritone', abr:'TT', semis:6, note:'TT' },\n      \n      {name:'Perfect fifth', abr:'P5', semis:7, degName:'Dominant', note:'G' },\n      // {name:'Diminished sixth', abr:'d6', semis:7, note:'A' },\n      \n      {name:'Minor sixth', abr:'m6', semis:8, degName:'Submediant', note:'A' },\n      {name:'Augmented fifth', abr:'A5', semis:8, degName:'Submediant', note:'G#' },\n      \n      {name:'Major sixth', abr:'M6', semis:9, degName:'Submediant', note:'A' },\n      // {name:'Diminished seventh', abr:'d7', semis:9, note:'B' },\n      \n      {name:'Minor seventh', abr:'m7', semis:10, degName:'Subtonic', note:'B' },\n      {name:'Augmented sixth', abr:'A6', semis:10, degName:'Subtonic', note:'A#' },\n      \n      {name:'Major seventh', abr:'M7', semis:11, degName:'Leading tone', note:'B' },\n      {name:'Diminished octave', abr:'d8', semis:11, degName:'Leading tone', note:'C' },\n      \n      {name:'Perfect octave', abr:'P8', semis:12, degName:'Octave', note:'C' },\n      {name:'Augmented seventh', abr:'A7', semis:12, degName:'Octave', note:'B#' },\n    ],\n  \n    byNote( note ){\n      note = note.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.note === note)\n          return { ...ivl }\n      }\n      return null\n    },\n    byName( nm ){\n      let note = nm.toUpperCase()\n      for(let ivl of q.intervals.list){\n        if(ivl.abr === nm || ivl.note === note || ivl.name === nm)\n          return { ...ivl }\n      }\n      return null\n    },\n    bySemis( semis, returnFirst = false ){   //return intervals where semis match\n      semis = semis % 12\n      let list = []\n      for(let ivl of q.intervals.list){\n        if(ivl.semis > semis) break    //shortcircuit, intervals ordered by semis\n        if(ivl.semis === semis){\n          let obj = { ...ivl }\n          if(returnFirst === true) return obj\n          list.push( obj )\n        }\n      }\n      return list\n    },\n    findNote( ivls, nobj ){   //return null or ivl containing note\n      if(typeof nobj === 'string')\n        nobj = q.notes.objByNote( nobj )\n      \n      let result = ivls.find( ivl => {\n        return ( nobj.notes.indexOf( ivl.note ) >= 0 )\n      })\n\n      if( typeof result !== 'object') return null\n      return result\n    }\n  },\n\n  notes:{\n    list:['C','C#','D','D','D#','E','E','F','F#','G','G','G#','A','A','A#','B','B'],\n    alpha:['C','D','E','F','G','A','B'],\n\n    bySemis( semis, returnFirst = false ){\n      let list = []\n      semis = Number(semis) % 12\n      for(let ivl of q.intervals.list ){\n        if(ivl.semis === semis){\n          if(returnFirst === true) return ivl.note\n          list.push( ivl.note )\n        }\n        if(ivl.semis > semis) break //intervals ordered by semis\n      }\n      return list\n    },\n    calc( root, ivlOrName, preferFlats = false){  //iterate by semitones to get new note with correct #/b\n      // assume: preferFlats === true: return only flats\n\n      // to handle ##/bb:\n      // 1. pre-loop: resolve to standard note, get new root interval, proceed as normal: C## => D\n      // 2. post loop(???): if ivl requires ##/bb, manually resolve based on new note: D => C##\n\n      if(typeof root === 'object') root = root.note\n      let rprefix = root.substr(0,1)\n      let rsuffix = root.substr(1,2)\n      // console.log('root='+root, 'rprefix='+rprefix, 'rsuffix='+rsuffix)\n\n      let ivl = (typeof ivlOrName === 'object' ?ivlOrName : q.intervals.byName(ivlOrName))\n      let iprefix = ivl.abr.substr(0,1)    // A as in A1\n      // console.log('ivl.abr='+ivl.abr, 'iprefix='+iprefix )\n\n      // test: display matching intervals\n      // let rivl = q.intervals.byName( root )\n      // let list = q.intervals.bySemis( rivl.semis +ivl.semis )\n      // console.log( 'ivl.semis='+ivl.semis, '\\nlist=', list  )\n\n      //assume: no ## or bb used\n      let max = ivl.semis, idx = 0    //idx = q.notes.alpha.indexOf( ltr ) ::: test\n      let newlet = rprefix, newsfx = rsuffix\n      function local_inc( ltr ){\n        idx = q.notes.alpha.indexOf( ltr ) // this can probably be refactored out: notes.alpha[idx % 7] always === newlet; lookup not required\n        idx++\n        return q.notes.alpha[ idx % 7]\n      }\n      for(let ii = 0; ii < max; ii++){\n        // console.log('root='+root, 'newlet='+newlet+newsfx)\n        if(newlet === 'B' && newsfx === ''){ \n          newlet = 'C'; \n        }else\n        if(newlet === 'E' && newsfx === ''){ \n           newlet = 'F'; \n        }else\n        if(newsfx === ''){\n          newsfx = ''\n        }else\n        if(newsfx === '#'){\n          newsfx = ''\n          newlet = local_inc( newlet )\n        } \n        else  //newsfx === ''\n        if(iprefix === 'm' || iprefix === 'd'  || preferFlats === true){\n          newsfx = ''\n          newlet = local_inc( newlet )\n        }\n        else\n          newsfx = '#'\n      }\n      // console.log('root='+root, 'newlet='+newlet+newsfx)\n      return newlet+newsfx\n    },\n\n    find( strgN, note ){ //return null or list of note objects on string\n      let result = []\n      let strg = q.fretboard.strg( strgN )\n      let max = strg.semis +q.fretboard.fretMax\n      let semis = strg.semis\n      while(semis <= max){\n        let notes = q.notes.bySemis( semis )\n        if(notes.indexOf( note) >= 0){\n          let nobj = q.notes.obj(strg, semis -strg.semis, note)\n          result.push( nobj )\n          semis += 12\n        }\n        else\n          ++semis\n      }\n\n      if(result.length === 0) return null\n      return result\n    },\n    obj( strg, fret, note = null  ){\n      // console.log(111, fret, strg.num)\n      if(typeof strg === 'number')\n        strg = q.fretboard.strg( strg )\n      if(fret < 0) return null\n      let semis = strg.semis +fret\n      if(semis > (strg.semis +q.fretboard.fretMax)) return null\n\n      let octave = q.octave(semis),\n          list = q.notes.bySemis( semis )\n      return {\n        fret: fret,\n        note: (note === null ?list[0] :note),\n        notes: list,\n        octave: octave,\n        semis: semis,\n        // strg: strg, \n        strgnum: strg.num, \n        tab: strg.tabLetter +fret\n      }\n    },\n    objByNote( note /*, octave = 0 */ ){\n      let ivl = q.intervals.byNote( note ),\n          semis = ivl.semis /* +(octave * 12) */,\n          list = q.notes.bySemis( semis )\n          //, fobj = q.fretboard.objBySemis( semis )\n      return {\n        fret: null, // fobj.fret,    //null because input is not specific to a fret\n        note:note,\n        notes:list,\n        octave:null,  //octave,\n        semis:semis,\n        // strg: null, // fobj.strg,\n        strgnum: null, // fobj.strg.num,\n        tab: null // fobj.tab,\n      }\n    },\n    objByTab( tab ){\n      let fobj = q.fretboard.objByTab( tab )\n      return q.notes.obj( fobj.strg, fobj.fret )\n    },\n\n    match( ivls, nobjList ){    //return true/false if notes in nobjList contained within ivls\n      //used to match scales and chords to user selected frets\n      //assume: ivls is a list of intervals.list[n]\n      //assume: nobjList is a list of notes.obj()\n      //assume: no duplicate items allowed\n      //assume: ivls.length > nobjList.length \n      //assume: there may be ivls[n] between matched items: c,e matches c,d,e\n      //assume: matches may occur across head/tail boundaries: e,c matches c,d,e\n      //generally this is a pattern matching algorithm between two lists\n      if(nobjList.length > ivls.length) return false\n\n      let list = nobjList.slice()   //to support rotating list\n      let fnd, nidx\n\n      //break on first match of all items in nobjList\n      for(let comparisons = 1; comparisons <= list.length; comparisons++){ //max comparisons = original pattern +(list.length -1) rotations \n\n        fnd = false; nidx = 0    //reset search params\n        for(let iidx = 0; iidx < ivls.length; iidx++){    //iterate ivls\n          if(list[nidx].notes.indexOf( ivls[iidx].note ) >= 0){ //increment when list item found; allows for gaps in range\n            if(++nidx === list.length){   //point to next list item\n              // console.log( 'found:', comparisons, list, ivls )\n              fnd = true; break   \n            } \n          }\n        }\n\n        if(fnd === true) break\n        list.push( list.splice(0,1)[0] ) //rotate list by moving head to tail\n      }\n\n      return fnd\n    },\n\n    toAbc( nobj, noteLength = 8 ){\n      let result = ''\n      \n      let acc = nobj.note.substr(1)\n      if(acc === '#') result = '^'\n      else\n      if(acc === '') result = '_'\n      else\n      if(acc === '##') result = '^^'\n      else\n      if(acc === '') result = '__'\n\n      result += nobj.note.substr(0,1)\n       \n      if(nobj.octave === 1) result += ',,'\n      else\n      if(nobj.octave === 2) result += ','\n      else\n      //if(nobj.octave === 3) result = result\n      //else\n      if(nobj.octave === 4) result += \"'\"\n      else\n      if(nobj.octave === 5) result += \"''\"\n      else\n      if(nobj.octave === 6) result += \"''\"\n      else\n      if(nobj.octave === 7) result += \"'''\"\n\n      return result +noteLength\n    }\n  },\n\n  octave( semis ){\n    return Math.floor( semis / 12 )\n  },\n\n  scales:{\n    list:[\n      // tested with: https://www.omnicalculator.com/other/music-scale\n      //            https://www.scales-chords.com/scalenav.php\n      // rules:\n      //   keep accidentals of the same type -- all flat or sharp\n      { name:'Major', abr:'M', short:'Major',\n        // list:[ 'C', 'D', 'E', 'F', 'G', 'A', 'B'],\n        intervals:['P1','M2','M3','P4','P5','M6','M7']\n      },\n      { name:'Natural minor', abr:'m', short:'Minor', \n        // list:[ 'C', 'D', 'D#', 'F', 'G', 'A', 'A#'],\n        intervals:['P1','M2','m3','P4','P5','m6','m7']\n      },\n      { name:'Pentatonic major', abr:'P', short:'Pen.Maj', \n        // list:[ 'C', 'D', 'E', 'G', 'A'],\n        intervals:['P1','M2','M3','P5','M6']\n      },\n      { name:'Pentatonic minor', abr:'p', short:'Pen.min',\n        // list:[ 'C', 'D#', 'F', 'G', 'A#'],\n        intervals:['P1','m3','P4','P5','m7']\n      },\n      { name:'Blues heptatonic', abr:'B7', short:'Blues7',\n        intervals:['P1','M2','m3','P4','d5','M6','m7']\n      },\n      { name:'Blues hexatonic', abr:'B6', short:'Blues6',\n        // 1, 3, 4, 5, 5, 7\n        intervals:['P1','m3','P4','d5','P5','m7']\n      },\n      { name:'Akebono I', abr:'Ak1', short:'Akebono1',\n        intervals:['P1','M2','m3','P5','M6']   // https://ianring.com/musictheory/scales/653 {0,2,3,7,9}\n      },\n      { name:'Akebono II', abr:'Ak2', short:'Akebono2',\n        intervals:['P1','m2','M3','P5','m6']\n        // https://pianoencyclopedia.com/scales/akebono-ii/C-akebono-ii.html:  C, bD, E, G, bA \n        // also: https://ianring.com/musictheory/scales/419\n        // also: https://www.flutopedia.com/csc_5tone_12tet.htm\n      },\n      // { name:'Chromatic', abr:'Ch', short:'Chromatic',\n      //   intervals:['P1','m2','M2','m3','M3','P4','d5','P5','m6','M6','m7','M7']\n      // },\n      { name:'Double harmonic', abr:'DH', short:'Dbl.Hrm',\n        // minor second, major third, perfect fourth and fifth, minor sixth, major seventh -- https://en.wikipedia.org/wiki/Double_harmonic_scale\n        intervals:['P1','m2','M3','P4','P5','m6','M7']\n      },\n      { name:'Gypsy minor', abr:'Gm', short:'Gypsy',\n        // step pattern is W, H, +, H, H, +, H -- https://en.wikipedia.org/wiki/Hungarian_minor_scale\n        intervals:['P1','M2','m3','d5','P5','m6','M7']\n      },\n      { name:'Hungarian major', abr:'HM', short:'Hungarian',\n        // semitones: 3, 1, 2, 1, 2, 1, 2 -- https://en.wikipedia.org/wiki/Hungarian_major_scale\n        intervals:['P1','m3','M3','d5','P5','M6','m7']\n      },\n      { name:'Phrygian dominant', abr:'Pd', short:'Phrygian',\n        //1  2  3  4  5  6  7  1  https://en.wikipedia.org/wiki/Phrygian_dominant_scale\n        intervals:['P1','m2','M3','P4','P5','m6','m7']\n      },\n      { name:'Pygmy', abr:'Py', short:'Pygmy',\n        intervals:['P1','M2','m3','P5','m7']\n        // https://ianring.com/musictheory/scales/397  {0,2,3,7,8}\n        // also: https://alchetron.com/Pygmy-music#Pygmy-scale\n      }\n    ],\n    degreeTriads( root, scale ){    //build triads on all scale degrees\n      // return: {type:'Scale Degree Triads', root:root, scale:scale, abr:sobj.abr, list:[]}\n      let sobj = null\n      if(typeof root === 'object') root = root.note\n      if(typeof scale === 'object') sobj = scale\n      else sobj = q.scales.obj(root, scale)\n      if(sobj === null) return null\n\n      let result = {type:'Scale Degree Triads', root:root, scale:scale, abr:sobj.abr, list:[]}\n      const degrees = ['i','ii','iii','iv','v','vi','vii']\n\n      for(let ii = 0; ii < sobj.ivls.length; ii++){    //iterate each scale degree\n        let ivls = []\n        let rootivl = null    //to calc correct semitones for interval\n\n        for(let num = 0; num <= 2; num++ ){   //build triad\n          let iidx = ii +((+2 * num) )\n          if( iidx >= sobj.ivls.length ) iidx -= sobj.ivls.length\n          \n          let ivl = sobj.ivls[ iidx ]\n          ivl = {\n            num:    (num +1),\n            abr:    null,\n            note:   ivl.note, \n            semis0: ivl.semis, \n            semis:  ivl.semis\n          } \n          if(rootivl === null){\n            rootivl = ivl\n            rootivl.semis = 0\n          }\n          else{\n            ivl.semis -= rootivl.semis0\n            if( ivl.semis < 0 ) ivl.semis += 12\n          }\n          ivl.abr = q.intervals.bySemis( ivl.semis, true ).abr\n          ivls.push( ivl )\n        }\n      \n        let deg = degrees[ii]\n        let match = q.chords.findByIvls( ivls )\n        if(match !== null){\n          if( match.name.indexOf('Major') >= 0) deg = deg.toUpperCase()\n          if( match.name.indexOf('Diminished') >= 0) deg += ''\n          if( match.name.indexOf('Augmented') >= 0) deg += '+'\n        }\n\n        let triad = {\n          root:   sobj.ivls[ii].note,\n          num:    (ii +1),\n          degree: deg,\n          degreeName: sobj.ivls[ii].degName,\n          name:   (match !== null ?match.name :null),\n          abr:    (match !== null ?match.abr :null),\n          ivls:   ivls\n        }\n        result.list.push( triad )\n        // console.log( triad )\n      }\n      return result\n    },\n    byName( scaleName ){\n      for(let scale of q.scales.list){\n        if(scale.name === scaleName || scale.short === scaleName || scale.abr === scaleName)\n          return { ...scale }\n      }\n      return null\n    },\n    obj( root, scaleName ){  //return scale, root and scale intervals\n      let ivls = []\n\n      if(typeof root === 'string')        //else interval object\n        root = q.intervals.byName( root )\n      if(root === null) return null\n\n      let scale = q.scales.byName( scaleName )\n      if(scale === null) return null\n\n      let preferFlats = ( scaleName.indexOf('minor') >= 0 || root.note.indexOf('') >= 0 )\n\n      for(let ivlAbr of scale.intervals){   //generate intervals for scale built on root\n        let ivl = q.intervals.byName( ivlAbr )\n        let note = q.notes.calc( root, ivl, preferFlats )\n        ivl = {\n          ...ivl,\n          abr: ivlAbr,    //abbreviation may differ from one assigned to scale\n          note:note,\n        }\n        ivls.push( ivl )\n      }\n\n      let obj = { \n        ...scale, \n        type:'scale',\n        fullName: root.note +' '+scale.name,\n        shortName: root.note +' '+scale.short,\n        abbrevName: root.note +scale.abr,\n        root: root,\n        ivls: ivls \n      }\n      return obj\n    }\n  },\n\n  semis:{\n    calc(note, octaveNum){   //return number of semitones\n        //assume: ocatveNum range: 0 to infinity\n        //assume: Middle C (C4) == (C,4) == (48 +0) == 48\n        //assume:            C0 == (C,0) == ( 0 +0) ==  0\n        //assume: A440     (A4) == (A,4) == (48 +9) == 57\n        let semis = (octaveNum *12)\n        semis += q.intervals.byName( note ).semis\n        return semis\n    },\n  },\n}\n\n\nq.fretboard.init()\nexport default q","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport abcjsObj from 'abcjs'\n\nclass Abcjs extends PureComponent {\n  uniqueNumber = Date.now() + Math.random()\n\n  renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams) {\n    // const res = abcjsObj.renderAbc(\n    abcjsObj.renderAbc(\n      'abcjs-result-' + this.uniqueNumber,\n      abcNotation,\n      parserParams,\n      engraverParams,\n      renderParams\n    )\n    \n//    return res\n  }\n\n  componentDidMount() {\n    const { abcNotation, parserParams, engraverParams, renderParams } = this.props\n    this.renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams)\n  }\n\n  componentDidUpdate() {\n    const { abcNotation, parserParams, engraverParams, renderParams } = this.props\n    this.renderAbcNotation(abcNotation, parserParams, engraverParams, renderParams)\n  }\n\n  render() {\n    return (\n      <div style={{ width: '100%' }}>\n        <div id={'abcjs-result-' + this.uniqueNumber} style={{ width: '100%' }} />\n      </div>\n    )\n  }\n}\n\nAbcjs.propTypes = {\n  abcNotation: PropTypes.string,\n  parserParams: PropTypes.object,\n  engraverParams: PropTypes.object,\n  renderParams: PropTypes.object,\n}\n\nAbcjs.defaultProps = {\n  abcNotation: '',\n  parserParams: {},\n  engraverParams: { responsive: 'resize' },\n  renderParams: { viewportHorizontal: true },\n}\n\nexport default Abcjs\n","/*\n  FretButton.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by FrePnl.jsx of GuitrJoe app\n\n*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './FretButton.css';\nimport q from \"./guitar_lib.js\";\nimport Abcjs from \"./controls/react-abcjs\"\n\n// sample:\n// <button className='fretButton'>\n//   <span className=spanNote >C\n//     <sub className='subOctave' >octave</sub>\n//   </span>\n//   <sub className='subInterval' >interval</sub>\n// </button>\n\n\nfunction FretButton( props ){\n  // console.log('FretButton', props)\n\n  let {root, nobj, qry} = props\n\n  function buttonClick(event){\n    let btn = event.target\n    if(btn.nodeName !== 'BUTTON'){ \n      btn = btn.parentNode      //span\n      if(btn.nodeName !== 'BUTTON') \n        btn = btn.parentNode    //span span\n    }\n    if(btn.nodeName !== 'BUTTON') return\n    event.stopPropagation()\n\n    if(['fretRoot','noteSelect'].indexOf( qry.rootType ) >= 0  \n    && ['fretRoot','noteSelect'].indexOf( btn.dataset.state ) >= 0\n    && qry.scale === null && qry.chord === null && qry.ivl === null){    //nothing to do, turn off fretRoot state\n\t    props.stateChange( 'fretRoot', null )\n    } else\n    if(qry.rootType === 'fretSelect' && btn.dataset.state === 'fretSelect'\n    && btn.dataset.tab === qry.fretSelect[0].tab){ //hide button\n        // console.log('buttonClick(): stop fretSelect')\n    \t\tprops.stateChange( 'fretSelect', null )\n        return\n    } else\n    if(qry.rootType === 'fretSelect' && props.fretSelectFind( btn.dataset.tab ) >= 0){ //this is a selected fret\n      if(qry.fretSelect.length === 2 )    //one selected fret after this hidden, change to fretRoot\n\t\t    props.stateChange( 'fretRoot', qry.fretSelect[0] )\n      else    //more than two frets selected, deselect this button\n     \t\tprops.stateChange( 'fretSelect', btn.dataset.tab)\n    }\n    else{   //toggle button selected state\n      let selected = Number( btn.dataset.selected )\n      if(selected === 0)\n        btn.dataset.selected = 1\n      else\n      if(selected === 1)\n        btn.dataset.selected = 0\n    }\n  }\n  function btnStyleChange(event){   //toggle formatting of fret button captions\n    // console.log('fretBtnStyleChange', event)\n    event.stopPropagation()\n    \n   if(qry.note === 'All'){\n      if(qry.fretBtnStyle === 'NoteTab')\n   \t  \tprops.stateChange( 'fretBtnStyle', 'NoteAbc' )\n      else\n        props.stateChange( 'fretBtnStyle', 'NoteTab' )\n    }\n    else\n    if(props.qry.fretBtnStyle === 'NoteFirst')\n   \t\tprops.stateChange( 'fretBtnStyle', 'IvlFirst' )\n    else\n    if(props.qry.fretBtnStyle === 'IvlFirst')\n   \t\tprops.stateChange( 'fretBtnStyle', 'IvlAbc' )\n    else\n    if(props.qry.fretBtnStyle === 'IvlAbc')\n   \t\tprops.stateChange( 'fretBtnStyle', 'IvlTab' )\n    else\n   \t\tprops.stateChange( 'fretBtnStyle', 'NoteFirst' )\n  }\n\n  let btnState = '', \n    btnStyle = qry.fretBtnStyle,\n    ivl = nobj.ivl, \n    selected = 0\n    \n    if(ivl === undefined || ivl === null){\n      switch(btnStyle){\n        case 'IvlFirst': btnStyle = 'NoteFirst'; break;\n        case 'IvlAbc': btnStyle = 'NoteAbc'; break;\n        case 'IvlTab': btnStyle = 'NoteTab'; break;\n        default: break; //for React automated testing\n      } \n    }\n\n  //assign format for root note button\n  if(root === 'ALL'){   //user selected All Notes\n    if(qry.octave !== 0 && qry.octave !== nobj.octave)\n      return null      \n    if( ['NoteAbc','NoteTab'].indexOf( qry.fretBtnStyle ) < 0 )\n      btnStyle = 'NoteAbc'\n  }else\n  if(qry.rootType === 'fretRoot'){\n    if(nobj.notes.indexOf( root.note ) >= 0  &&  nobj.semis === root.semis){\n      if(nobj.state === 'chord1')\n        btnState = 'chord0'   //defines fret root is chord root\n      else\n        btnState = qry.rootType\n    }\n  }else\n  if(qry.rootType === 'noteSelect'){\n    if(root.notes.indexOf( nobj.note ) >= 0){\n      if(qry.chord === null)\n        btnState = qry.rootType\n    }\n  }else\n  if(qry.rootType === 'fretSelect'){\n    // if(nobj.ivl.abr === 'P1' && nobj.tab === qry.fretSelect[0].tab){\n    if(nobj.tab === qry.fretSelect[0].tab){\n      btnState = qry.rootType\n    }else\n    if(nobj.fsmatch){\n      btnState = 'fretSelectMatch'\n      if(nobj.notes.indexOf( qry.fretSelectMatch.obj.ivls[0].note ) >= 0) //obj = scale || chord\n        btnState += 1   //fretSelectMatch1 == root note of chord or scale\n    }\n  }\n\n  //button.dataset.state used to apply CSS\n  if(btnState === '' && nobj.state)\n    btnState = nobj.state\n  // overrides calculated state\n  if(nobj.state === 'triad' || nobj.state === 'triad1'\n  || nobj.state === 'invr'   || nobj.state === 'invr1' )  \n    btnState = nobj.state\n  if(qry.noteFilter.indexOf( nobj.note ) >= 0)   // allow overriding roottype because user selected\n    btnState = 'noteFilter'\n\n  //format button caption\n  let btncaption = [], key=0\n  let renderParams = {    //for AbcJs\n    minPadding:5,   //doesn't work\n    paddingtop:0,\n    paddingbottom:0,\n    paddingleft:0,\n    paddingright:0,\n    //responsive: \"resize\",\n    scale:(nobj.octave <= 2 || nobj.octave >= 5 ?0.3 :0.4),\n    staffwidth:18,\n    textboxpadding:0,\n  }\n\n  let note = nobj.note\n  if( note.indexOf('') >= 1 )    //safari does not render  properly\n    note = <span className='btnFlatNote'>{note}</span>\n  else\n    note = <span>{note}</span>\n  \n  //apply button caption style\n  if(btnStyle === 'IvlFirst'){\n    btncaption.push(\n      <span key={++key} className='spanIvl' onClick={buttonClick} >\n        <span key={++key} onClick={buttonClick} >{ivl.abr.substr(0,1)}</span>\n        {ivl.abr.substr(1)}\n      </span>\n    )\n    btncaption.push(\n      <sub key={++key} className='subNote' onClick={btnStyleChange}>{nobj.note}\n          <sub key={++key} className='subOctave' >{nobj.octave}</sub>\n      </sub>\n    )\n  }else\n  if(btnStyle === 'IvlAbc'){\n    btncaption.push(\n      <span key={++key} className='spanIvl' onClick={buttonClick} >\n        <span key={++key} onClick={buttonClick} >{ivl.abr.substr(0,1)}</span>\n        {ivl.abr.substr(1)}\n      </span>\n    )\n    btncaption.push(\n      <sub key={++key} className='ivlabc abc' onClick={btnStyleChange}\n         ><Abcjs key={++key} \n        abcNotation={'K:clef=none\\n y' +q.notes.toAbc( nobj )}\n        renderParams={renderParams} parserParams={{}} engraverParams={{}}\n      /></sub>\n    )\n  } else\n  if(btnStyle === 'IvlTab'){\n    btncaption.push(\n      <span key={++key} className='spanIvl' onClick={buttonClick} >\n        <span key={++key} onClick={buttonClick} >{ivl.abr.substr(0,1)}</span>\n        {ivl.abr.substr(1)}\n      </span>\n    )\n    btncaption.push(\n      <sub key={++key} className='ivltab tab' onClick={btnStyleChange}\n        >{nobj.tab}</sub>\n    )\n  }else\n  if(btnStyle === 'NoteTab'){      \n    btncaption.push(\n      <span key={++key} className='spanNote'  onClick={buttonClick} >{note}\n          <sub key={++key} className='subOctave' onClick={buttonClick} >{nobj.octave}</sub>\n      </span>\n    )\n    btncaption.push(\n      <sub key={++key} className='notetab tab' onClick={btnStyleChange}\n        >{nobj.tab}</sub>\n    )\n  }else\n  if(btnStyle === 'NoteAbc'){\n    btncaption.push(\n      <span key={++key} className='spanNote'  onClick={buttonClick} >{note}\n          <sub key={++key} className='subOctave' onClick={buttonClick} >{nobj.octave}</sub>\n      </span>\n    )\n    btncaption.push(\n      <sub key={++key} className='abc' onClick={btnStyleChange}\n         ><Abcjs key={++key} \n        abcNotation={'K:clef=none\\n y' +q.notes.toAbc( nobj )}\n        renderParams={renderParams} parserParams={{}} engraverParams={{}}\n      /></sub>\n    )\n  } \n  else {  // (btnStyle === 'NoteFirst')\n    btncaption.push(\n      <span key={++key} className='spanNote'  onClick={buttonClick} >{note}\n          <sub key={++key} className='subOctave' onClick={buttonClick} >{nobj.octave}</sub>\n      </span>\n    )\n    if(nobj.ivl){\n      btncaption.push(\n        <sub key={++key} className='subInterval' onClick={btnStyleChange} >{ivl.abr}</sub>\n      )\n    }\n  }\n \n  return (\n    <button key={++key} className='fretButton'  onClick={buttonClick}\n      data-strn={nobj.strgnum} data-fret={nobj.fret}  data-tab={nobj.tab} \n      data-state={btnState} data-selected={selected}\n    >\n      {btncaption}\n    </button>\n  )  \n}\n\nFretButton.propTypes = {\n  root: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object\n  ]),\n  nobj: PropTypes.object,\n  qry:  PropTypes.object,\n  fretSelectFind: PropTypes.func,\n  stateChange: PropTypes.func,\n}\n\nexport default FretButton\n","/*\n  FretPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage activation of fretboard controls for GuitarJoe app\n\n*/\n\nimport React from 'react'\nimport './FretPnl.css';\nimport FretButton from './FretButton.jsx';\nimport q from \"./guitar_lib.js\";\n\nclass FretPnl extends React.Component{\n\n  constructor (props) {\n    super(props)\n    this.fretClick = this.fretClick.bind(this)\n    this.fretFltrClick = this.fretFltrClick.bind(this)\n    this.strgFltrClick = this.strgFltrClick.bind(this)\n  }\n\n  fretClick( event ){\n    let qry = this.props.qry,\n      cell = event.target,\n      strN = Number(cell.dataset.strn), \n      fret = Number(cell.dataset.fret)\n\n    if( isNaN(strN) ){\n      console.log('FretPnl.fretClick() error, bad caller:', cell)\n      return \n    }\n    event.stopPropagation()\n    if(cell.dataset.fretfilter === \"true\")\n      return\n\n    if(strN === 7){\n      strN = 6\n    }else\n    if(strN !== 1 && cell.nodeName === 'TD'){ //calc string to use\n      let  cy = event.clientY,\n        abs = cell.getBoundingClientRect(),\n        top = abs.top,\n        mid = top +(cell.offsetHeight  /2)\n\n      if(cy < mid) strN--\n    }\n\n    if(this.props.strgFiltered( strN ) === true)\n      return\n\n    // console.log('fretPnl.fretClick:', strN, fret, cell.className)\n    let note = q.notes.obj( strN, fret )\n    let btn = document.querySelector( '#Fretboard' +qry.fbid +' .fretButton[data-tab=' +note.tab +']')\n    if(btn !== null){\n      event.target = btn\n      this.buttonClick( event )\n      return\n    } else\n    if(['','noteSelect'].indexOf(qry.rootType) >= 0){\n\t\t  this.props.stateChange( 'fretRoot', note )\n    }else\n    if(qry.rootType === 'fretRoot'){\n\t\t  this.props.stateChange( 'fretSelect', [qry.root, note] )\n    }else\n    if(qry.rootType === 'fretSelect'){\n\t    this.props.stateChange( 'fretSelect', note )\n    }\n  }\n  fretFltrClick( event ){ //toggle state for frets\n    let //qry = this.props.qry,\n      btn = event.currentTarget,\n      fret = Number( btn.dataset.fret )\n\n    event.stopPropagation()\n    // console.log( 'fretFltrClick:', fret, qry.fretFilter )\n    this.props.stateChange( 'fretFilter', fret )\n  }\n  strgFltrClick( event ){\n    let btn = event.currentTarget,\n      strN = btn.dataset.strn\n    this.props.stateChange( 'strgFilter', strN )\n    event.stopPropagation()\n  }  \n  \n  rootFind( nobj ){    //select fret = selected fret\n    let qry = this.props.qry\n    if(qry.rootType !== 'fretRoot') return null\n\n    if(nobj.tab === qry.root.tab){\n      return <FretButton \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    }\n    return null\n  }\n  noteFind( nobj ){    //select all frets with note = selNoteVal\n    let qry = this.props.qry\n    if(qry.rootType !== 'noteSelect') return null\n\n    let idx = nobj.notes.indexOf(qry.note)\n    if(qry.note === '' ||  idx >= 0){\n      if(qry.octave === 0 || qry.octave === nobj.octave){\n        if(qry.note !== '')\n          nobj.note = qry.note\n        // return qq.button( nobj, qry.root  )\n        return <FretButton \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n  }  }\n    return null\n  }\n  fretSelectFind( nobj ){\n    let qry = this.props.qry\n\n    if(qry.rootType !== 'fretSelect') return null\n    if(qry.fretSelect.length === 0) return null\n\n    for(let fso of qry.fretSelect){\n      if(nobj.tab === fso.tab){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = fso.ivl\n          nobj.note = fso.note\n          // return qq.button( nobj, qry.root )\n          return <FretButton \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  fretSelectMatchFind( nobj ){\n    let qry = this.props.qry\n\n    if(qry.rootType !== 'fretSelect') return null\n    if(qry.fretSelectMatch === null) return null\n\n    for(let ivl of qry.fretSelectMatch.obj.ivls){\n      if(nobj.notes.indexOf( ivl.note ) >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = ivl\n          nobj.note = ivl.note\n          if(this.props.fretSelectFind( nobj.tab ) < 0)\n            nobj.fsmatch = true\n          // return qq.button( nobj, qry.root )\n          return <FretButton \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  scaleTriadFind( nobj ){\n    let qry = this.props.qry\n    if(qry.scale === null) return null\n    if(qry.scaleTriadIvls === null) return null\n\n    let ivl = q.intervals.findNote( qry.scaleTriadIvls, nobj )\n    if( ivl === null ) return null\n\n    nobj.note = ivl.note\n    nobj.ivl = ivl\n    nobj.state = 'triad' +(ivl.num === 1 ?1 :'')\n    return <FretButton \n              root={qry.root} nobj={nobj}  qry={qry} \n              fretSelectFind={this.props.fretSelectFind} \n              stateChange={this.props.stateChange} \n           />\n  }\n  octaveFind( nobj ){  //find notes for selected octave\n    let qry = this.props.qry\n    if(qry.note !== '') return\n\n    if(qry.octave === nobj.octave){\n      nobj.ivl = qry.ivl\n      return <FretButton \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    }\n    return null\n  }\n  scaleFind( nobj ){\n    let qry = this.props.qry\n    if(qry.scale === null) return null\n\n    if(qry.rootType === 'fretRoot'){    //exclude frets\n      if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n        return null\n    }\n    for(let ivl of qry.scale.ivls){\n      if( nobj.notes.indexOf(ivl.note) >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = ivl\n          nobj.note = ivl.note\n          // return qq.button( nobj, qry.root )\n          return <FretButton \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  chordFind( nobj ){\n    let qry = this.props.qry\n    if(qry.chord === null) return null\n\n    if(qry.chordInvrNotes !== null){    //inversion format take precedence\n      let inv = this.props.inversionNoteByTab( nobj.tab )\n      if(inv !== null){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.note = inv.note\n          nobj.ivl = inv.invr\n          nobj.state = 'invr' +(inv.invr.num === 1 ?1 :'')\n          return <FretButton \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    if(qry.rootType === 'fretRoot'){    //exclude frets out of range\n      if(q.fretboard.fretInRange(nobj, qry.root) !== true)\n        return null\n    }\n    for(let ivl of qry.chord.ivls){\n      if( nobj.notes.indexOf(ivl.note) >= 0){\n        if(qry.octave === 0 || qry.octave === nobj.octave){\n          nobj.ivl = ivl\n          nobj.note = ivl.note\n          nobj.state = 'chord' +(ivl.abr === 'P1' ?'1' :'')\n          return <FretButton \n                    root={qry.root} nobj={nobj}  qry={qry} \n                    fretSelectFind={this.props.fretSelectFind} \n                    stateChange={this.props.stateChange} \n                  />\n        }\n      }\n    }\n    return null\n  }\n  ivlFind( nobj ){     //select frets matching interval\n    let qry = this.props.qry\n    if(qry.ivl === null) return null\n    \n    let btn = null\n    if( (qry.rootType === 'fretRoot' && nobj.tab === qry.root.tab)\n    ||  (qry.rootType === 'noteSelect' && nobj.notes.indexOf(qry.note) >= 0) ){ //this is the root note object\n      btn = 'root'\n    } else\n    if(qry.rootType === 'fretRoot' && q.fretboard.fretInRange(nobj, qry.root, 4) === true){\n      if( nobj.notes.indexOf(qry.ivl.note) >= 0 )\n        btn = true\n    }else\n    if(qry.rootType === 'noteSelect' && nobj.notes.indexOf(qry.ivl.note) >= 0){\n      btn = true\n    }\n\n    if(btn === 'root'){\n      nobj.ivl = q.intervals.byName('P1')\n      nobj.note = qry.note\n      // btn = qq.button( nobj, qry.root  )\n    }else\n    if(btn === true){\n      if(qry.octave === 0 || qry.octave === nobj.octave){\n        nobj.ivl = qry.ivl\n        nobj.note = qry.ivl.note\n        nobj.state = 'interval'   //new, allow for color coding of intervals\n        // btn =  qq.button( nobj, qry.root  )\n      }\n      else\n        btn = null\n    }\n    if(btn != null)\n      return <FretButton \n                root={qry.root} nobj={nobj}  qry={qry} \n                fretSelectFind={this.props.fretSelectFind} \n                stateChange={this.props.stateChange} \n              />\n    return null\n  }\n\n  buttonFind( nobj ){\n    let qry = this.props.qry\n    let btn = null\n\n    // ordering is critical because it determines which buttons are on top\n    // all modes respect selOctave filter\n\n    //All notes mode\n    if(qry.rootType === 'noteSelect' && this.props.selNoteVal === 'All')\n      btn = <FretButton \n              root={'ALL'} nobj={nobj}  qry={qry} \n              fretSelectFind={this.props.fretSelectFind} \n              stateChange={this.props.stateChange} \n            />\n    //fretSelect mode\n    if(btn === null) btn = this.fretSelectMatchFind( nobj )\n    if(btn === null) btn = this.fretSelectFind( nobj )\n\n    //noteSelect mode\n    if(btn === null) btn = this.ivlFind( nobj )\n    if(btn === null) btn = this.chordFind( nobj )\n    if(btn === null) btn = this.scaleTriadFind( nobj )\n    if(btn === null) btn = this.scaleFind( nobj )\n    if(btn === null){\n      if(qry.rootType === 'fretRoot')\n        btn = this.rootFind( nobj )  //only select the fret clicked\n      else\n      if(qry.rootType === 'noteSelect')\n        btn = this.noteFind( nobj )  //select all frets with note = selNoteVal\n    }\n    if(btn === null) btn = this.octaveFind( nobj )\n    return btn\n  }\n\n  render(){\n    // console.log('fretPnl.render()', this.props)\n    let qry = this.props.qry\n\n    //make table's tr and td\n    let trArray = [],\n      fretMax = q.fretboard.fretMax,    \n      first = this.props.fretFirst,\n      last = this.props.fretLast,\n      ss = ''\n    for (let row = 1; row <= 9; row++) {\n      let frets = []\n      let strN = row -1\n      let strgFltr = this.props.strgFiltered( strN )\n\n      for (let col = 0; col <= fretMax +1; col++) {\n        let tab = '',\n          fretFltr = (qry.fretFilter.indexOf( col ) >= 0)\n\n        let btnStrFltr = null    //create string filter button for fret0 and fretMax\n        if(col === 0 && strN >= 1 && strN <= 6){\n          btnStrFltr=(<div onClick={this.strgFltrClick} data-strn={strN}\n            className={'btnFilter btnStrgFltr btnStrgFltr'+strN}\n           ><div>&diams;</div></div>\n          )\n        }\n\n        if(row === 1){  //top border, fret filter disabled because may not be needed\n          let cls = (col === (fretMax +1) ?'borderRight tdBorder'+col :'tdBorder'+col)\n          let ss = (col === first || col === (fretMax +1) ?' ' :col)\n          if(ss === col && qry.collapsed === true){\n            if([5,7,9,12].indexOf(col) >= 0)\n              ss = <div data-fret={col} className='collapsed' >&nbsp;</div>\n            else\n              ss = ''\n          }\n          frets.push( <td key={col} \n            data-fret={col} data-fretfilter={fretFltr}\n            onMouseDown={this.fretFltrClick} className={cls}>{ss}</td> \n          )\n        }else\n        if(row === 9){  //bottom frame\n\n          if(col === (fretMax +1))    //right bottom corner frame\n            frets.push( <td key={col} className={'borderRight tdBottom col'+col}></td> )\n          else {      //bottom fret frame\n            frets.push(<td key={col} className={'tdBottom col'+col}></td>)\n           }\n\n        }else{   // generate frets with right and left borders\n\n          if(col === fretMax +1){   // right border\n            frets.push( <td key={col} data-strn={strN} data-col={col} className={'borderRight col'+col}></td> )\n          } \n          else{ //fretboard cells\n            let btn = null, stringdiv = null, nobj = null\n\n            if(strN >= 1 && strN <= 6)\n              stringdiv = <div className='stringdiv' onClick={this.fretClick} data-strn={strN} data-fret={col} ></div>\n\n            //process fret button\n            if( strN <= 6\n             && fretFltr === false    //no filter applied to fret\n             && strgFltr === false    //no filter applied to string\n             && col >= first \n             && col <= last){         //filter by fretboard range\n              nobj = q.notes.obj( strN, col )\n              tab = nobj.tab\n              btn = this.buttonFind( nobj )\n            }\n            frets.push(<td key={col} className={'fret fret'+col} onClick={this.fretClick} \n              data-strn={strN} data-fret={col} data-tab={tab} data-fretfilter={fretFltr} >\n              {btnStrFltr}\n              {btn}\n              {stringdiv}\n              <div className='fretbar' onClick={this.fretClick} data-strn={strN} data-fret={col} ></div>\n            </td>)\n           }\n        }\n      }\n\n      if(row === 1) \n        ss = 'frame frameTop'\n      else\n      if(row === 8) \n        ss = 'borderBottom'\n      else\n      if(row === 9) \n        ss = 'frame frameBottom'\n      else{\n        ss = 'strg strg' +(row -1)\n      }\n      trArray.push( <tr key={row} className={ss} data-fltr={strgFltr}>{frets}</tr> )\n    }\n    return (\n      <div className='fretPnlContainer'>\n        <table className='fretPnl'><tbody>\n          {trArray}\n        </tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default FretPnl\n","/*\n  ArrowButton.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - arrow in button frame pointing up or down used to expand/collapse controls\n  - used by to exapnd and collpase controls GuitrJoe app\n*/\nimport React  from 'react';\nimport PropTypes from 'prop-types';\nimport './ArrowButton.css';\n\nfunction ArrowButton( props ){\n\n  let uord =  (props.upOrDn === '' ?'dn' :props.upOrDn.toLowerCase())\n  // console.log('ArrowButton Init', uord, props)\n\n  function onClick(){\n    let newud = (uord === 'up' ?'dn' :'up')\n    // console.log('ArrowButton.onClick', newud )\n    if(props.onChange !== null)\n      props.onChange( newud )\n  }\n\n  let className = 'ArrowBtn ' +(uord === 'up' ?'ArrowBtnUp' :'ArrowBtnDn')\n  \n  let width = (props.width === '' ? '1em' :props.width)\n  let dstyle = { height:width, width:width}\n  let astyle = { fontSize:'calc( '+width+' * 0.8 )' }\n  let arrow = <div style={astyle} >&#10148;</div>\n\n  return (\n    <div className={className} style={dstyle} onClick={onClick} title={props.title} > \n      {arrow}\n    </div>\n  )  \n\n}\n\nArrowButton.propTypes = {\n  ArrowUpOrDn: PropTypes.string,\n  title: PropTypes.string,\n  width: PropTypes.string,\n  onChange: PropTypes.func,\n}\nArrowButton.defaultProps = {\n  upOrDn: 'up',     //up or dn\n  title: 'Click to collapse',\n  onChange: null,\n  width:'1em',\n}\n\nexport default ArrowButton\n\n","/*\n  ArrowPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by QueryPnl.jsx of GuitrJoe app\n\n*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { motion } from \"framer-motion\"\n\nimport ArrowButton from './ArrowButton'\nimport   './ArrowPnl.css'\n\nfunction ArrowPnl( props ){\n\n  let isOpen = ( props.arrowUpOrDn === 'up' )\n  let keyidx = 0\n\n  function key(){ return 'ArrowPanel' +( ++keyidx ) }\n  function onChange(){\n    let val = !isOpen\n    if(props.onChange) props.onChange( val )\n  }\n\n  return (\n    <div key={key()} className='ArrowPnl' >\n      <div key={key()} className='ArrowPnlCaption' >\n        <ArrowButton key={key()} \n          upOrDn={isOpen === true ?'up' :'dn'} \n          width={props.arrowWidth}\n          title={props.arrowTitle} \n          onChange={onChange}\n        />\n        {props.caption}\n      </div>\n      <motion.div \n        animate={isOpen ? \"open\" : \"closed\"}\n        variants={{\n          open: { height: 'auto' },\n          closed: { height: '0px' },\n        }}\n        transition={{\n          type: \"spring\", restSpeed:150, damping: 30,\n          duration:0.2\n        }}\n        \n        key={key()} \n        className='ArrowPnlItems' \n       >\n        {props.items}\n      </motion.div>\n    </div>\n  )\n\n}\n\nArrowPnl.propTypes = {\n  caption: PropTypes.array,   //array of jsx\n  items: PropTypes.array,     //array of jsx\n\n  arrowUpOrDn: PropTypes.string,\n  arrowTitle: PropTypes.string,\n  arrowWidth: PropTypes.string,\n\n  onChange: PropTypes.func,\n}\nArrowPnl.defaultProps = {\n  caption: [<span>'ArrowPnl Caption'</span>],\n  items: null,\n  \n  arrowUpOrDn: 'up',     //up or dn\n  arrowTitle: 'Click to collapse',\n  arrowWidth:'1em',\n\n  onChange: null,\n}\n\nexport default ArrowPnl\n","/*\n  InfoPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - used by QueryPnl.jsx of GuitrJoe app\n\n*/\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ArrowPnl from './controls/ArrowPnl'\nimport q from \"./guitar_lib.js\";\n\nfunction InfoPnl( props ){\n  let {qry} = props\n\n  function fsChordClick( event ){\n    let btn = event.target\n    // console.log('fsChordClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      props.stateChange( 'fretSelectMatch', null )\n      props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)    //turn off selected match\n        props.stateChange( 'fretSelectMatch', null )\n      else\n        props.stateChange( 'fretSelectMatch', {type:'chord', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  function fsScaleClick( event ){\n    let btn = event.target\n    // console.log('fsScaleClick', btn.dataset.note, btn.dataset.abr)\n\n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      props.stateChange( 'noteFilter', 'clear' )\n    }\n    else{   //default operation\n      if(qry.fretSelectMatch != null \n      && qry.fretSelectMatch.note === btn.dataset.note && qry.fretSelectMatch.abr === btn.dataset.abr)\n        props.stateChange( 'fretSelectMatch', null )   //turn off selected match\n      else\n        props.stateChange( 'fretSelectMatch', {type:'scale', note:btn.dataset.note, abr:btn.dataset.abr} )\n    }\n  }\n  function infoItemClick(event){\n    event.stopPropagation()\n\n    let btn = event.target   \n    if(btn.dataset.selected === 'label'){    //user clicked the label\n      props.stateChange( 'fretSelectMatch', null )\n      props.stateChange( 'chordInvrSelected', null )\n      props.stateChange( 'noteFilter', 'clear' )\n      props.stateChange( 'scaleTriadSelected', null )\n    }\n    else {   //default noteFilter: highlight all FretButtons with selected note\n      if(btn.className !== 'ivl')\n        btn = btn.parentNode\n      \n      let note = btn.dataset.note     \n      if(typeof note === 'string')\n        props.stateChange( 'noteFilter', note )\n    }\n  }\n  function invrLabelClick(event){\n    event.stopPropagation()\n    let btn = event.target   \n    props.stateChange( 'chordInvrSelected', btn.dataset.invr )\n  }\n  function triadLabelClick(event){\n    event.stopPropagation()\n    let btn = event.target   \n    props.stateChange( 'scaleTriadSelected', btn.dataset.scaletriad )\n  }\n  \n  function toggleFretSelectMatchDisplay(){\n    let ss = (qry.fretSelectMatchDisplay === 'Show' ?'Hide' :'Show')\n    props.stateChange( 'fretSelectMatchDisplay', ss)\n  }\n  function toggleScaleTriadDisplay(){\n    let ss = (qry.scaleTriadDisplay === 'Show' ?'Hide' :'Show')\n    props.stateChange( 'scaleTriadDisplay', ss)\n  }\n  function toggleChordInvrDisplay(){\n    let ss = (qry.chordInvrDisplay === 'Show' ?'Hide' :'Show')\n    props.stateChange( 'chordInvrDisplay', ss)\n  }\n\n  function drawFretSelectMatches( html, key ){    //push matching chords and scales onto html[]\n    let selected = 0\n    \n    if(qry.fretSelect.length < 2) return null  \n\n    let noblist = qry.fretSelect.slice()\n    let last = null\n    noblist = noblist.filter(function(a){   //filter duplicate notes\n      if(last != null && last.notes.indexOf( a.note ) >= 0) return null\n      last = a\n      return a\n    })\n\n    //test chords for matching notes\n    let list = []\n    let lastkey = key\n    let lastname = null\n    last = null\n    for(let chord of q.chords.list){    \n\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        let ivls = q.chords.obj( iobj.note, chord.name).ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true)\n         list.push( {note:iobj.note, chord:chord} )\n      }\n    }\n\n    for(let ob of list){    //write matching chords\n      let chord = ob.chord\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={fsChordClick}\n        >Matching chords:&nbsp;</span> )\n      }\n\n      selected = 0\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === chord.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== chord.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = chord.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={fsChordClick} title={ob.note +' ' +chord.name}\n        data-note={ob.note} data-abr={chord.abr} data-selected={selected} \n        >&#8200;{ob.note}&#8239;{chord.abr}&#8200;</span> \n      )\n    }\n\n    //test scales for matching notes\n    list = []\n    lastkey = key\n    lastname = null\n    last = null\n    // for(let scale of q.scales.list){   ==> disabled because most scales are not necessary for this use\n    for(let scaleName of ['Major','Minor','Pen.Maj','Pen.min','Blues7','Blues6' /*,'Dbl.Hrm'*/]){\n      //can optimize by caching related minor scales when major found: \n      // Major:Nat.min; Pent Maj:Pen.min,Blues7,Blues6; Dbl.Hrm:Gypsy\n      for(let iobj of q.intervals.list){  //iterate notes\n        if(last != null && last.semis === iobj.semis) continue\n        if(iobj.semis === 12) continue    //skip octave\n        last = iobj\n\n        // let ivls = q.scales.obj( iobj.note, scale.name).ivls    \n        let scale = q.scales.obj( iobj.note, scaleName )\n        let ivls = scale.ivls    \n  \t\t  let result = q.notes.match( ivls, noblist)\n\n       if(result === true) \n         list.push( {note:iobj.note, scale:scale} )\n      }\n    }\n\n    for(let ob of list){    //write matching scales\n      selected = 0\n      let scale = ob.scale\n\n      if(lastkey === key){\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        html.push( <span key={++key} className='propName'\n          data-selected='label' onClick={fsScaleClick}\n        >Matching scales:&nbsp;</span> )\n      }\n\n      if(qry.fretSelectMatch != null\n      && qry.fretSelectMatch.note === ob.note\n      && qry.fretSelectMatch.abr === scale.abr) selected = 'fretSelectMatch'\n\n      if(lastname !== null && lastname !== scale.name)\n        html.push( <i key={++key} > &mdash; </i> )\n      lastname = scale.name\n\n      html.push( \n        <span key={++key} className='ivl' onClick={fsScaleClick} title={ob.note +' ' +scale.name}\n        data-note={ob.note} data-abr={scale.abr} data-selected={selected} \n        > &#8200;{ob.note}&#8239;{scale.short}&#8200;</span> \n      )\n    }\n\n    return key\n  }\n\n\n  let selected = 0, html = [], key=0, lastkey=null\n  let arrowUord, arrowTitle, arrowFunc, htmlCaption = [], htmlItems = []    //for ArrowPnl\n\n  if(qry.rootType === 'fretSelect'){    \n      arrowUord = (qry.fretSelectMatchDisplay === 'Show' ?'up' :'dn')\n      arrowTitle = 'Show/hide matching chords and scales'\n      arrowFunc = toggleFretSelectMatchDisplay\n      htmlCaption = []\n      htmlItems = []\n\n      htmlCaption.push( \n        <span key={++key} className='propName' onClick={infoItemClick} data-selected='label'>{\n          'Fret select: '\n        }</span> \n      )\n\n      let last = null\n      qry.fretSelect.forEach( nobj => {\n        if(last && last.note === nobj.note) return\n\n        if(qry.noteFilter.indexOf( nobj.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n        \n        htmlCaption.push( \n          <span key={++key} className='ivl' onClick={infoItemClick}\n            data-note={nobj.note} data-selected={selected}\n            >&nbsp;{nobj.note} <sub>{nobj.ivl.abr}</sub> \n          </span> \n        )\n        last = nobj\n      })\n\n      if(qry.fretSelectMatch === null){    //no selected chord or scale to draw\n          htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          htmlItems.push( <span key={++key} className='propName'\n           data-selected='label' onClick={infoItemClick}\n          > &nbsp;</span> )\n      }\n      else{    //draw user select chord or scale match\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        htmlItems.push( \n          <span key={++key} className='propName'\n            data-selected='label' onClick={infoItemClick}\n            >Selected, {qry.fretSelectMatch.obj.fullName}:&nbsp;\n          </span> \n        )\n\n        for(let ivl of qry.fretSelectMatch.obj.ivls){   \n          if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n          else selected = 0\n\n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={infoItemClick}\n              data-note={ivl.note} data-selected={selected} >\n              &nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n            </span> \n          )\n        }\n\n      }\n      key = drawFretSelectMatches( htmlItems, key )\n\n      html.push(<ArrowPnl \n        key={++key} \n        caption={htmlCaption}\n        items={htmlItems}\n\n        arrowUpOrDn={arrowUord} \n        arrowWidth='1em' \n        arrowTitle={arrowTitle} \n\n        onChange={arrowFunc}\n      />)\n  } else\n  if(qry.rootType === 'noteSelect' && props.selNoteVal === 'All'){    //special case\n    html.push( <span key={++key} className='propName'\n       data-selected='label' onClick={infoItemClick}\n      >{'All Notes'}</span> )\n\n    if(qry.octave !== 0){\n      html.push( <span key={++key} className='ivl'>{': Octave '}{qry.octave} </span> )\n    }\n  }\n  else{   //draw scale, chord and interval labels and notes\n    lastkey = key\n\n    if(qry.scale !== null){\n      arrowUord = (qry.scaleTriadDisplay === 'Show' ?'up' :'dn')\n      arrowTitle = 'Show/hide scale degree triads'\n      arrowFunc = toggleScaleTriadDisplay\n      htmlCaption = []\n      htmlItems = []\n\n      htmlCaption.push( \n        <span key={++key} className='propName' onClick={infoItemClick} data-selected='label' >\n          {qry.root.note +' ' +qry.scale.name +': '}\n        </span> \n      )\n      qry.scale.ivls.forEach( ivl => {\n        if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n        \n        htmlCaption.push(\n          <span key={++key} className='ivl' onClick={infoItemClick} \n            data-note={ivl.note} data-selected={selected}\n          >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n          </span> \n        )\n      })\n\n      // if(qry.scaleTriads !== null && qry.scaleTriadDisplay === 'Show'){   // draw scale degree triads\n      if( qry.scaleTriads !== null ){   // draw scale degree triads\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n        htmlItems.push( \n          <span key={++key} className='propName' onClick={infoItemClick} data-selected='label' >{ \n            qry.root.note +' ' +qry.scale.abr +' Scale Degree Triads:'\n          }</span> \n        )\n\n        qry.scaleTriads.list.forEach( triad => {\n          htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          \n          if( qry.scaleTriadSelected === triad.num ) selected = 'triad'\n          else selected = 0\n          let ss = (triad.abr !== null ?triad.abr :'')\n          \n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={triadLabelClick}\n             data-scaletriad={triad.num} data-selected={selected} >{\n              triad.degree +'. ' + triad.root +ss +': '\n            }</span> \n          )\n\n          triad.ivls.forEach( ivl => {\n            if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n            else selected = 0\n\n            htmlItems.push( \n              <span key={++key} className='ivl' onClick={infoItemClick}\n               data-note={ivl.note} data-selected={selected}\n              >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n              </span>\n            )\n          })\n        })\n      }\n\n      html.push(<ArrowPnl \n        key={++key} \n        caption={htmlCaption}\n        items={htmlItems}\n\n        arrowUpOrDn={arrowUord} \n        arrowWidth='1em' \n        arrowTitle={arrowTitle} \n\n        onChange={arrowFunc}\n      />)\n    }\n    if(qry.chord !== null){\n      arrowUord = (qry.chordInvrDisplay === 'Show' ?'up' :'dn')\n      arrowTitle = 'Show/hide inversions'\n      arrowFunc = toggleChordInvrDisplay\n      htmlCaption = []\n      htmlItems = []\n\n      htmlCaption.push( \n        <span key={++key} className='propName' onClick={infoItemClick} data-selected='label'>\n          {qry.root.note \n            // +(qry.rootType === 'fretRoot' ?qry.root.octave :'')\n            +' ' +qry.chord.name +': '}\n        </span> \n      )\n\n      qry.chord.ivls.forEach( ivl => {\n        if(qry.noteFilter.indexOf( ivl.note ) >= 0) selected = 'noteFilter'\n        else selected = 0\n\n        htmlCaption.push( \n          <span key={++key} className='ivl' onClick={infoItemClick} \n            data-note={ivl.note} data-selected={selected}\n          >&nbsp;{ivl.note} <sub>{ivl.abr}</sub> \n          </span> \n        )\n      })\n\n      // if(qry.inversions !== null && qry.chordInvrDisplay === 'Show'){    //draw inversions for major chords\n      if( qry.inversions !== null ){    //draw inversions for major chords\n        let invrs = qry.inversions\n        htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n\n        htmlItems.push( \n          <span key={++key} className='propName' onClick={infoItemClick}\n            data-selected='label'>{\n            invrs.root \n            +(qry.rootType === 'fretRoot' ?qry.root.octave +' ' :'')\n            +qry.chord.abr +' Inversions:'\n           }</span> \n         )\n\n        for(let pos in invrs.positions){\n          let pobj = invrs.positions[ pos ]\n          selected = (qry.chordInvrSelected === pos ?'invr' :'')\n          htmlItems.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n          htmlItems.push( \n            <span key={++key} className='ivl' onClick={invrLabelClick}\n             data-selected={selected} data-invr={pos}>{\n              pos +' Position: '\n            }</span> \n          )\n          for(let num in pobj){\n            let iobj = pobj[num]\n            let octave = ([0,1].indexOf(iobj.octave) >= 0 ?'' :iobj.octave)\n            if(qry.noteFilter.indexOf( iobj.note ) >= 0) selected = 'noteFilter'\n            else selected = 0\n\n            htmlItems.push( \n              <span key={++key} className='ivl' onClick={infoItemClick}\n               data-note={iobj.note} data-selected={selected}\n              >&nbsp;{iobj.note +octave} <sub>{iobj.abr}</sub> \n              </span>\n            )\n          }\n        }\n      }\n\n      html.push(<ArrowPnl \n        key={++key} \n        caption={htmlCaption}\n        items={htmlItems}\n\n        arrowUpOrDn={arrowUord} \n        arrowWidth='1em' \n        arrowTitle={arrowTitle} \n\n        onChange={arrowFunc}\n      />)\n    }\n    if(qry.ivl !== null){\n      if(qry.noteFilter.indexOf( qry.ivl.note ) >= 0) selected = 'noteFilter'\n      else selected = 0\n      \n      if(lastkey !== key)\n        html.push( <div key={++key} className='lineBreak'>&nbsp; </div>)\n\n      html.push( <span key={++key} className='propName'\n       data-selected='label' onClick={infoItemClick}\n      >{qry.note \n        +(qry.rootType === 'fretRoot' ?qry.root.octave :'')\n        +' + ' \n        +qry.ivl.name +' interval:'\n       }</span> )\n  \n      html.push( <span key={++key} className='ivl' onClick={infoItemClick}\n        data-note={qry.ivl.note} data-selected={selected}\n      >&nbsp;{qry.ivl.note}<sub>{qry.ivl.abr}</sub></span> )\n    }\n  }\n  \n\n  if(html.length === 0) return null\n  return (\n    <div className='infoPnl' >\n       <div className='infoDiv'>\n         {html}\n       </div>\n    </div>\n  )      \n}\n\nInfoPnl.propTypes = {\n  qry: PropTypes.object,\n  selNoteVal: PropTypes.string,\n  stateChange: PropTypes.func,\n}\n\nexport default InfoPnl\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 64 64\",\n    x: \"0px\",\n    y: \"0px\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"#ffffff\",\n    stroke: \"#0006\",\n    strokeWidth: \"1px\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,23v-4a2,2,0,1,0,0,4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,24V18.038L47.967,18H32.033L32,18.038V25a7.979,7.979,0,0,0,3.556,6.648l.124.078a8.078,8.078,0,0,0,8.762-.076A7.982,7.982,0,0,0,48,25ZM35.5,22A1.5,1.5,0,1,1,37,20.5,1.5,1.5,0,0,1,35.5,22Zm3.361,6H37V26h1.861a7.445,7.445,0,0,0,3.635-.864L43.5,26.864A9.353,9.353,0,0,1,38.861,28ZM44.5,22A1.5,1.5,0,1,1,46,20.5,1.5,1.5,0,0,1,44.5,22Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"17.279 13 18 10.838 18 4 13 4 13 10.838 13.721 13 17.279 13\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17,35.226V15H14V35.226A5.657,5.657,0,0,1,17,35.226Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M50,19v4a2,2,0,0,0,0-4Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48,11.41v-.021q0-.66-.034-1.324c0-.022,0-.043,0-.065H32.038c0,.022,0,.044,0,.066-.022.441-.033.883-.034,1.323V12H48Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31,16H49a3.006,3.006,0,0,0,2.829-2H28.171A3.006,3.006,0,0,0,31,16Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M47.613,6.793A3.329,3.329,0,0,0,44.32,4a3.357,3.357,0,0,0-2.781,1.489,1.853,1.853,0,0,1-3.076,0A3.359,3.359,0,0,0,35.68,4a3.33,3.33,0,0,0-3.292,2.79c-.067.4-.1.806-.154,1.21H47.766C47.716,7.6,47.679,7.19,47.613,6.793Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M40,35a9.941,9.941,0,0,1-4-.847V36.17a2,2,0,0,1-1.637,1.963l-1.188.224.383,1.576a6.629,6.629,0,0,0,12.884,0l.383-1.576-1.19-.224A2,2,0,0,1,44,36.17V34.147A9.946,9.946,0,0,1,40,35Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18,57V56H11a1,1,0,0,1-1-1V51a1,1,0,0,1,1-1h7V45.4a5.495,5.495,0,0,1-6-9.131V29.151a5.078,5.078,0,0,0-3.991,4.606,4.891,4.891,0,0,0,.041.926,12.5,12.5,0,0,1-2.032,9.29A9.98,9.98,0,0,0,4,50.3,10.262,10.262,0,0,0,14.35,60h2.3a10.328,10.328,0,0,0,1.8-.161A4.013,4.013,0,0,1,18,58Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.7,58H20a1.958,1.958,0,0,0,.814,1.608A2.01,2.01,0,0,0,22,60h4a1.006,1.006,0,0,1-.555-.168Z\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"28 60 28.017 59.998 26 60 28 60\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"53.303 51 60 51 60 49 56.303 49 53.303 51\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M59.941,43.492c-.005-.031-.013-.062-.018-.093a3.991,3.991,0,0,0-.142-.523c-.025-.069-.05-.137-.078-.2a3.814,3.814,0,0,0-.239-.509h0a3.982,3.982,0,0,0-.377-.54c-.014-.018-.03-.034-.045-.051a4.006,4.006,0,0,0-.914-.786c-.06-.038-.12-.075-.18-.108a3.871,3.871,0,0,0-.511-.245l-.041-.017a4.017,4.017,0,0,0-.67-.186l-7.941-1.466-.4,1.643a8.629,8.629,0,0,1-16.772,0l-.4-1.643-7.941,1.466a3.962,3.962,0,0,0-1.248.461c-.044.025-.087.051-.132.079a3.953,3.953,0,0,0-.388.277c-.063.051-.125.1-.184.156-.1.09-.191.186-.28.284-.059.065-.118.13-.173.2a4,4,0,0,0-.576,1c-.025.062-.049.125-.071.189a3.913,3.913,0,0,0-.158.583v0a4.035,4.035,0,0,0-.063.708V47h4a1.006,1.006,0,0,1,.555.168L30.3,51H49.7l5.748-3.832A1.006,1.006,0,0,1,56,47h4V44.162A4.012,4.012,0,0,0,59.941,43.492Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30,53a1.006,1.006,0,0,1-.555-.168L23.7,49H20v7h3a1.006,1.006,0,0,1,.555.168L26.3,58H32l20.1,2.005L58,60a2,2,0,0,0,2-2V53H30Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.448,37.594a3.542,3.542,0,0,0-3.893,0,3.492,3.492,0,1,0,4.619,5.133l.012-.059a.716.716,0,0,1,.023-.1c.028-.1.077-.2.11-.293.042-.127.089-.251.14-.374.038-.092.06-.184.1-.277.079-.164.158-.311.238-.451l0-.01c.053-.093.109-.174.163-.257A3.571,3.571,0,0,0,19,40.5,3.469,3.469,0,0,0,17.448,37.594Z\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 12,\n    y: 52,\n    width: 6,\n    height: 2\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.134,38.906c.094-.051.18-.119.276-.164l.447-.192a3.5,3.5,0,0,1,.549-.175,3.424,3.424,0,0,1,.462-.11,15.6,15.6,0,0,1,.081-3.578,4.84,4.84,0,0,0,.042-.926A5.079,5.079,0,0,0,19,29.151v7.113a5.445,5.445,0,0,1,1.815,2.825C20.919,39.024,21.025,38.965,21.134,38.906Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.97fcb56e.svg\";\nexport { ForwardRef as ReactComponent };","/*\n  QueryPnl.jsx\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - manage query controls for GuitarJoe app\n\n*/\nimport React from 'react'\n\nimport './Fretboard.css';\nimport InfoPnl from \"./InfoPnl\"\nimport ArrowButton from './controls/ArrowButton'\nimport q from \"./guitar_lib.js\"\n\n\nclass QueryPnl extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this.btnDupeClick = this.btnDupeClick.bind(this)\n    this.btnDelClick = this.btnDelClick.bind(this)\n\n    this.last = {}    //store last query params to allow reset via label.click\n    this.selLabelClick = this.selLabelClick.bind(this)\n    this.selChordChange = this.selChordChange.bind(this)\n    this.btnClearClick = this.btnClearClick.bind(this)\n    this.btnCollapseClick = this.btnCollapseClick.bind(this)\n    this.selIntervalChange = this.selIntervalChange.bind(this)\n    this.selNoteChange = this.selNoteChange.bind(this)\n    this.selOctaveChange = this.selOctaveChange.bind(this)\n    this.selScaleChange = this.selScaleChange.bind(this)\n  }\n\n  //event handlers\n  btnCollapseClick(){\n    // default, works:\n    let val = !this.props.qry.collapsed\n    this.props.stateChange( 'collapsed', val )\n  }\n  btnClearClick(){\n    // this.props.dispatch({ type:\"FretboardActions/fretFirstUpdate\", payload:'' })\n    this.props.reset()\n  }\n  btnDelClick(){\n    this.props.remove()\n  }\n  btnDupeClick(){\n    this.props.duplicate()\n  }\n  selLabelClick( event ){     //reset param to off value\n    let qry = this.props.qry,\n      lbl = event.target,\n      val = lbl.dataset.selected\n    // console.log('last', this.last)\n    if(val === 'true'){\n      if(lbl.dataset.type === 'note'){\n        if(qry.rootType === '') return\n        \n        this.last['rootType'] = qry.rootType\n        this.last['root'] = qry.root\n        if(this.last['rootType'] === 'noteSelect')\n          this.props.stateChange( 'selNoteVal', '' )\n        if(this.last['rootType'] === 'fretRoot')\n          this.props.stateChange( 'fretRoot', null )\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(qry.chord === null) return\n        this.last['chordName'] = qry.chord.name\n        this.props.stateChange( 'chordName', '' )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(qry.scale === null) return\n        this.last['scaleName'] = qry.scale.name\n        this.props.stateChange( 'scaleName', '' )\n      }else\n      if(lbl.dataset.type === 'octave'){\n        this.last['octave'] = qry.octave\n        this.props.stateChange( 'octave', 0 )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        this.last['ivlName'] = this.props.ivlName\n        this.props.stateChange( 'ivlName', '' )\n      }\n    }\n    else{   //allow toggling param on and off\n      if(lbl.dataset.type === 'note'){\n        if( !this.last.rootType ) return\n        if(this.last.rootType === 'noteSelect'){\n          if(this.last['root'] !== null)\n            this.props.stateChange( 'selNoteVal', this.last['root'].note )\n        } else\n        if(this.last.rootType === 'fretRoot'){\n          if(this.last['root'] !== null)\n            this.props.stateChange( 'fretRoot', this.last['root'] )\n        }\n      }else\n      if(lbl.dataset.type === 'chord'){\n        if(this.last['chordName'] && this.last['chordName'] !== '')\n          this.props.stateChange( 'chordName', this.last['chordName'] )\n      }else\n      if(lbl.dataset.type === 'scale'){\n        if(this.last['scaleName'] && this.last['scaleName'] !== '')\n          this.props.stateChange( 'scaleName', this.last['scaleName'] )\n      }else\n      if(lbl.dataset.type === 'octave'){\n        if(this.last['octave'] && this.last['octave'] !== '')\n          this.props.stateChange( 'octave', this.last['octave'] )\n      }else\n      if(lbl.dataset.type === 'ivlName'){\n        if(this.last['ivlName'] && this.last['ivlName'] !== '')\n          this.props.stateChange( 'ivlName', this.last['ivlName'] )\n      }\n    }\n  }\n  selNoteChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'selNoteVal', val )\n    //   this.props.dispatch({ type:\"FretboardActions/semisUpdate\", val })\n  }\n  selOctaveChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    if(val === '')\n      this.props.stateChange( 'octave', 0 )\n    else\n      this.props.stateChange( 'octave', Number(val) )\n  }\n  selIntervalChange( event ){\n    let sel = event.target,\n      opt = sel.options[sel.selectedIndex],\n      abr = opt.dataset.abr\n    this.props.stateChange( 'ivlName', abr )\n  }\n  selChordChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'chordName', val )\n  }\n  selScaleChange( event ){\n    let sel = event.target,\n      val = sel.options[sel.selectedIndex].text\n    this.props.stateChange( 'scaleName', val )\n  }\n\n  // draw controls\n  drawSelNote(){\n    let qry = this.props.qry,\n      list = [<option key='' ></option>,<option key='999' >All</option>]\n    for(let ii=0; ii < q.notes.list.length; ii++){\n      let note = q.notes.list[ii]\n      list.push(<option key={ii} >{note}</option>)\n    }\n\n    let note = (qry.note === null ?'' :qry.note)\n    return (\n      <div className='dataPnl pnlNote'>\n        <label data-selected={note !== ''} data-type='note' onClick={this.selLabelClick} >Note</label>\n        <select value={note} className='selNote' onChange={this.selNoteChange} >{list}</select>\n      </div>\n    )\n  }\n  drawSelOctave(){\n    let qry = this.props.qry,\n      oct = qry.octave,\n      omin = 0, omax = 0,\n      list = [<option key={999} ></option>]\n\n    omin = q.notes.obj(6, 0).octave\n    omax = q.notes.obj(1, q.fretboard.fretMax).octave\n\n    for(let ii = omax; ii >= omin; ii--){\n      list.push(<option key={ii} >{ii}</option>)\n    }\n    return (\n      <div className='dataPnl pnlOctave'>\n        <label data-selected={oct !== 0} data-type='octave' onClick={this.selLabelClick} >Octave</label>\n        <select value={oct} className='selOctave' onChange={this.selOctaveChange}>\n           {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelScale(){\n    let selected = this.props.scaleName,\n      ii=0, list = [<option key='aaa'></option>]\n    for(let scale of q.scales.list){\n      list.push(<option key={++ii} >{scale.name}</option>)\n    }\n    return (\n      <div className='dataPnl pnlScale'>\n        <label data-selected={selected !== ''} data-type='scale' onClick={this.selLabelClick} >Scale</label>\n        <select value={selected} className='selScale' onChange={this.selScaleChange} >\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelChord(){\n    let ii = 0,\n      selected = this.props.chordName, \n      datastate = '',\n      list = [<option key='aaa'></option>]\n    for(let chd of q.chords.list){\n      list.push(<option key={++ii} >{chd.name}</option>)\n    }\n    if(selected !== '') datastate = 'chord'\n    return (\n      <div className='dataPnl pnlChord'>\n        <label data-selected={selected !== ''} data-type='chord' onClick={this.selLabelClick} >Chord</label>\n        <select value={selected} className='selChord' onChange={this.selChordChange} \n         data-state={datastate}>\n          {list}\n        </select>      \n      </div>\n    )\n  }\n  drawSelInterval(){\n    let qry = this.props.qry,\n      list = [<option key='aaa' ></option>],\n      ii = 0, selected = '' , datastate = ''\n    for(let ivl of q.intervals.list){\n      if(ivl.semis === 0) continue\n      if(ivl.semis === 12) continue\n      // if(ivl.abr === last) continue  should be unique\n      let html = `${ivl.name} (${ivl.abr}, ${ivl.semis})`\n      list.push(<option key={++ii} data-abr={ivl.abr} >{html}</option>)\n      if(qry.ivl !== null && selected === '' && qry.ivl.abr === ivl.abr)\n        selected = html\n      // last = ivl.abr\n    }\n    if(selected !== '') datastate = 'interval'\n    return (\n      <div className='dataPnl pnlInterval' >\n        <label data-selected={selected !== ''} onClick={this.selLabelClick} \n          data-type='ivlName' >Interval</label>\n        <select value={selected} className='selInterval' title='Intervals sorted by semis-tones'\n          data-state={datastate} onChange={this.selIntervalChange} \n        >\n          {list}\n        </select>      \n      </div>\n    )\n  }  \n\n  render(){\n    // console.log('queryPnl.render()', this.props)\n    let qry = this.props.qry\n    let qryBtnClass = (qry.collapsed ?'qryBtnSmall' :'qryBtn')\n    let qryDisplayClass = (qry.collapsed ?'queryPnlHide' :'queryPnlShow')\n \n    let arrowUord = (qry.collapsed ?'dn' :'up')\n    let arrowTitle = (qry.collapsed ?'Show Query panel' :'Hide Query panel')\n    let arrowWidth = (qry.collapsed ?'1.5em' :'2em')\n\n    let selNote = null\n    let selOct = null\n    let selInt = null\n    let selScale = null\n    let selChord = null\n    if(qry.rootType !== 'fretSelect') { //optimization\n      selNote = this.drawSelNote()\n      selOct = this.drawSelOctave()\n      selInt = this.drawSelInterval()\n      selScale = this.drawSelScale()\n      selChord = this.drawSelChord()\n    }\n\n    return (\n      <div className={'queryPnl '+qryDisplayClass} >\n        <table className='tbQuery' ><tbody><tr>\n        <td className='tdQryBtnsLeft'>\n           <ArrowButton upOrDn={arrowUord} width={arrowWidth} title={arrowTitle} onChange={this.btnCollapseClick}/>\n        </td><td className='tdQryContent'>\n\n          <div className='queryControls' data-roottype={qry.rootType} >\n            {selNote}\n            {selOct}\n            {selScale}\n            {selChord}\n            {selInt}\n          </div>\n\n          <InfoPnl \n            qry={qry} \n            selNoteVal={this.props.selNoteVal}\n            stateChange={this.props.stateChange}\n           />\n        </td><td className='tdQryBtnsRight'>\n            <div className={qryBtnClass +' qryBtnClear'} onClick={this.btnClearClick} title='Reset query controls'>&#8635;</div>\n            <div className={qryBtnClass +' qryBtnDupe'} onClick={this.btnDupeClick} title='Duplicate fretboard' >&#10010;</div>\n            { qry.fbid === 0 ?null\n              :<div className={qryBtnClass +' qryBtnDel'} onClick={this.btnDelClick} title='Remove this fretboard' >&#10000;</div>\n            }\n        </td></tr></tbody></table>\n      </div>\n    )\n  }\n}\n\nexport default QueryPnl\n","/*\nFretboard.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - top level container for fretboard controls of GuitrJoe app\n  - store shared state for FretPnl.js and QueryPnl.js\n\n*/\n\nimport React from 'react';\n\nimport FretPnl from \"./FretPnl\";\nimport QueryPnl from \"./QueryPnl\";\nimport q from \"./guitar_lib.js\";\nimport './Fretboard.css';\n\nclass Fretboard extends React.Component{\n\n  constructor (props) {\n    console.log('Fretboard.constructor()', props)\n    super(props)\n    this.qry = null\n    //keep state private to isolate from children\n    this.state = {\n\t\t\tfbid:(props.fbid ?props.fbid :0),\n\t\t\t\n      collapsed:(props.collapsed ?props.collapsed :false),\n      fretFirst:(props.fretFirst ?props.fretFirst :0),\n      fretLast:(props.fretLast ?props.fretLast :q.fretboard.fretMax),\n      fretFilter:(props.fretFilter ?props.fretFilter :[]),      //csv of fretN, if found then disable fret\n      strgFilter:(props.strgFilter ?props.strgFilter :[]),    //csv of strN, if found then hide notes\n      noteFilter:(props.noteFilter ?props.noteFilter :[]),    //notes on fetboard where button.data-selected=2; set by clicking infoPnl note\n      \n      fretBtnStyle:(props.fretBtnStyle ?props.fretBtnStyle :'NoteFirst'),    //one of: NoteFirst, IvlFirst, NoteTab, NoteAbc\n      rootType:(props.rootType ?props.rootType :''),    //one of: ['', fretRoot, fretSelect, noteSelect]\n\n      fretRoot:(props.fretRoot ?props.fretRoot :null),          //note object, set when fret clicked\n      selNoteVal:(props.selNoteVal ?props.selNoteVal :''),   //string, contains note selected in selNote control\n      octave:(props.octave ?props.octave :0), \n\n      fretSelect:(props.fretSelect ?props.fretSelect :[]),    //when rootType=fretSelect, list of frets and related data; set in fretPnl.fretClick()\n      fretSelectMatch:(props.fretSelectMatch ?props.fretSelectMatch :null),    //user selects a chord or scale to view: {type, name}\n      fretSelectMatchDisplay:(props.fretSelectMatchDisplay ?props.fretSelectMatchDisplay :'Show'),    //Show or Hide\n\n      scaleName:(props.scaleName ?props.scaleName :''),\n      scaleTriadDisplay:(props.scaleTriadDisplay ?props.scaleTriadDisplay :'Show'),    // Show or Hide\n      scaleTriadSelected:(props.scaleTriadSelected ?props.scaleTriadSelected :null),    //null or degree of selected triad\n      \n      chordName:(props.chordName ?props.chordName :''),\n      chordInvrDisplay:(props.chordInvrDisplay ?props.chordInvrDisplay :'Show'),    //Show or Hide\n      chordInvrSelected:(props.chordInvrSelected ?props.chordInvrSelected :null),    //user selected inversion position to display\n\n      ivlName:(props.ivlName ?props.ivlName :''), \n    }\n    this.duplicate = this.duplicate.bind(this)\n    this.remove = this.remove.bind(this)\n    this.reset = this.reset.bind(this)\n    this.stateChange = this.stateChange.bind(this)\n    this.strgFiltered = this.strgFiltered.bind(this)\n    this.makeQuery = this.makeQuery.bind(this)\n    this.fretSelectFind = this.fretSelectFind.bind(this)\n    this.inversionNoteByTab = this.inversionNoteByTab.bind(this)\n  }  \n  reset(){\n    this.setState({ collapsed:false })\n    this.setState({ fretSelect:[] })\n    this.setState({ fretSelectMatch:null })\n    this.setState({ fretSelectMatchDisplay:'Show' })\n    this.setState({ fretFilter:[] })\n    this.setState({ noteFilter:[] })\n    this.setState({ strgFilter:[] })\n    this.setState({ scaleName:'' })\n    this.setState({ scaleTriadDisplay:'Show' })\n    this.setState({ scaleTriadSelected:null })\n    this.setState({ chordName:'' })\n    this.setState({ chordInvrSelected:null })\n    this.setState({ chordInvrDisplay:'Show' })\n    this.setState({ rootType:'' })\n    this.setState({ ivlName:'' })\n    this.setState({ fretRoot:null })\n    this.setState({ selNoteVal:'' })\n    this.setState({ octave:0 })\n    this.setState({ fretBtnStyle:'NoteFirst' })\n  }\n  strgFiltered( strN ){\n    strN = Number(strN)\n    return ( this.state.strgFilter.indexOf( strN ) >= 0 )\n  }\n  remove(){\n    this.props.remove( this )\n  }\n  duplicate(){\n    this.props.duplicate( this )\n  }\n\n  inversionNoteByTab( tab ){\n    if(this.state.chordInvrSelected === null) return null\n    for(let nobj of this.qry.chordInvrNotes){\n      if(nobj.tab === tab) return nobj \n    } \n    return null\n  }\n  fretSelectFind( objOrTab ){\n    let list = this.state.fretSelect,\n      fnd = -1\n\n    if(list.length === 0 || objOrTab === null) return fnd  //empty list\n\n    let  tab = (typeof objOrTab === 'string' ?objOrTab :objOrTab.tab)    //find in list\n    for(let ii = 0; ii < list.length; ii++){\n      if(tab === list[ii].tab){\n        fnd = ii\n        break\n      }\n    }\n    return fnd\n  }\n  stateChange( key, val){\n    // if(key === 'rootType')   //only manually set below; can be prop instead of state\n    //   this.setState({ rootType:val })\n    // else\n    if(key === 'collapsed'){\n      if(val === true){\n        this.setState({ fretSelectMatchDisplay: 'Hide' })\n        this.setState({ scaleTriadDisplay: 'Hide' })\n        this.setState({ chordInvrDisplay: 'Hide' })\n      }\n      else{\n        this.setState({ fretSelectMatchDisplay: 'Show' })\n        this.setState({ scaleTriadDisplay: 'Show' })\n        this.setState({ chordInvrDisplay: 'Show' })\n      }\n      this.setState({ collapsed:val })\n    }else\n    if(key === 'noteFilter'){\n\n      if(val === 'clear'){  //empty list\n        this.setState({ noteFilter:[] })\n      }\n      else {    //default operation\n        let list = this.state.noteFilter.slice()\n        let idx = list.indexOf( val )\n   \n        if(idx < 0) list.push( val )\n        else list.splice( idx, 1 )\n        \n        this.setState({ noteFilter:list })\n      }\n    }else\n    if(key === 'fretBtnStyle'){\n      this.setState({ fretBtnStyle:val })\n    }else\n    if(key === 'fretFilter'){\n      let list = this.state.fretFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ fretFilter:list })\n    }else\n    if(key === 'fretRoot'){\n      this.setState({ fretRoot:val })\n\n      if(val === null)\n         this.setState({ rootType:'' })\n      else\n        this.setState({ rootType:'fretRoot' })\n      this.setState({ selNoteVal:'' })\n      this.setState({ fretSelect:[] })\n      // this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'selNoteVal'){\n      this.setState({ selNoteVal:val })\n\n      if(val === '')\n        this.setState({ rootType:'' })\n      else\n        this.setState({ rootType:'noteSelect' })\n      this.setState({ fretRoot:null })\n      this.setState({ fretSelect:[] })\n      // this.setState({ fretSelectMatch:null })\n    }else\n    if(key === 'fretSelect'){\n\n      if(val === null){   //disable fretSelect mode\n        this.setState({ fretSelect:[] })\n        // this.setState({ fretSelectMatch:null })\n        this.setState({ rootType:'' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n        return\n      }\n\n      if(Array.isArray(val) === false)  //process as array due to React state handling\n        val = [val]\n\n      let list = this.state.fretSelect.slice(),\n        idx = null, root=null\n\n      for(let nobj of val){\n        idx = this.fretSelectFind( nobj )\n        if(idx < 0) {\n          if(list.length === 0){\n            nobj.ivl = q.intervals.byName( 'P1' )\n            list.push( nobj )\n          }\n          else{\n            if(root === null) root = list[0]\n            let semis = (nobj.semis -root.semis) % 12\n            if(semis < 12) semis = 12 +semis\n            nobj.ivl = q.intervals.bySemis( semis, true )\n            list.push( nobj )\n          }\n        }else \n          list.splice( idx, 1 )\n      }\n      list.sort(function (a, b) {\n        return a.ivl.semis - b.ivl.semis\n      })\n\n      this.setState({ fretSelect:list })\n      if(this.state.rootType !== 'fretSelect'){   //set rootType to fretSelect\n        this.setState({ rootType:'fretSelect' })\n        this.setState({ fretRoot:null })\n        this.setState({ selNoteVal:'' })\n      }\n    }else\n    if(key === 'fretSelectMatch'){\n      this.setState({ fretSelectMatch:val })\n    }else\n    if(key === 'fretSelectMatchDisplay'){\n      this.setState({ fretSelectMatchDisplay:val })\n      // if(val === 'Show')\n      //   this.stateChange( 'collapsed', false)\n      // else\n      //   this.stateChange( 'collapsed', true)\n    }else\n    if(key === 'strgFilter'){\n      val = Number( val )\n      let list = this.state.strgFilter.slice()\n      let idx = list.indexOf( val )\n \n      if(idx < 0) list.push( val )\n      else list.splice( idx, 1 )\n\n      this.setState({ strgFilter:list })\n    }else\n    if(key === 'fretFirst')\n      this.setState({ fretFirst:val })\n    else\n    if(key === 'fretLast')\n      this.setState({ fretLast:val })\n    else\n    if(key === 'octave')\n      this.setState({ octave:val })\n    else\n    if(key === 'scaleName'){\n      this.setState({ scaleName:val })\n    }else\n    if(key === 'scaleTriadSelected'){\n      if(val !== null) val = Number(val)\n      if(this.state.scaleTriadSelected === val)\n        this.setState({ scaleTriadSelected: null })\n      else\n        this.setState({ scaleTriadSelected: val })\n    }else\n    if(key === 'scaleTriadDisplay'){\n      this.setState({ scaleTriadDisplay:val })\n    }else\n    if(key === 'chordName'){\n      this.setState({ chordName:val })\n    }else\n    if(key === 'chordInvrSelected'){\n     if(this.state.chordInvrSelected === val)\n       val = null\n     this.setState({ chordInvrSelected:val })\n    }else\n    if(key === 'chordInvrDisplay'){\n     this.setState({ chordInvrDisplay:val })\n    }else\n    if(key === 'ivlName'){\n      this.setState({ ivlName:val })\n    }else\n    if(key === 'semis')\n      this.setState({ semis:val })\n  }\n  makeQuery(){\n    let qry = {\n      fbid:this.state.fbid,\n\n      collapsed: this.state.collapsed,\n      fretBtnStyle: this.state.fretBtnStyle,\n      fretFilter: this.state.fretFilter,\n      noteFilter: this.state.noteFilter,\n\n      rootType: this.state.rootType,\n      root: null,\n      note: (this.state.rootType === 'fretRoot' \n              ? this.state.fretRoot.notes[0] \n              : this.state.selNoteVal ), \n      octave: this.state.octave,\n      \n      scale: null,\n      scaleTriadDisplay:this.state.scaleTriadDisplay,\n      scaleTriadIvls:null,\n      scaleTriads:null,\n      scaleTriadSelected:this.state.scaleTriadSelected,\n      \n      chord:null,\n      chordInvrDisplay:this.state.chordInvrDisplay,\n      chordInvrSelected:this.state.chordInvrSelected,\n      chordInvrNotes:null,\n      inversions:null,\n\n      ivl: null,\n\n      fretSelect: this.state.fretSelect,\n      fretSelectMatch: this.state.fretSelectMatch,\n      fretSelectMatchDisplay: this.state.fretSelectMatchDisplay,\n    }\n    if(qry.rootType === 'fretSelect'){\n      qry.root = this.state.fretSelect[0]    //note object, set in FretPnl.fretClick()\n  \n      if(qry.fretSelectMatch != null){\n        if(qry.fretSelectMatch.type === 'chord')\n          qry.fretSelectMatch.obj = q.chords.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n        else\n        if(qry.fretSelectMatch.type === 'scale')\n          qry.fretSelectMatch.obj = q.scales.obj( qry.fretSelectMatch.note, qry.fretSelectMatch.abr )\n      }\n    } \n    else{\n      if(qry.rootType === 'fretRoot')\n        qry.root = this.state.fretRoot    //note object, set in FretPnl.fretClick()\n      if(qry.rootType === 'noteSelect' && qry.note !== '' && qry.note !== 'All')\n        qry.root = q.notes.objByNote( qry.note )    //note object\n\n\n      if(this.state.scaleName !== '' && qry.root){\n        qry.scale = q.scales.obj( qry.note, this.state.scaleName )\n        qry.scaleTriads = q.scales.degreeTriads( qry.note, this.state.scaleName )\n        if(qry.scaleTriadSelected != null)\n          qry.scaleTriadIvls = qry.scaleTriads.list[ qry.scaleTriadSelected -1 ].ivls\n      }\n      if(this.state.chordName !== '' && qry.root){\n        qry.chord = q.chords.obj( qry.note, this.state.chordName )\n        qry.inversions = q.chords.inversions(qry.root.note, qry.chord.abr, qry.root.octave )\n        if(qry.chordInvrSelected !== null){\n          qry.chordInvrNotes = q.chords.inversionNotes(  qry.inversions, qry.chordInvrSelected )\n        }\n      }\n      if(this.state.ivlName !== '' && qry.root){\n        qry.ivl = q.intervals.byName( this.state.ivlName )    //this.state.ivlName == abr\n        qry.ivl.note = q.notes.calc( qry.note, qry.ivl )\n        // qry.ivl.notes = q.notes.bySemis( qry.root.semis +qry.ivl.semis )\n      }\n    }\n    this.qry = qry\n    return qry\n  }\n  render(){\n    let qry = this.makeQuery()\n    console.log('Fretboard.render()', this.props, this.state, qry)\n    // ivlName={this.state.ivlName}\n    return(\n      <div className='fretboard' id={'Fretboard'+qry.fbid}>\n        <FretPnl\n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          selNoteVal={this.state.selNoteVal} \n\n          qry={qry}\n          stateChange={this.stateChange}\n          strgFiltered={this.strgFiltered}\n          fretSelectFind={this.fretSelectFind}\n          inversionNoteByTab={this.inversionNoteByTab}\n        />\n        <QueryPnl \n          collapsed={this.state.collapsed}\n          fretFirst={this.state.fretFirst}\n          fretLast={this.state.fretLast}\n\n          selNoteVal={this.state.selNoteVal} \n          chordName={this.state.chordName}\n          scaleName={this.state.scaleName}\n          ivlName={this.state.ivlName}\n\n          duplicate={this.duplicate}\n          qry={qry}\n          remove={this.remove}\n          reset={this.reset} \n          stateChange={this.stateChange}\n          strgFiltered={this.strgFiltered} \n         />\n      </div>\n    )\n  }\n}\n\nexport default Fretboard;\n","/*\n  About Dialog\n  - for GuitarJoe by Chris DeFreitas\n\n  requires:\n    Dialog.css\n*/\nimport React from 'react';\nimport Popup from 'reactjs-popup';\nimport './Dialog.css';\n\nconst About = () => (  \n  <Popup\n    trigger={<button className=\"btnInfo\">About</button>}\n    modal\n    nested\n  >\n    {close => (\n      <div className=\"modal\">\n        <div className=\"header\"> \n          About GuitarJoe \n          <span style={{fontSize:'0.5em', display:'inline-block', marginLeft:'0.5em'}}>v1.6 20201015</span> \n          <hr className='hrLine' /> \n        </div>\n        <div className=\"content\">\nImportant: <br />\n&nbsp;- Everything is clickable...please explore<br />\n&nbsp;- use your browser's zoom controls to enlarge/shrink the controls\n<br /><br />\n\nGuitarJoe is a free web application, no ads, no logins, no tracking.  \nThe goal was to create a tool that would make guitar theory accessible while practicing.\nI am not anything close to a musician, so\nI was going crazy taking notes and diagramming chords, scales and intervals: I needed a tool\nto facilitate my understanding so I could focus on the guitar instead of managing scraps of information.\nThis application has successfully reduced my hair loss--I hope it has the same effect on you!\n<br /><br />\n\nWhats New in Update 20211015<br />\n1. Implemented simple animations to expand/collapse InfoPnl lists of scale degree triads, chord inversions, and FretSelect matches.\n<br />\n2. When in FretRoot mode, and a chord is selected, the InfoPnl now correctly displays octaves and intervals of chord inversions.\n<br /><br />\n\nAbout Chord Inversions<br />\nThe guitar provides many combinations for inversions.  The app tries to display the ideal inversion:  \nThe bass note is highlighted, then the remaining notes are selected in order, on higher strings.  \nUnfortunately, this \nresults in certain inversions having no selections on the fretboard, such as CMaj7 third position.  \n<br /><br />\n&nbsp;- Tested to work in Chrome(Windows), Firefox(Windows, Linux), and Safari(iPad, iPhone)<br />\n&nbsp;- Review documentation, updates and references in the <a href='https://github.com/ChrisDeFreitas/guitarjoe/' target='_new'>GitHub Repository</a> <br />\n&nbsp;- Send comments and bugs to <a href='mailto:ChrisDeFreitas777@gmail.com?subject=GuitarJoe:'>ChrisDeFreitas777@gmail.com</a>\n<br /><br />\nThanks to<br />\n&nbsp;- Application hosted on <a href='https://github.com/ChrisDeFreitas/guitarjoe' target='_new'>Github</a>  <br />\n&nbsp;- Background image from <a href='https://www.flickr.com/photos/webtreatsetc/with/4514047664/' target='_new'>WebTreats ETC</a> <br />\n&nbsp;- Built with the <a href='https://reactjs.org/' target='_new'>React</a> Javascript library <br />\n&nbsp;- <a href='https://www.framer.com/motion/' target='_new'>Framer Motion</a> animation library for React <br />\n&nbsp;- Fuggles font by Robert Leuschke on <a href='https://fonts.google.com/?query=Robert+Leuschke/' target='_new'>Google Fonts</a> <br />\n&nbsp;- Guitar icon by monkik from the <a href='https://thenounproject.com/term/guitar/2588464/' target='_new'>Noun Project</a> <br />\n&nbsp;- Popup control from <a href='https://react-popup.elazizi.com/' target='_new'>reactjs-popup</a> <br />\n&nbsp;- <a href='https://github.com/rigobauer/react-abcjs'>react-abcjs</a>, a React component that renders notes on music staffs <br />\n<br />\nCreated by Chris DeFreitas, BC Canada<br />\n        </div>\n        <div className=\"actions\">\n          <button\n            className=\"button\"\n            onClick={() => {\n              close()\n            }}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    )}\n  </Popup>\n)\n\nexport default About","/*\n  App.js\n  - by Chris DeFreitas, ChrisDeFreitas777@gmail.com\n  - entrypoint for GuitrJoe app\n\n*/\nimport React, { useState } from 'react';\n\nimport './App.css';\n// import './Bgnd.css';\n// import Bgnd from \"./Bgnd.js\";\nimport Fretboard from \"./Fretboard\"\nimport About from \"./AboutDlg\"\nimport { ReactComponent as Logo } from './resources/logo.svg'\n\n\nfunction App(){\n\n  const [fbs, setFbs] = useState( [{id:0, state:true}] )  //one cell for each fretboard instance\n  const [newid, setNewId] = useState( null )\t\t// assigned in duplicate()\n  \n  function indexOfFbid( fbid ){\n    for(let ii=0; ii < fbs.length; ii++){\n      if(fbs[ii].id === fbid)\n        return ii\n    }\n    return false\n  }\n  function duplicate( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      nid = list.length,\n      obj = {id:nid, state:fretboard.state},\n      idx = indexOfFbid( fbid )\n      \n    if(idx === false)\n      throw new Error(`App.duplicate() error, fbid=[${fbid}] not found.`)\n      \n    list.splice( (idx +1), 0, obj)\t\t\n    setFbs( list )\n    setNewId( nid )\n    // console.log('App.duplicate', list)\n  }\n  function remove( fretboard ){\n    let fbid = fretboard.props.fbid,\n      list = fbs.slice(),\n      idx = indexOfFbid( fbid )\n     \n    if(idx === false)\n      throw new Error(`App.remove() error, fbid=[${fbid}] not found.`)\n\n    list[ idx ].state = false\n    setNewId( null )\n    setFbs( list )\n    // console.log('App.remove()', fbid, list)\n  }\n\n  let list = [], fbCount=fbs.length\n  for(let ii=0; ii < fbCount; ii++){\n    let el = null,\n      id = fbs[ii].id,       //use in .key to help react\n      state = fbs[ii].state  //one of: true, state object, false(a deleted fretboard)\n    if(id === newid){   //create new fretboard\n      el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} \n\t\t\t\tcollapsed={state.collapsed}\n\t\t\t\tfretFirst={state.fretFirst}\n\t\t\t\tfretLast={state.fretLast}\n\t\t\t\tfretBtnText={state.fretBtnText}\n\t\t\t\t\n        fretFilter={state.fretFilter}\n\t\t\t\tstrgFltrList={state.strgFltrList}\n        noteFilter={state.noteFilter}\n        \n        fretSelect={state.fretSelect}\n        fretSelectMatch={state.fretSelectMatch}\n\n\t\t\t\trootType={state.rootType}\n\t\t\t\tfretRoot={state.fretRoot}\n\t\t\t\tselNoteVal={state.selNoteVal} \n\t\t\t\toctave={state.octave} \n\t\t\t\tscaleName={state.scaleName}\n\t\t\t\tchordName={state.chordName}\n\t\t\n        ivlName={state.ivlName}\n      />\n    }else{\n      if(state !== false) //existing fretboard; magic of react does not overwrite old data\n        el = <Fretboard key={id} fbid={id} duplicate={duplicate} remove={remove} />\n    }\n    if(el != null)\n      list.push( el )\n  }\n\n  return (\n    <div className=\"App\">\n\t\t\t<header className=\"App-header header\">\n        <Logo className=\"Logo\" alt=\"Logo\" />\n        GuitarJoe v0.1.6 \n        <About />\n      </header>\n\t\t\t{list}\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n\t  <App />\n\t</React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals( console.log );\n"],"sourceRoot":""}